<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Ayman's PlayTorrio</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <style>
        /* Performance mode overrides: remove expensive visual effects when enabled */
        body.perf-mode * {
            backdrop-filter: none !important;
        }

        body.perf-mode .shadow-heavy {
            box-shadow: none !important;
        }

        /* Prefer letting Chrome skip offscreen rendering */
        body.perf-mode img {
            content-visibility: auto;
        }

        :root {
            --primary: #2a1847;
            /* header/cards */
            --secondary: #8b5cf6;
            /* subtle accents */
            --tertiary: #c084fc;
            /* highlights/pills */
            --dark: #120a1f;
            /* page background */
            --light: #f8f9fa;
            /* text */
            --gray: #6c757d;
            /* muted text */
            --danger: #dc3545;
            --success: #28a745;
            /* Accent (kept var name for minimal changes) */
            --vlc-orange: #a855f7;
            /* accent purple */
            --vlc-dark: #2d2d2d;
            /* Restored previously implicit theme variables used throughout layout */
            --header-bg: var(--primary);
            --card-bg: #1d1233;
            --input-bg: rgba(255, 255, 255, 0.06);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--dark);
            color: var(--light);
            overflow-x: hidden;
        }

        /* Custom Title Bar - hidden on macOS to use native */
        .custom-title-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 32px;
            background: linear-gradient(135deg, rgba(42, 24, 71, 0.95) 0%, rgba(18, 10, 31, 0.95) 100%);
            border-bottom: 1px solid rgba(168, 85, 247, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 12px;
            z-index: 999999;
            -webkit-app-region: drag;
            user-select: none;
        }

        /* Hide custom title bar on macOS and Android/Mobile */
        body.platform-darwin .custom-title-bar,
        body.platform-android .custom-title-bar,
        @media (max-width: 768px) {
            .custom-title-bar {
                display: none !important;
            }
        }

        /* Adjust body padding for platforms without custom title bar */
        body.platform-darwin,
        body.platform-android {
            padding-top: env(safe-area-inset-top, 0px) !important;
        }

        /* Hide desktop-only settings on Android */
        body.platform-android .desktop-only-setting {
            display: none !important;
        }

        @media (max-width: 768px) {
            body.ui-new {
                padding-top: env(safe-area-inset-top, 0px) !important;
            }

            body.ui-new header {
                top: 0 !important;
                position: sticky;
            }

            /* Ensure content starts below header */
            .app-main {
                padding-top: 0 !important;
            }
        }

        /* Adjust body padding only for non-mac platforms */
        body.ui-new:not(.platform-darwin) {
            padding-top: 32px;
        }

        body.ui-new:not(.platform-darwin) header {
            top: 32px;
        }

        /* Keep full-screen overlays below the title bar in the new UI */
        body.ui-new .wcjs-player-container {
            top: 32px !important;
            height: calc(100vh - 32px) !important;
        }

        .title-bar-left {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--light);
        }

        .title-bar-title {
            opacity: 0.9;
        }

        .title-bar-controls {
            display: flex;
            gap: 4px;
            -webkit-app-region: no-drag;
        }

        .title-bar-btn {
            width: 46px;
            height: 32px;
            border: none;
            background: transparent;
            color: rgba(255, 255, 255, 0.8);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 10px;
            position: relative;
        }

        .title-bar-btn svg {
            width: 10px;
            height: 10px;
        }

        .title-bar-btn:hover {
            background: rgba(168, 85, 247, 0.2);
        }

        .title-bar-btn.title-bar-close:hover {
            background: #dc3545;
            color: white;
        }

        /* Adjust body padding for title bar - REMOVED for mobile native look */
        body.ui-new {
            padding-top: 0 !important;
        }

        body.ui-new header {
            top: 0 !important;
        }

        /* Global performance profile (safe visual downgrades only) */
        body.perf-mode * {
            backdrop-filter: none !important;
        }

        body.perf-mode .shadow-heavy {
            box-shadow: none !important;
        }

        body.perf-mode img {
            content-visibility: auto;
        }

        body.perf-mode #updateOverlay {
            backdrop-filter: none !important;
        }

        header {
            background-color: var(--header-bg);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 900;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--light);
            text-decoration: none;
        }

        /* Search Container */
        .search-container {
            position: relative;
            flex: 1;
            max-width: 600px;
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            pointer-events: none;
        }

        .search-container input {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 25px;
            background-color: var(--input-bg);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .search-container input:focus {
            outline: none;
            border-color: var(--vlc-orange);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }

        .search-container input::placeholder {
            color: var(--gray);
        }

        .user-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
            flex-wrap: nowrap;
            /* Keep buttons on same line */
        }

        /* Consistent button sizing for navbar */
        .user-actions .btn {
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            white-space: nowrap;
            min-height: 38px;
            border-radius: 8px;
            flex-shrink: 1;
            /* Allow buttons to shrink */
        }

        .user-actions .btn i {
            font-size: 0.95rem;
        }

        /* Update & version modals removed (v1.5.3 / v1.6.3). Old modal styles cleaned up. */

        /* Base button style (restored) */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .btn-primary {
            background-color: var(--vlc-orange);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--vlc-orange);
            color: var(--vlc-orange);
        }

        .btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-primary:hover {
            background-color: #9333ea;
        }

        .btn-outline:hover {
            background-color: rgba(168, 85, 247, 0.1);
        }

        .btn-outline.active {
            background-color: var(--vlc-orange);
            color: white;
        }

        main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-left: 1rem;
            border-left: 4px solid var(--vlc-orange);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .section-title i {
            color: var(--tertiary);
        }

        .categories {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            overflow-x: auto;
            padding: 0.5rem 0;
        }

        .category {
            padding: 0.8rem 1.5rem;
            background-color: var(--input-bg);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), background-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            white-space: nowrap;
            font-weight: 600;
        }

        .category:hover,
        .category.active {
            background-color: var(--vlc-orange);
            color: white;
        }

        .movies-grid,
        .genre-grid,
        .genre-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .movie-card,
        .genre-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
            cursor: pointer;
        }

        /* Performance mode: reduce heavy shadows on cards */
        body.perf-mode .movie-card,
        body.perf-mode .genre-card {
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
        }

        .movie-card:hover,
        .genre-card:hover {
            transform: translateY(-12px) scale(1.03);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4), 0 0 20px rgba(168, 85, 247, 0.3);
        }

        body.perf-mode .movie-card:hover,
        body.perf-mode .genre-card:hover {
            transform: translateY(-6px) scale(1.02);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3) !important;
        }

        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        .movie-info,
        .genre-info {
            padding: 1rem;
        }

        .movie-title,
        .genre-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .movie-year {
            color: var(--tertiary);
            font-size: 0.9rem;
        }

        /* ===== DOWNLOADER STYLES ===== */
        .downloader-search {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        /* ===== HERO SECTION STYLES ===== */
        .hero-section {
            position: relative;
            width: 100%;
            height: 60vh;
            min-height: 350px;
            max-height: 500px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .hero-backdrop-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .hero-backdrop {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .hero-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 80%;
            background: linear-gradient(to top, var(--dark) 0%, transparent 100%);
        }

        .hero-content {
            position: absolute;
            bottom: 2rem;
            left: 1rem;
            right: 1rem;
            z-index: 10;
        }

        .hero-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
        }

        .hero-overview {
            font-size: 0.9rem;
            color: var(--light);
            opacity: 0.9;
            margin-bottom: 0.75rem;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.6);
        }

        .hero-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .hero-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            color: #ffc107;
        }

        .hero-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .hero-btn {
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
        }

        /* ===== SLIDERS CONTAINER STYLES ===== */
        .sliders-container {
            padding: 0 1rem;
        }

        .slider-section {
            margin-bottom: 1.5rem;
        }

        .slider-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .slider-title i {
            color: var(--vlc-orange);
        }

        .slider-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .content-slider {
            display: flex;
            gap: 0.75rem;
            overflow-x: auto;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
            flex: 1;
        }

        .content-slider::-webkit-scrollbar {
            display: none;
        }

        .slider-item {
            flex: 0 0 130px;
            cursor: pointer;
            transition: transform 0.3s ease;
            border-radius: 8px;
            overflow: hidden;
            background: var(--card-bg);
        }

        .slider-item:hover {
            transform: scale(1.05);
        }

        .slider-poster {
            width: 100%;
            height: 195px;
            object-fit: cover;
        }

        .slider-info {
            padding: 0.5rem;
        }

        .slider-item-title {
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .slider-item-meta {
            display: flex;
            gap: 0.5rem;
            font-size: 0.7rem;
            color: var(--gray);
            margin-top: 0.25rem;
        }

        .slider-rating {
            color: #ffc107;
        }

        .slider-nav {
            display: none;
            /* Hidden on mobile, show on desktop */
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.7);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
        }

        .slider-prev {
            left: -18px;
        }

        .slider-next {
            right: -18px;
        }

        @media (min-width: 769px) {
            .slider-nav {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        /* Loading indicator */
        .loading {
            text-align: center;
            padding: 2rem;
            color: var(--gray);
        }

        .loading i {
            margin-right: 0.5rem;
        }

        .downloader-search input {
            flex: 1;
            padding: 0.8rem 1rem;
            border-radius: 10px;
            border: none;
            background-color: rgba(255, 255, 255, 0.08);
            color: var(--light);
        }

        .downloader-search button {
            padding: 0.7rem 1rem;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            color: #fff;
            cursor: pointer;
        }

        .downloader-results {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .downloader-results.single {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            /* don't stretch heights */
            gap: 1rem;
        }

        .downloader-results.single .downloader-item {
            flex: 0 0 260px;
            /* fixed column width for poster card */
            max-width: 260px;
            align-self: flex-start;
            position: sticky;
            /* keep the highlighted card visible */
            top: 12px;
        }

        .downloader-results.single .downloader-files-card {
            flex: 1 1 auto;
            /* fill remaining space */
            min-width: 360px;
        }

        .downloader-item {
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            overflow: hidden;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            cursor: pointer;
            outline: none;
        }

        .downloader-item:hover {
            transform: translateY(-4px) scale(1.02);
            border-color: rgba(168, 85, 247, 0.5);
            box-shadow: 0 12px 32px rgba(168, 85, 247, 0.25);
        }

        .downloader-item.selected {
            border-color: #a855f7;
            box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.35) inset, 0 10px 24px rgba(168, 85, 247, 0.25);
        }

        .downloader-thumb {
            width: 100%;
            height: 240px;
            object-fit: cover;
            background: #1f2937;
        }

        .downloader-meta {
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.3rem;
        }

        .downloader-title {
            color: #fff;
            font-weight: 600;
        }

        .downloader-year {
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .downloader-empty {
            color: #9ca3af;
            text-align: center;
            padding: 2rem 1rem;
        }

        .downloader-type-toggle {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: auto;
        }

        .downloader-type-toggle .filter-btn {
            padding: 0.55rem 0.9rem;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            background: rgba(255, 255, 255, 0.06);
            color: #fff;
            font-weight: 600;
            cursor: pointer;
        }

        /* Live TV Styles */
        .livetv-category-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 0;
        }

        .livetv-category-label {
            font-weight: 600;
            color: #10b981;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .livetv-category-dropdown {
            padding: 0.75rem 1.25rem;
            border-radius: 12px;
            border: 2px solid rgba(16, 185, 129, 0.3);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.12), rgba(5, 150, 105, 0.08));
            color: #fff;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1), border-color 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            outline: none;
            min-width: 200px;
        }

        .livetv-category-dropdown:hover {
            border-color: rgba(16, 185, 129, 0.5);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.18), rgba(5, 150, 105, 0.12));
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .livetv-category-dropdown:focus {
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.15);
        }

        .livetv-category-dropdown option {
            background: #1a1a2e;
            color: #fff;
            padding: 0.75rem;
            font-weight: 600;
        }

        .livetv-matches-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 1.25rem;
            padding: 0.5rem 0;
        }

        .livetv-match-card {
            background: linear-gradient(135deg, rgba(17, 24, 39, 0.8), rgba(31, 41, 55, 0.6));
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            position: relative;
        }

        .livetv-match-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            opacity: 0;
            transition: opacity 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .livetv-match-card:hover {
            transform: translateY(-6px) scale(1.02);
            border-color: rgba(16, 185, 129, 0.4);
            box-shadow: 0 12px 32px rgba(16, 185, 129, 0.2), 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .livetv-match-card:hover::before {
            opacity: 1;
        }

        .livetv-poster {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background: linear-gradient(135deg, #1f2937, #111827);
        }

        .livetv-poster-placeholder {
            width: 100%;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #1f2937, #111827);
            color: rgba(255, 255, 255, 0.2);
            font-size: 2.5em;
        }

        .livetv-match-info {
            padding: 1.25rem;
        }

        .livetv-match-title {
            font-weight: 600;
            font-size: 0.95rem;
            margin-bottom: 0.625rem;
            color: #f9fafb;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            line-height: 1.4;
            letter-spacing: 0.01em;
        }

        .livetv-match-category {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            background: rgba(16, 185, 129, 0.12);
            border: 1px solid rgba(16, 185, 129, 0.25);
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 600;
            color: #34d399;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .livetv-watch-btn {
            width: 100%;
            margin-top: 0.875rem;
            padding: 0.75rem;
            background: linear-gradient(135deg, #10b981, #059669);
            border: none;
            border-radius: 8px;
            color: #fff;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        .livetv-watch-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5);
            transform: translateY(-4px) scale(1.02);
        }

        .livetv-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: rgba(255, 255, 255, 0.4);
        }

        .livetv-empty p {
            margin-top: 1rem;
            font-size: 1.1rem;
        }

        /* Streams List Modal */
        .livetv-streams-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .livetv-streams-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid rgba(16, 185, 129, 0.3);
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(16, 185, 129, 0.3);
        }

        .livetv-streams-header {
            padding: 1.5rem;
            background: rgba(16, 185, 129, 0.1);
            border-bottom: 2px solid rgba(16, 185, 129, 0.3);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .livetv-streams-header h3 {
            font-size: 1.3rem;
            color: #10b981;
            font-weight: 700;
        }

        .livetv-close-btn {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid rgba(220, 53, 69, 0.4);
            border-radius: 8px;
            color: #ff4757;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .livetv-close-btn:hover {
            background: rgba(220, 53, 69, 0.3);
            transform: scale(1.12);
        }

        .livetv-streams-list {
            padding: 1.5rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .livetv-stream-item {
            padding: 1rem 1.25rem;
            background: rgba(16, 185, 129, 0.08);
            border: 1px solid rgba(16, 185, 129, 0.2);
            border-radius: 12px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .livetv-stream-item:hover {
            background: rgba(16, 185, 129, 0.15);
            border-color: #10b981;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);
        }

        .livetv-stream-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Disable hover animation on Live TV page trakt-card container */
        #livetv-page .trakt-card {
            transition: none !important;
        }

        #livetv-page .trakt-card:hover {
            transform: none !important;
            box-shadow: none !important;
            border-color: rgba(255, 255, 255, 0.15) !important;
        }

        .livetv-stream-actions {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .livetv-play-stream-btn,
        .livetv-copy-link-btn,
        .livetv-open-browser-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            white-space: nowrap;
        }

        .livetv-play-stream-btn {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .livetv-play-stream-btn:hover {
            background: linear-gradient(135deg, #059669, #047857);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            transform: scale(1.08);
        }

        .livetv-copy-link-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .livetv-copy-link-btn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
            transform: scale(1.08);
        }

        .livetv-open-browser-btn {
            background: linear-gradient(135deg, #6366f1, #4f46e5);
        }

        .livetv-open-browser-btn:hover {
            background: linear-gradient(135deg, #4f46e5, #4338ca);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4);
            transform: scale(1.08);
        }

        .livetv-play-stream-btn:active,
        .livetv-copy-link-btn:active,
        .livetv-open-browser-btn:active {
            transform: scale(0.98);
        }

        .livetv-stream-source {
            font-weight: 700;
            color: #10b981;
            font-size: 1.1rem;
        }

        .livetv-stream-details {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
            font-size: 0.9rem;
        }

        .livetv-stream-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .livetv-stream-badge.hd {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: #fff;
        }

        .livetv-stream-badge.quality {
            background: rgba(16, 185, 129, 0.2);
            border: 1px solid rgba(16, 185, 129, 0.4);
            color: #10b981;
        }

        .livetv-stream-badge.language {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #3b82f6;
        }

        .livetv-stream-badge.viewers {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.4);
            color: #a855f7;
        }

        .livetv-stream-badge.ads {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }

        .livetv-stream-badge.nsfw {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.4);
            color: #a855f7;
        }

        .livetv-loading {
            text-align: center;
            padding: 2rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .livetv-loading i {
            font-size: 2em;
            animation: spin 1.2s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(0.98);
            }
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.4;
                transform: scale(0.96);
            }
        }

        .downloader-type-toggle .filter-btn.active {
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            border-color: transparent;
        }

        .movie-rating {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--tertiary);
            color: #1f1140;
            padding: 0.3rem 0.6rem;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .add-to-list-btn {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: var(--light);
            border: none;
            padding: 0.5rem;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.8);
        }

        .movie-card:hover .add-to-list-btn {
            opacity: 1;
            transform: scale(1);
        }

        .add-to-list-btn:hover {
            background-color: var(--success);
            transform: scale(1.12);
        }

        .add-to-list-btn.in-list {
            background-color: var(--success);
            opacity: 1;
            transform: scale(1);
        }

        .add-to-list-btn.in-list i:before {
            content: "\f00c";
            /* checkmark */
        }

        .movie-card .done-watching-btn {
            position: absolute;
            top: 10px;
            left: 55px;
            /* Position next to the add-to-list button */
            background-color: rgba(0, 0, 0, 0.7);
            color: var(--light);
            border: none;
            padding: 0.5rem;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.8);
        }

        .movie-card:hover .done-watching-btn {
            opacity: 1;
            transform: scale(1);
        }

        .movie-card .done-watching-btn:hover {
            background-color: #17a2b8;
            /* info blue color */
            transform: scale(1.12);
        }

        .movie-card .done-watching-btn.is-done {
            background-color: #17a2b8;
            opacity: 1;
            transform: scale(1);
        }

        .movie-card .done-watching-btn.is-done i:before {
            content: "\f058";
            /* check-circle */
        }

        .loading {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
            color: var(--gray);
        }

        .loading i {
            animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes slideInRight {
            0% {
                transform: translateX(100%) scale(0.9);
                opacity: 0;
            }

            60% {
                transform: translateX(-5%) scale(1.02);
                opacity: 0.9;
            }

            100% {
                transform: translateX(0) scale(1);
                opacity: 1;
            }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        /* Modal dropdowns (sort/filter) */
        .modal-select {
            background: rgba(255, 255, 255, 0.08);
            color: var(--light);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 0.35rem 0.6rem;
            font-size: 0.95rem;
            font-weight: 600;
            letter-spacing: 0.2px;
        }

        .modal-select:focus {
            outline: none;
            border-color: rgba(168, 85, 247, 0.45);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.15);
        }

        .modal-select option {
            background: #1f1140;
            color: #fff;
            font-weight: 600;
        }

        /* Episode details overlay used in showEpisodeDetails() */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }

        /* Ensure resume modal is above all other overlays */
        #resumeModal {
            z-index: 6000;
        }

        .modal-content {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-header {
            position: relative;
            height: 400px;
            overflow: hidden;
        }

        .modal-backdrop {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.4);
        }

        .modal-header-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            padding: 2rem;
            display: flex;
            gap: 2rem;
        }

        .modal-poster {
            width: 200px;
            height: 300px;
            border-radius: 10px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.5);
        }

        .modal-title {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .modal-info {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            align-items: center;
        }

        .modal-rating {
            background-color: var(--tertiary);
            color: #1f1140;
            padding: 0.3rem 0.8rem;
            border-radius: 30px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .modal-year {
            font-size: 1.2rem;
            color: var(--gray);
        }

        .modal-tagline {
            font-style: italic;
            margin-bottom: 1rem;
            color: var(--tertiary);
        }

        .modal-body {
            padding: 2rem;
            background: var(--card-bg);
        }

        .modal-section-title {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--vlc-orange);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Anime dropdown and button styles */
        #animeSeasonSelector:hover,
        #animeEpisodeSelector:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(37, 99, 235, 0.25));
            border-color: rgba(59, 130, 246, 0.5);
        }

        #animeSeasonSelector:focus,
        #animeEpisodeSelector:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        #animeSeasonSelector option,
        #animeEpisodeSelector option {
            background: #1a1a2e;
            color: var(--light);
            padding: 0.5rem;
            font-weight: 500;
        }

        #animeCustomSearchBtn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        #animeCustomSearchBtn:active {
            transform: translateY(0);
        }

        #animeCustomSearchInput:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .modal-overview {
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .cast-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .cast-card {
            cursor: pointer;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .cast-card:hover {
            transform: translateY(-5px);
        }

        .cast-img {
            width: 100%;
            height: 160px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 0.5rem;
        }

        .cast-name {
            font-weight: 600;
            margin-bottom: 0.2rem;
            font-size: 0.9rem;
        }

        .cast-character {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .similar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .similar-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.75rem !important;
            }
        }

        .seasons-container {
            margin-bottom: 2rem;
        }

        .season-selector {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .season-btn {
            padding: 0.5rem 1rem;
            background-color: var(--input-bg);
            border: none;
            border-radius: 30px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .season-btn.active {
            background-color: var(--vlc-orange);
            color: white;
        }

        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
        }

        .episode-card {
            background-color: var(--input-bg);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
        }

        .episode-card:hover {
            border-color: var(--secondary);
        }

        .episode-card.selected {
            border-color: var(--vlc-orange);
            background-color: rgba(255, 105, 0, 0.1);
        }

        .episode-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            justify-content: flex-end;
        }

        .episode-done-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .episode-done-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .episode-done-btn.is-done {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-color: #22c55e;
            color: white;
        }

        .episode-done-btn.is-done:hover {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        }

        .episode-badge {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            z-index: 5;
        }

        .episode-subtitle {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin: 0.25rem 0;
            font-style: italic;
        }

        .episode-details-btn {
            position: absolute;
            bottom: 12px;
            right: 12px;
            transform: none;
            width: auto;
            height: 36px;
            padding: 0 14px;
            border: none;
            border-radius: 18px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--vlc-orange) 100%);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            z-index: 4;
            box-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
            backdrop-filter: blur(6px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .episode-details-btn:hover {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, var(--secondary) 100%);
            transform: translateY(-1px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.45);
        }

        .episode-modal {
            max-width: 700px;
            max-height: 85vh;
            overflow: hidden;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .episode-modal .modal-header {
            display: flex;
            align-items: center;
            padding: 24px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
        }

        .episode-modal .show-poster {
            width: 60px;
            height: 90px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .episode-modal .header-content {
            flex: 1;
        }

        .episode-modal .modal-header h2 {
            margin: 0 0 8px 0;
            color: white;
            font-size: 24px;
            font-weight: 700;
        }

        .episode-modal .modal-subtitle {
            margin: 0;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 500;
        }

        .episode-modal .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .episode-modal .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.12);
        }

        .episode-modal .modal-body {
            padding: 0;
            max-height: calc(85vh - 140px);
            overflow-y: auto;
        }

        .episode-list {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .episode-item {
            display: flex;
            align-items: center;
            padding: 16px 24px;
            background: transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .episode-item:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .episode-item:last-child {
            border-bottom: none;
        }

        /* Highlight selected episode in the modal */
        .episode-item.selected {
            background: rgba(255, 105, 0, 0.10);
            border-left: 3px solid var(--vlc-orange);
        }

        /* Stronger highlight inside episode modal to ensure visibility on gradients */
        .episode-modal .episode-item.selected {
            background: rgba(255, 105, 0, 0.14);
            border-left: 4px solid var(--vlc-orange);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06), 0 4px 14px rgba(255, 105, 0, 0.25);
        }

        .episode-number {
            flex-shrink: 0;
            width: 70px;
            height: 50px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            margin-right: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .episode-info {
            flex: 1;
        }

        .episode-info h4 {
            margin: 0 0 6px 0;
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            line-height: 1.3;
        }

        .episode-info p {
            margin: 0;
            color: #8a92b2;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .episode-info p i {
            color: #667eea;
        }

        .episode-remove-btn {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: rgba(244, 67, 54, 0.8);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            box-shadow: 0 2px 8px rgba(244, 67, 54, 0.3);
        }

        .episode-remove-btn:hover {
            background: #f44336;
            transform: scale(1.12);
            box-shadow: 0 4px 12px rgba(244, 67, 54, 0.5);
        }

        .episode-img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .episode-info {
            padding: 0.8rem;
        }

        .episode-title {
            font-weight: 600;
            margin-bottom: 0.3rem;
            font-size: 0.9rem;
        }

        .episode-date {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .torrents-container {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 1.5rem;
            margin-top: 2rem;
        }

        .torrents-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .torrents-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .torrent-item {
            background-color: var(--input-bg);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .torrent-info {
            flex: 1;
            min-width: 0;
            overflow: hidden;
        }

        .torrent-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .torrent-details {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--gray);
            flex-wrap: wrap;
        }

        .torrent-quality {
            background-color: var(--tertiary);
            color: var(--dark);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .cached-badge {
            background: linear-gradient(135deg, #198754 0%, #20c997 100%);
            color: #fff;
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
            display: inline-flex;
            align-items: center;
            gap: 0.3rem;
            box-shadow: 0 2px 8px rgba(25, 135, 84, 0.3);
            animation: pulse-glow 3.5s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        .cached-badge::before {
            content: '';
            font-size: 0.9rem;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 2px 8px rgba(25, 135, 84, 0.3);
                transform: scale(1);
            }

            50% {
                box-shadow: 0 4px 16px rgba(25, 135, 84, 0.7);
                transform: scale(1.02);
            }
        }

        .torrent-actions {
            display: flex;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .torrent-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 1rem;
        }

        .torrent-pagination button {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .torrent-pagination button:disabled {
            color: var(--gray);
            cursor: not-allowed;
        }

        /* Chromecast Device Selection Styles */
        .chromecast-modal-header {
            padding: 1.5rem 2rem;
            border-bottom: 2px solid rgba(139, 92, 246, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chromecast-modal-header h3 {
            font-size: 1.5rem;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin: 0;
        }

        .chromecast-modal-header i {
            color: var(--tertiary);
        }

        .chromecast-device-list {
            min-height: 200px;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .chromecast-device-item {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.05));
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 12px;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chromecast-device-item:hover {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(168, 85, 247, 0.1));
            border-color: var(--tertiary);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .chromecast-device-icon {
            font-size: 2rem;
            color: var(--tertiary);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(139, 92, 246, 0.2);
            border-radius: 50%;
        }

        .chromecast-device-info {
            flex: 1;
        }

        .chromecast-device-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--light);
            margin-bottom: 0.25rem;
        }

        .chromecast-device-host {
            font-size: 0.9rem;
            color: var(--gray);
        }

        .loading-spinner {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 3rem;
            color: var(--gray);
        }

        .loading-spinner i {
            font-size: 2.5rem;
            color: var(--tertiary);
        }

        .chromecast-no-devices {
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        .chromecast-no-devices i {
            font-size: 3rem;
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .chromecast-no-devices h4 {
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        .chromecast-refresh-btn {
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, var(--secondary), var(--tertiary));
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chromecast-refresh-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
        }


        .torrent-pagination span {
            margin: 0 1rem;
        }

        .provider-buttons {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: nowrap;
            /* keep on one line */
            overflow-x: auto;
            /* horizontal scroll */
            -webkit-overflow-scrolling: touch;
            scroll-snap-type: x proximity;
            padding-bottom: 0.25rem;
        }

        .provider-btn {
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            white-space: nowrap;
            flex: 0 0 auto;
            /* don't shrink */
            scroll-snap-align: start;
            min-width: 120px;
        }

        .provider-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .provider-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .provider-btn.active:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        /* Pretty pill/ghost button helpers */
        .btn-pill {
            border-radius: 999px;
            padding: 0.6rem 1rem;
            font-weight: 700;
            letter-spacing: .2px;
        }

        .btn-ghost {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.15);
            color: var(--light);
        }

        .btn-ghost:hover {
            border-color: rgba(255, 255, 255, 0.35);
            background: rgba(255, 255, 255, 0.06);
        }

        .btn-accent {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: #fff;
            box-shadow: 0 8px 22px rgba(102, 126, 234, .35);
        }

        .btn-accent:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 28px rgba(102, 126, 234, .45);
        }

        .torrent-btn {
            padding: 0.5rem 1rem;
            border-radius: 4px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-play {
            background-color: var(--vlc-orange);
            color: white;
        }

        .btn-copy {
            background-color: var(--secondary);
            color: white;
        }

        .btn-play-now {
            background-color: var(--success);
            color: white;
        }

        /* API Key Setup Modal */
        .api-setup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 5000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .api-setup-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .api-setup-content {
            background: var(--modal-bg);
            border-radius: 15px;
            padding: 3rem;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--vlc-orange);
        }

        .api-setup-title {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--vlc-orange);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .api-setup-description {
            color: var(--light);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .api-input-group {
            margin-bottom: 2rem;
        }

        .api-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--tertiary);
            font-weight: 600;
        }

        .api-input {
            width: 100%;
            padding: 1rem;
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background-color: var(--input-bg);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .api-input:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background-color: var(--hover-bg);
        }

        #torrentSourceSelect {
            appearance: none;
            background-image: linear-gradient(45deg, transparent 50%, var(--primary) 50%),
                linear-gradient(135deg, var(--primary) 50%, transparent 50%);
            background-position: calc(100% - 20px) calc(50% - 2px),
                calc(100% - 15px) calc(50% - 2px);
            background-size: 5px 5px, 5px 5px;
            background-repeat: no-repeat;
        }

        #torrentSourceSelect:hover {
            background-color: rgba(255, 255, 255, 0.12);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        #torrentSourceSelect:focus {
            outline: none;
            border-color: var(--primary);
            background-color: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(var(--primary-rgb), 0.2);
        }

        #torrentSourceSelect option {
            background: #1a1a1a;
            color: #fff;
            padding: 0.75rem;
            font-weight: 500;
        }

        /* Theme selector styles */
        #themeSelector {
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        #themeSelector:hover {
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--vlc-orange);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        #themeSelector:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.3);
        }

        #themeSelector option {
            background: var(--primary);
            color: var(--light);
            padding: 1rem;
            font-weight: 500;
            font-size: 1rem;
        }

        #themeSelector option:hover {
            background: var(--secondary);
        }

        .torrent-source-btn {
            position: relative;
            overflow: hidden;
        }

        .torrent-source-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .torrent-source-btn.active {
            background: rgba(76, 175, 80, 0.2) !important;
            border-color: #4CAF50 !important;
            color: #4CAF50 !important;
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.3);
        }

        .torrent-source-btn:not(.active):hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.4);
        }

        .api-setup-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        .api-btn {
            padding: 1rem 2rem;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .api-btn-primary {
            background-color: var(--vlc-orange);
            color: white;
        }

        .api-btn-primary:hover {
            background-color: #e55a00;
            transform: translateY(-4px) scale(1.02);
        }

        /* Debrid provider select styling */
        #debridProvider {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            min-width: 240px;
            max-width: 320px;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.03));
            border: 1px solid rgba(255, 255, 255, 0.18);
            border-radius: 10px;
            padding: 0.55rem 2.25rem 0.55rem 0.85rem;
            color: #e9ecef;
            font-weight: 600;
            letter-spacing: 0.2px;
            cursor: pointer;
            transition: border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M5 7l5 6 5-6' stroke='%23cfd4da' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.6rem center;
            background-size: 12px;
        }

        #debridProvider:hover {
            border-color: rgba(255, 255, 255, 0.28);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.05));
        }

        #debridProvider:focus {
            outline: none;
            border-color: var(--vlc-orange);
            box-shadow: 0 0 0 2px rgba(255, 117, 24, 0.25);
        }

        /* Attempt to style dropdown menu items (supported in Chromium) */
        #debridProvider option {
            background-color: #151a20;
            color: #e9ecef;
        }

        .api-btn-secondary {
            background-color: transparent;
            color: var(--gray);
            border: 2px solid var(--gray);
        }

        .api-btn-secondary:hover {
            color: var(--light);
            border-color: var(--light);
        }

        /* Donate modal removed */

        /* Discord Modal */
        .discord-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            z-index: 6000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .discord-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .discord-content {
            background: linear-gradient(135deg, #5865F2, #4752C4);
            border-radius: 20px;
            padding: 3rem;
            max-width: 520px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(88, 101, 242, 0.4);
            border: 2px solid #7289DA;
            position: relative;
            animation: modalSlideIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes modalSlideIn {
            0% {
                transform: scale(0.85) translateY(-30px);
                opacity: 0;
            }

            50% {
                transform: scale(1.02) translateY(5px);
                opacity: 0.8;
            }

            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .discord-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(0, 0, 0, 0.3);
            border: none;
            color: #fff;
            font-size: 1.5rem;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .discord-close:hover {
            background-color: #ED4245;
            transform: rotate(90deg);
        }

        .discord-title {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            font-weight: 700;
        }

        .discord-logo {
            width: 48px;
            height: 48px;
        }

        .discord-message {
            color: #fff;
            margin-bottom: 2rem;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .discord-join-btn {
            padding: 1rem 2.5rem;
            border-radius: 30px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.1rem;
            background: #fff;
            color: #5865F2;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .discord-join-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        /* Settings Modal */
        .settings-modal {
            position: fixed;
            inset: 0;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 4000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .settings-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .settings-content {
            background: var(--modal-bg);
            border-radius: 15px;
            padding: 2rem;
            max-width: 800px;
            width: min(92%, 800px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid var(--vlc-orange);
            max-height: 85vh;
            overflow: auto;
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .settings-title {
            font-size: 1.8rem;
            color: var(--vlc-orange);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .settings-close {
            background: transparent;
            border: none;
            color: var(--gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            padding: 0.5rem;
        }

        .settings-close:hover {
            color: var(--light);
        }

        .settings-section {
            margin-bottom: 2rem;
        }

        .settings-section h3 {
            color: var(--tertiary);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .source-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-left: 8px;
            background: #6c757d;
            color: #fff;
        }

        .source-badge.debrid {
            background: #198754;
        }

        .source-badge.webtorrent {
            background: #0d6efd;
        }

        .source-badge.direct-stream {
            background: #dc3545;
        }

        .current-api-key {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            color: var(--gray);
            font-family: monospace;
        }

        .settings-buttons {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        /* Floating Navigation Arrow (Old UI Only, Home Page Only) */
        .floating-nav-container {
            position: fixed;
            right: 30px;
            bottom: 30px;
            z-index: 1000;
            display: none;
        }

        .floating-nav-btn {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--vlc-orange) 0%, var(--secondary) 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            box-shadow: 0 8px 20px rgba(168, 85, 247, 0.3);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .floating-nav-btn:hover {
            transform: translateY(-4px) scale(1.02) scale(1.05);
            box-shadow: 0 12px 30px rgba(168, 85, 247, 0.4);
            background: linear-gradient(135deg, var(--tertiary) 0%, var(--vlc-orange) 100%);
        }

        .floating-nav-btn:active {
            transform: translateY(0) scale(0.95);
        }

        .floating-nav-menu {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: rgba(42, 24, 71, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 0.5rem 0;
            min-width: 160px;
            /* Make the menu usable on small screens */
            max-height: calc(100vh - 140px);
            /* leave room for FAB and margins */
            overflow-y: auto;
            overscroll-behavior: contain;
            -webkit-overflow-scrolling: touch;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            opacity: 0;
            transform: translateY(10px) scale(0.95);
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .floating-nav-container.active .floating-nav-menu {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: all;
        }

        .floating-nav-container.active .floating-nav-btn {
            background: linear-gradient(135deg, #6d28d9, #553c9a);
        }

        .floating-nav-container.active #floatingNavIcon {
            transform: rotate(180deg);
        }

        .floating-nav-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            color: #fff;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .floating-nav-item:last-child {
            border-bottom: none;
        }

        .floating-nav-item:hover {
            background: rgba(139, 92, 246, 0.2);
            color: #c084fc;
        }

        .floating-nav-item i {
            width: 16px;
            text-align: center;
            opacity: 0.8;
        }

        .floating-nav-item span {
            font-weight: 500;
            font-size: 0.9rem;
        }

        /* Show floating nav only in old UI on home page */
        body:not(.ui-new) .floating-nav-container.show-on-home {
            display: block;
        }

        /* Hide in new UI */
        body.ui-new .floating-nav-container {
            display: none !important;
        }

        /* Books Page Styles */
        .books-search-section {
            margin-bottom: 2rem;
        }

        .books-search-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .books-search-bar {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.12);
            border-radius: 16px;
            padding: 0.5rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        .books-search-bar:focus-within {
            border-color: rgba(245, 158, 11, 0.5);
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.15);
        }

        .books-search-icon {
            position: absolute;
            left: 1.25rem;
            color: #9ca3af;
            font-size: 1.1rem;
        }

        #books-search-input,
        #music-search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            padding-left: 3rem;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 1.1rem;
            outline: none;
        }

        #books-search-input::placeholder,
        #music-search-input::placeholder {
            color: #9ca3af;
        }

        .books-search-button {
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .books-search-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }

        .books-loading {
            text-align: center;
            padding: 4rem 2rem;
            color: #9ca3af;
        }

        .books-loading-spinner {
            font-size: 3rem;
            margin-bottom: 1.5rem;
            color: #f59e0b;
        }

        .books-empty {
            text-align: center;
            padding: 4rem 2rem;
            color: #9ca3af;
        }

        .books-empty-icon {
            font-size: 4rem;
            margin-bottom: 2rem;
            color: #f59e0b;
        }

        .books-empty h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .books-results {
            animation: fadeIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .books-results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .books-results-header h3 {
            font-size: 1.5rem;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .books-results-count {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .books-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        /* Music (compact) overrides using books classes */
        #music-page .books-results-grid {
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1rem;
        }

        #music-page .books-book-card {
            cursor: default;
        }

        .music-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .music-card:hover {
            transform: translateY(-4px);
            border-color: rgba(236, 72, 153, 0.45);
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.15);
        }

        .music-cover {
            width: 100%;
            aspect-ratio: 1 / 1;
            background: linear-gradient(135deg, #374151, #1f2937);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .music-info {
            padding: 0.75rem 0.85rem;
        }

        .music-title {
            font-size: 0.95rem;
            font-weight: 700;
            color: #fff;
            margin: 0 0 0.25rem 0;
            line-height: 1.25;
        }

        .music-artist {
            font-size: 0.85rem;
            color: #ec4899;
            margin: 0 0 0.5rem 0;
        }

        .music-actions {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .music-play-btn {
            flex: 1;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            padding: 0.5rem 0.75rem;
            background: linear-gradient(135deg, #ec4899, #a855f7);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
        }

        .music-open-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(236, 72, 153, 0.35);
            background: rgba(236, 72, 153, 0.12);
            color: #ec4899;
            cursor: pointer;
        }

        .music-heart-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(236, 72, 153, 0.35);
            background: rgba(236, 72, 153, 0.12);
            color: #ec4899;
            cursor: pointer;
        }

        .music-heart-btn.added {
            border-color: rgba(244, 114, 182, 0.6);
            background: rgba(244, 114, 182, 0.2);
            color: #f472b6;
        }

        .music-plus-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(56, 189, 248, 0.35);
            background: rgba(56, 189, 248, 0.12);
            color: #38bdf8;
            cursor: pointer;
        }

        .music-download-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(34, 197, 94, 0.35);
            background: rgba(34, 197, 94, 0.12);
            color: #22c55e;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .music-download-btn.downloaded {
            border-color: rgba(34, 197, 94, 0.6);
            background: rgba(34, 197, 94, 0.25);
            color: #22c55e;
        }

        .music-download-btn:hover {
            filter: brightness(1.15);
            transform: scale(1.08);
        }

        .music-folder-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(251, 191, 36, 0.35);
            background: rgba(251, 191, 36, 0.12);
            color: #fbbf24;
            cursor: pointer;
        }

        .music-delete-downloaded-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(239, 68, 68, 0.35);
            background: rgba(239, 68, 68, 0.12);
            color: #ef4444;
            cursor: pointer;
        }

        .music-play-btn:hover,
        .music-open-btn:hover,
        .music-heart-btn:hover,
        .music-plus-btn:hover,
        .music-folder-btn:hover,
        .music-delete-downloaded-btn:hover {
            filter: brightness(1.08);
        }

        /* Playlist open view header tweak */
        #music-page.playlist-open .books-results-header h3 i {
            display: none;
        }

        #music-page.playlist-open .books-results-header h3 {
            gap: 0;
        }

        /* Playlists list view buttons */
        .playlist-open-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.6rem;
            border-radius: 8px;
            border: none;
            background: linear-gradient(135deg, #a855f7, #ec4899);
            color: #fff;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .playlist-export-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            padding: 0.35rem 0.6rem;
            border-radius: 8px;
            border: 1px solid rgba(56, 189, 248, 0.35);
            background: rgba(56, 189, 248, 0.12);
            color: #38bdf8;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .playlist-delete-btn {
            width: 32px;
            height: 32px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.45);
            background: rgba(239, 68, 68, 0.12);
            color: #ef4444;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .playlist-open-btn:hover,
        .playlist-export-btn:hover,
        .playlist-delete-btn:hover {
            filter: brightness(1.08);
        }

        /* Close playlist header button */
        .playlist-close-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.45rem;
            padding: 0.5rem 0.8rem;
            border-radius: 10px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            background: rgba(148, 163, 184, 0.12);
            color: #e2e8f0;
            cursor: pointer;
            font-weight: 700;
            margin-left: auto;
        }

        .playlist-close-btn:hover {
            filter: brightness(1.08);
        }

        .music-add-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(16, 185, 129, 0.35);
            background: rgba(16, 185, 129, 0.12);
            color: #10b981;
            cursor: pointer;
        }

        .music-add-btn.added {
            border-color: rgba(34, 197, 94, 0.6);
            background: rgba(34, 197, 94, 0.18);
            color: #22c55e;
        }

        /* Albums UI */
        .album-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(59, 130, 246, 0.18);
            border-radius: 14px;
            overflow: hidden;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .album-card:hover {
            transform: translateY(-3px);
            border-color: rgba(59, 130, 246, 0.35);
            box-shadow: 0 14px 34px rgba(2, 6, 23, 0.45);
        }

        .album-cover {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            background: #111827;
            display: block;
        }

        .album-body {
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .album-title {
            font-weight: 800;
            color: #e5e7eb;
            line-height: 1.2;
        }

        .album-artist {
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .album-meta {
            color: #94a3b8;
            font-size: 0.82rem;
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .album-open-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.45rem 0.75rem;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: #05222e;
            font-weight: 800;
            cursor: pointer;
        }

        .album-open-btn:hover {
            filter: brightness(1.05);
        }

        .album-tracks-list .track-row {
            display: grid;
            grid-template-columns: 32px 1fr 90px 210px;
            gap: 0.75rem;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.14);
            border-radius: 12px;
            padding: 0.5rem 0.6rem;
            transition: background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .track-row:hover {
            background: rgba(255, 255, 255, 0.07);
            border-color: rgba(59, 130, 246, 0.25);
        }

        .track-index {
            color: #94a3b8;
            font-weight: 700;
            text-align: center;
        }

        .track-title {
            color: #e5e7eb;
            font-weight: 700;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .track-duration {
            color: #94a3b8;
            text-align: right;
            font-variant-numeric: tabular-nums;
        }

        .track-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.4rem;
            flex-wrap: wrap;
        }

        .track-play-btn,
        .track-plus-btn,
        .track-heart-btn,
        .track-download-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            border-radius: 10px;
            cursor: pointer;
            padding: 0.4rem 0.65rem;
            font-size: 0.8rem;
            font-weight: 800;
            border: 1px solid rgba(148, 163, 184, 0.25);
            background: linear-gradient(135deg, rgba(51, 65, 85, 0.8), rgba(15, 23, 42, 0.6));
            color: #e5e7eb;
            transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), border-color 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .track-play-btn:hover,
        .track-plus-btn:hover,
        .track-heart-btn:hover,
        .track-download-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 22px rgba(2, 6, 23, 0.35);
            border-color: rgba(148, 163, 184, 0.4);
        }

        .track-play-btn {
            background: linear-gradient(135deg, #34d399, #10b981);
            color: #052e2b;
            border: none;
        }

        .track-plus-btn {
            background: linear-gradient(135deg, #c4b5fd, #a78bfa);
            color: #1e1b4b;
            border: none;
        }

        .track-heart-btn {
            background: linear-gradient(135deg, #fda4af, #fb7185);
            color: #4c0519;
            border: none;
        }

        .track-download-btn {
            background: linear-gradient(135deg, #38bdf8, #0ea5e9);
            color: #082f49;
            border: none;
        }

        .track-download-btn.downloaded {
            background: linear-gradient(135deg, #10b981, #059669);
            color: #052e2b;
            cursor: default;
            opacity: 0.7;
        }

        .track-download-btn.downloaded:hover {
            transform: none;
            box-shadow: none;
        }

        .album-empty {
            color: #94a3b8;
            text-align: center;
            padding: 1rem 0;
        }

        /* My Albums heart button */
        .album-heart-btn {
            width: 38px;
            height: 38px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            border: 1px solid rgba(236, 72, 153, 0.35);
            background: rgba(236, 72, 153, 0.12);
            color: #ec4899;
            cursor: pointer;
            transition: filter 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .album-heart-btn.added {
            border-color: rgba(236, 72, 153, 0.6);
            background: rgba(236, 72, 153, 0.2);
            color: #f472b6;
        }

        .album-heart-btn:hover {
            filter: brightness(1.08);
        }

        .books-book-card {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }

        .books-book-card:hover {
            transform: translateY(-5px);
            border-color: rgba(245, 158, 11, 0.4);
            box-shadow: 0 10px 40px rgba(245, 158, 11, 0.15);
        }

        .books-book-cover {
            position: relative;
            width: 100%;
            height: 200px;
            overflow: hidden;
            background: linear-gradient(135deg, #374151, #1f2937);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .books-book-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .books-book-card:hover .books-book-cover img {
            transform: scale(1.08);
        }

        .books-book-cover-placeholder {
            font-size: 3rem;
            color: #9ca3af;
        }

        .books-book-format {
            position: absolute;
            top: 0.75rem;
            right: 0.75rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: #fff;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .books-book-info {
            padding: 1.5rem;
        }

        .books-book-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
            line-height: 1.4;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .books-book-author {
            color: #9ca3af;
            font-size: 0.95rem;
            margin-bottom: 0.75rem;
        }

        .books-book-year {
            display: inline-block;
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .books-book-actions {
            display: flex;
            gap: 0.75rem;
        }

        .books-read-btn {
            flex: 1;
            padding: 0.75rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .books-read-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.3);
        }

        /* Ensure Library "Read" buttons look styled as well */
        .read-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            background: linear-gradient(135deg, #f59e0b, #d97706);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            box-shadow: 0 4px 14px rgba(245, 158, 11, 0.25);
        }

        .read-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 22px rgba(245, 158, 11, 0.35);
        }

        .read-btn:active {
            transform: translateY(0);
        }

        .books-download-btn {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #9ca3af;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .books-download-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            color: #fff;
        }

        /* Books Reader Modal */
        .books-reader-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.98);
            z-index: 9999;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .books-reader-content {
            width: 100%;
            height: 100%;
            max-width: none;
            max-height: none;
            display: flex;
            flex-direction: column;
            background: var(--dark);
            overflow: hidden;
        }

        /* Music player modal gets constrained size */
        #music-player-modal .books-reader-content {
            width: 90%;
            max-width: 560px;
            height: auto;
            max-height: 90vh;
        }

        .books-reader-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            background: var(--primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            min-height: 70px;
        }

        .books-reader-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .books-reader-back-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(-2px);
        }

        .books-reader-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .books-reader-frame-container {
            flex: 1;
            width: 100%;
            height: calc(100vh - 70px);
            position: relative;
            background: #fff;
            overflow: hidden;
        }

        .books-reader-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: #fff;
            display: block;
        }

        /* Ensure no body scroll when reader is open */
        body.books-reader-open {
            overflow: hidden;
        }

        /* IPTV Source Selector */
        .iptv-source-selector {
            background: #1a0f2e;
            padding: 15px 20px;
            border-bottom: 1px solid #2d1b4e;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .iptv-source-label {
            color: #a78bfa;
            font-size: 14px;
            font-weight: 600;
            min-width: 80px;
        }

        .iptv-source-dropdown {
            background: #2d1b4e;
            border: 1px solid #4c1d95;
            border-radius: 8px;
            color: #e5e7eb;
            padding: 8px 12px;
            font-size: 14px;
            min-width: 300px;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .iptv-source-dropdown:hover {
            border-color: #7c3aed;
            background: #362159;
        }

        .iptv-source-dropdown:focus {
            outline: none;
            border-color: #a78bfa;
            box-shadow: 0 0 0 3px rgba(167, 139, 250, 0.1);
        }

        .iptv-source-dropdown option {
            background: #2d1b4e;
            color: #e5e7eb;
            padding: 8px 12px;
            border: none;
        }

        .iptv-source-dropdown option:hover {
            background: #4c1d95;
        }

        .iptv-source-dropdown option:selected {
            background: #7c3aed;
            color: #ffffff;
        }

        /* Server Selection Modal */
        .server-selection-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            /* Match page background instead of pure black overlay */
            background: var(--dark);
            z-index: 9998;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        .server-selection-content {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: var(--dark);
            overflow: visible;
        }

        .server-selection-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 2rem;
            background: var(--primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            min-height: 70px;
        }

        .server-selection-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .server-selection-back-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(-2px);
        }

        .server-selection-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .server-selection-body {
            flex: 1;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
            /* Make the server selection (and embedded iframe) a bit wider */
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .server-selection-info {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .media-info {
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
        }

        .media-poster {
            width: 120px;
            height: 180px;
            border-radius: 12px;
            object-fit: cover;
            background: linear-gradient(135deg, #374151, #1f2937);
        }

        .media-details {
            flex: 1;
        }

        .media-details h4 {
            font-size: 1.5rem;
            color: #fff;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .media-details p {
            color: #9ca3af;
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .media-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .media-year {
            background: rgba(168, 85, 247, 0.2);
            color: #a855f7;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .media-rating {
            background: rgba(245, 158, 11, 0.2);
            color: #f59e0b;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .server-dropdown-section {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 2rem;
        }

        .server-dropdown-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #fff;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .server-dropdown-container {
            position: relative;
        }

        .server-dropdown {
            width: 100%;
            padding: 1rem 1.5rem;
            padding-right: 4.5rem;
            /* extra space so custom chevron never overlaps scrollbar */
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            appearance: none;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 200px;
            overflow-y: auto;
            /* Make the dropdown scrollbar easier to see */
            scrollbar-width: thin;
            /* Firefox */
            scrollbar-color: #22d3ee rgba(255, 255, 255, 0.12);
            /* thumb color | track color */
            scrollbar-gutter: stable both-edges;
            /* reserve space for scrollbar (Chromium/Firefox) */
        }

        /* WebKit-based scrollbars (Chromium/Electron) */
        .server-dropdown::-webkit-scrollbar {
            width: 14px;
            /* thicker for visibility */
        }

        .server-dropdown::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.5);
            /* darker track for contrast */
            border-radius: 8px;
        }

        .server-dropdown::-webkit-scrollbar-thumb {
            background: #22d3ee;
            /* bright cyan for high contrast */
            border-radius: 8px;
            border: 2px solid rgba(255, 255, 255, 0.15);
        }

        .server-dropdown::-webkit-scrollbar-thumb:hover {
            background: #06b6d4;
        }

        .server-dropdown option {
            background: var(--dark);
            color: #fff;
            padding: 0.5rem;
        }

        .server-dropdown:focus {
            outline: none;
            border-color: rgba(168, 85, 247, 0.5);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.15);
        }

        .server-dropdown option {
            background: var(--primary);
            color: #fff;
            padding: 1rem;
            font-weight: 500;
        }

        .server-dropdown-arrow {
            position: absolute;
            right: 2.5rem;
            /* shift left so it never covers the scrollbar */
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            pointer-events: none;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .server-dropdown:focus+.server-dropdown-arrow {
            transform: translateY(-50%) rotate(180deg);
        }

        .server-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .server-watch-btn {
            flex: 1;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-width: 200px;
        }

        .server-watch-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.3);
        }

        .server-torrent-btn {
            padding: 1rem 2rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #9ca3af;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            min-width: 180px;
        }

        .server-torrent-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            color: #fff;
        }

        /* Embedded Video Player Section */
        .server-video-section {
            margin-top: 2rem;
            background: var(--dark);
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-video-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            background: var(--dark);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .server-video-header h4 {
            color: #fff;
            margin: 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .server-video-close {
            background: none;
            border: none;
            color: #fff;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .server-video-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #e50914;
        }

        .server-video-container {
            position: relative;
            width: 100%;
            /* Make the embedded server player noticeably larger and responsive */
            height: 70vh;
            min-height: 480px;
            /* Match the app background so the area under the iframe blends in */
            background: var(--dark);
        }

        .server-video-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .server-video-controls {
            padding: 1rem 1.5rem;
            background: var(--dark);
            display: flex;
            justify-content: center;
            gap: 1rem;
        }

        /* Video Player Modal */
        .video-player-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.98);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .video-player-content {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: var(--dark);
            overflow: hidden;
        }

        .video-player-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
            background: var(--primary);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-shrink: 0;
            min-height: 70px;
        }

        .video-player-back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.25rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .video-player-back-btn:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateX(-2px);
        }

        .video-player-title {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 600;
            flex: 1;
            margin: 0 2rem;
        }

        .video-player-controls {
            display: flex;
            gap: 0.5rem;
        }

        .video-player-control-btn {
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .video-player-control-btn:hover {
            background: rgba(255, 255, 255, 0.12);
        }

        .video-player-frame-container {
            flex: 1;
            width: 100%;
            height: calc(100vh - 70px);
            position: relative;
            background: #000;
            overflow: hidden;
        }

        .video-player-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: #000;
            display: block;
        }

        /* Prevent body scroll when modals are open */
        body.server-modal-open,
        body.video-modal-open {
            overflow: hidden;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }

            60% {
                opacity: 0.8;
                transform: translateY(-5px) scale(1.01);
            }

            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* BookTorrio Page Styles */
        .booktorrio-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }

        /* EPUB Reader Styles */
        #epubReaderOverlay {
            position: fixed;
            inset: 0;
            background: var(--bg);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            /* Solid bar theming variables (no transparency) */
            --bar-bg: #202225;
            /* solid by default (dark) */
            --bar-border: rgba(255, 255, 255, 0.1);
            --bar-btn-bg: #2b2b2b;
            /* dark default */
            --bar-btn-border: #3a3a3a;
            --bar-input-bg: #1f1f1f;
            --bar-input-border: #3a3a3a;
        }

        /* Light theme overrides */
        #epubReaderOverlay.theme-light {
            --bar-bg: #ffffff;
            --bar-border: rgba(0, 0, 0, 0.08);
            --bar-btn-bg: #f3f4f6;
            /* slate-100 */
            --bar-btn-border: #e5e7eb;
            /* slate-200 */
            --bar-input-bg: #ffffff;
            --bar-input-border: #e5e7eb;
        }

        /* Night theme overrides */
        #epubReaderOverlay.theme-night {
            --bar-bg: #000000;
            --bar-border: rgba(255, 255, 255, 0.12);
            --bar-btn-bg: #111111;
            --bar-btn-border: #262626;
            --bar-input-bg: #0b0b0b;
            --bar-input-border: #262626;
        }

        .reader-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background-color: var(--bar-bg) !important;
            /* Solid header bar, no transparency */
            backdrop-filter: none;
            border-bottom: 1px solid var(--bar-border);
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.22);
            position: sticky;
            top: 0;
            z-index: 2100;
        }

        .reader-esc-hint {
            color: var(--text);
            font-size: 0.85rem;
            white-space: nowrap;
            /* Make the hint itself solid (no transparency) */
            background: var(--bar-btn-bg);
            border: 1px solid var(--bar-btn-border);
            padding: 0.35rem 0.6rem;
            border-radius: 6px;
        }

        .reader-title {
            text-align: center;
            color: var(--text);
            font-weight: 600;
            flex: 1;
        }

        #readerContainer {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Bottom navigation bar */
        .reader-footer {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background-color: var(--bar-bg) !important;
            /* Solid footer bar, no transparency */
            backdrop-filter: none;
            border-top: 1px solid var(--bar-border);
            box-shadow: 0 -2px 6px rgba(0, 0, 0, 0.22);
            position: sticky;
            bottom: 0;
            z-index: 2100;
        }

        .reader-nav-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex: 1;
            justify-content: center;
        }

        .reader-chapter-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text);
        }

        .reader-chapter-controls .chapter-count-label {
            font-size: 0.9rem;
            opacity: 0.8;
            white-space: nowrap;
        }

        .reader-chapter-controls input[type="number"] {
            width: 84px;
            height: 36px;
            padding: 0 0.5rem;
            border-radius: 6px;
            border: 1px solid var(--bar-input-border);
            background: var(--bar-input-bg);
            color: var(--text);
            outline: none;
        }

        .reader-chapter-controls input[type="number"]::placeholder {
            color: rgba(255, 255, 255, 0.55);
        }

        .reader-nav-btn,
        .reader-gear,
        .reader-back-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 44px;
            height: 44px;
            padding: 0 1rem;
            border-radius: 8px;
            border: 1px solid var(--bar-btn-border);
            background: var(--bar-btn-bg);
            color: var(--text);
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .reader-nav-btn {
            min-width: 44px;
            padding: 0;
        }

        .reader-nav-btn:hover:not(:disabled),
        .reader-gear:hover,
        .reader-back-btn:hover {
            background: #6d28d9;
            /* solid purple on hover */
            border-color: #7c3aed;
            color: #fff;
            transform: translateY(-4px) scale(1.02);
        }

        .reader-back-btn:hover {
            background: #dc2626;
            /* solid red for back hover */
            border-color: #ef4444;
            color: #fff;
        }

        .reader-nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .reader-settings {
            position: fixed;
            bottom: 60px;
            /* above footer */
            right: 0;
            width: 320px;
            max-height: 400px;
            background: var(--bg);
            color: #eee;
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px 0 0 0;
            transform: translateX(0);
            transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
            padding: 1rem;
            z-index: 2050;
        }

        .reader-settings.hidden {
            transform: translateX(100%);
        }

        .settings-section {
            margin-bottom: 1rem;
        }

        .settings-row {
            display: flex;
            gap: 0.5rem;
        }

        .theme-btn {
            padding: 0.5rem 0.75rem;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.06);
            color: #eee;
            cursor: pointer;
        }

        /* Themes for overlay container */
        .theme-light {
            --bg: #ffffff;
            --text: #111111;
        }

        .theme-dark {
            --bg: #202225;
            --text: #f2f2f2;
        }

        .theme-night {
            --bg: #000000;
            --text: #e5e7eb;
        }

        .booktorrio-tab-btn {
            padding: 1rem 2rem;
            border-radius: 12px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(42, 24, 71, 0.4);
            color: var(--light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
        }

        .booktorrio-tab-btn:hover {
            border-color: #06b6d4;
            background: rgba(6, 182, 212, 0.1);
        }

        .booktorrio-tab-btn.active {
            border-color: #06b6d4;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
        }

        .booktorrio-tab {
            display: block;
        }

        .search-container-books {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        .search-input-books {
            flex: 1;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(42, 24, 71, 0.4);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            backdrop-filter: blur(10px);
        }

        .search-input-books:focus {
            outline: none;
            border-color: var(--vlc-orange);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.2);
        }

        .search-btn-books {
            padding: 1rem 2rem;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-btn-books:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
        }

        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .book-card {
            background: rgba(42, 24, 71, 0.4);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            backdrop-filter: blur(15px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .book-card:hover {
            transform: translateY(-4px);
            border-color: #06b6d4;
            box-shadow: 0 8px 25px rgba(6, 182, 212, 0.2);
        }

        .book-cover-container {
            position: relative;
            width: 100%;
            margin-bottom: 1rem;
        }

        .book-cover {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 12px;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            display: block;
        }

        .playtorrio-logo {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 50%;
            height: 50%;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2px;
            border-radius: 0 0 12px 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            backdrop-filter: blur(10px);
            border-left: 2px solid rgba(139, 92, 246, 0.5);
            border-top: 2px solid rgba(139, 92, 246, 0.5);
            box-shadow:
                0 -2px 15px rgba(139, 92, 246, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 10;
            pointer-events: none;
            overflow: hidden;
        }

        .playtorrio-logo::before {
            content: '';
            font-size: 1.8rem;
            color: #8b5cf6;
            filter: drop-shadow(0 2px 6px rgba(139, 92, 246, 0.8));
            animation: pulse 2s ease-in-out infinite;
            margin-bottom: 2px;
        }

        .playtorrio-logo::after {
            content: 'AUDIOBOOK';
            font-size: 0.65rem;
            font-weight: 600;
            letter-spacing: 2.5px;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
            border-top: 1px solid rgba(139, 92, 246, 0.3);
            padding-top: 4px;
            width: 90%;
            text-align: center;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.1);
                opacity: 0.8;
            }
        }

        .book-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--light);
            margin-bottom: 0.5rem;
            line-height: 1.3;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .book-author {
            color: #06b6d4;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .book-details {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .book-tag {
            background: rgba(6, 182, 212, 0.2);
            color: #06b6d4;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .book-tag.epub-highlight {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border-color: #10b981;
        }

        .download-btn {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 12px;
            border: none;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .download-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
        }

        .search-placeholder {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem;
            color: var(--gray);
        }

        .search-placeholder h3 {
            color: var(--light);
            margin-bottom: 0.5rem;
        }

        /* Spinner for loading */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(6, 182, 212, 0.3);
            border-left-color: #06b6d4;
            border-radius: 50%;
            animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;
            margin: 0 auto 1rem;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* EPUB Download Modal Styles */
        .epub-download-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .epub-modal-content {
            background: linear-gradient(135deg, var(--primary) 0%, #1a0d2e 100%);
            border-radius: 16px;
            border: 1px solid rgba(168, 85, 247, 0.3);
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .epub-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
        }

        .epub-modal-header h3 {
            color: var(--light);
            margin: 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .epub-modal-close {
            background: none;
            border: none;
            color: var(--gray);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .epub-modal-close:hover {
            background: rgba(168, 85, 247, 0.2);
            color: var(--light);
        }

        .epub-modal-body {
            padding: 1.5rem;
        }

        .epub-download-instruction {
            margin-bottom: 1.5rem;
        }

        .epub-download-instruction p {
            color: var(--light);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .epub-path-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid rgba(168, 85, 247, 0.2);
            margin-bottom: 1rem;
        }

        .epub-path-container code {
            flex: 1;
            color: #06b6d4;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            word-break: break-all;
        }

        .copy-path-btn {
            background: rgba(6, 182, 212, 0.2);
            border: 1px solid #06b6d4;
            color: #06b6d4;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .copy-path-btn:hover {
            background: #06b6d4;
            color: white;
        }

        .epub-note {
            font-size: 0.9rem;
            color: var(--gray);
            font-style: italic;
        }

        .epub-modal-actions {
            display: flex;
            justify-content: center;
        }

        .epub-download-btn {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .epub-download-btn:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 20px rgba(6, 182, 212, 0.4);
        }

        /* VLC Player Styles */
        .vlc-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--vlc-dark);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Prevent any child from increasing the viewport height */
            overflow: hidden;
        }

        .vlc-player-container.active {
            opacity: 1;
            pointer-events: all;
        }

        .vlc-player-header {
            background-color: rgba(0, 0, 0, 0.8);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--vlc-orange);
            position: sticky;
            top: 0;
            z-index: 2100;
        }

        .vlc-player-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            position: relative;
            z-index: 2101;
        }

        .vlc-player-close {
            background: var(--vlc-orange);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            position: relative;
            z-index: 2102;
            pointer-events: auto;
        }

        .vlc-player-close:hover {
            background: #e55a00;
        }

        .vlc-player-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--vlc-dark);
            /* Allow inner flex children to shrink within viewport */
            min-height: 0;
            min-width: 0;
            position: relative;
            z-index: 1;
        }

        .file-selector {
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem 2rem;
            border-bottom: 1px solid #444;
            position: relative;
            z-index: 1;
        }

        .file-selector h3 {
            color: var(--vlc-orange);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .file-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            max-height: 400px;
            overflow-y: auto;
        }

        /* MPV controls layout and spacing */
        #mpvControls {
            display: flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem 0 1.25rem;
            position: relative;
            z-index: 0;
        }

        #mpvControls .vlc-btn {
            width: auto;
        }

        .file-item {
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
        }

        .file-item:hover {
            background: rgba(255, 105, 0, 0.2);
            border-color: var(--vlc-orange);
        }

        .file-name {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: white;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 0.9rem;
        }

        .file-name-tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--dark);
            color: var(--light);
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
            white-space: normal;
            width: max-content;
            max-width: 300px;
            text-align: center;
            z-index: 10;
            pointer-events: none;
        }

        .file-size {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .vlc-player-area {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
            position: relative;
            /* Ensure contained media never pushes layout */
            min-height: 0;
            min-width: 0;
            overflow: hidden;
            z-index: 1;
        }

        .vlc-loading {
            color: var(--vlc-orange);
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            position: relative;
            z-index: 2;
            pointer-events: none;
        }

        .vlc-loading i {
            animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;
        }

        /* Base button styles for MPV/WCJS action buttons */
        .vlc-btn {
            background: var(--vlc-orange);
            border: none;
            color: white;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 2rem 2rem 1rem;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 3;
        }

        .vlc-btn:hover {
            background: #e55a00;
            transform: translateY(-4px) scale(1.02);
        }

        .vlc-btn.secondary {
            background: var(--secondary);
        }

        .vlc-btn.secondary:hover {
            background: #0199c7;
        }

        .subtitle-controls {
            background: rgba(0, 0, 0, 0.5);
            padding: 1rem 2rem;
            flex-direction: column;
            position: relative;
            z-index: 0;
        }

        .subtitle-controls h4 {
            color: var(--vlc-orange);
            margin-bottom: 1rem;
        }

        .subtitle-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1rem;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 1rem;
            /* For scrollbar */
        }

        .subtitle-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .subtitle-item:hover {
            background: rgba(255, 105, 0, 0.2);
            border-color: var(--vlc-orange);
        }

        .subtitle-item.selected {
            border-color: var(--success);
            background-color: rgba(40, 167, 69, 0.2);
        }

        .subtitle-lang {
            font-weight: 600;
            color: white;
            flex-grow: 1;
        }

        /* Custom Video Player Styles */
        .custom-player-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 3000;
            display: flex;
            flex-direction: column;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            /* Lock overlay to viewport */
            overflow: hidden;
        }

        .custom-player-container.active {
            opacity: 1;
            pointer-events: all;
        }

        .player-header {
            background: none;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: none;
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            z-index: 5;
        }

        .player-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .player-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .subtitle-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }

        .subtitle-upload input[type="file"] {
            position: absolute;
            left: -9999px;
        }

        .upload-btn {
            background: var(--secondary);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .upload-btn:hover {
            background: #0199c7;
            transform: translateY(-1px);
        }

        .close-player-btn {
            background: var(--danger);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .close-player-btn:hover {
            background: #c82333;
            transform: translateY(-1px);
        }

        .video-container {
            flex: 1;
            position: relative;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Critical for flex children so they don't overflow the viewport */
            min-height: 0;
            min-width: 0;
            overflow: hidden;
        }

        .custom-video {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* Always fit inside container */
            /* Ensure the video stays beneath overlays */
            z-index: 1;
        }

        /* Video.js subtitle positioning and styling */
        .video-js .vjs-text-track-display {
            bottom: 8em !important;
            pointer-events: none;
        }

        .video-js .vjs-text-track-cue {
            pointer-events: auto;
        }

        /* Hide Video.js error messages */
        .video-js .vjs-error-display,
        .video-js .vjs-modal-dialog {
            display: none !important;
        }

        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 2rem 2rem 1rem;
            /* Always visible to avoid being pushed off-screen */
            transform: translateY(0);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 2;
        }

        /* Auto-hide behavior scoped to custom player only */
        .custom-player-container .video-controls {
            transform: translateY(100%);
            opacity: 0;
            pointer-events: none;
        }

        .custom-player-container .video-container.show-controls .video-controls,
        .custom-player-container .video-controls.force-visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        /* Hide player header (title and close button) when controls are hidden */
        .custom-player-container .player-header {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .custom-player-container.show-controls .player-header,
        .custom-player-container .player-header.force-visible {
            transform: translateY(0);
            opacity: 1;
            pointer-events: auto;
        }

        /* Hide cursor when controls are hidden */
        .custom-player-container:not(.show-controls) {
            cursor: none;
        }

        .custom-player-container:not(.show-controls) * {
            cursor: none;
        }

        .progress-container {
            margin-bottom: 1rem;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }

        .progress-filled {
            height: 100%;
            background: var(--vlc-orange);
            border-radius: 3px;
            width: 0%;
            transition: width 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .progress-time {
            display: flex;
            justify-content: space-between;
            color: white;
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .control-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        .control-left,
        .control-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.8rem;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            width: 50px;
            height: 50px;
        }

        .control-btn:hover {
            background: var(--vlc-orange);
            transform: scale(1.12);
        }

        .control-btn.play-pause {
            background: var(--vlc-orange);
            font-size: 1.5rem;
            width: 60px;
            height: 60px;
        }

        .control-btn.play-pause:hover {
            background: #e55a00;
        }

        .fullscreen-btn {
            position: absolute;
            right: 1rem;
            bottom: 1rem;
        }

        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--vlc-orange);
            font-size: 1.5rem;
            z-index: 2;
            /* below controls, above video */
        }

        .subtitle-display {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            font-size: 1.1rem;
            font-weight: 500;
            text-align: center;
            max-width: 80%;
            display: none;
        }

        .notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, rgba(40, 40, 40, 0.95) 0%, rgba(30, 30, 30, 0.95) 100%);
            color: var(--text-primary);
            padding: 1.25rem 1.75rem;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 10000;
            transform: translateY(-100px);
            opacity: 0;
            transition: all 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-width: 400px;
            min-width: 300px;
            font-weight: 500;
            font-size: 0.95rem;
            line-height: 1.4;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            /* Allow clicks to pass through so it never blocks UI like the music search bar */
            pointer-events: none;
        }

        .notification.success {
            border-left: 4px solid #22c55e;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.success::before {
            content: '';
            color: #22c55e;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .notification.error {
            border-left: 4px solid #ef4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.error::before {
            content: '';
            color: #ef4444;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .notification.info {
            border-left: 4px solid #3b82f6;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.info::before {
            content: '';
            color: #3b82f6;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .notification.warning {
            border-left: 4px solid #f59e0b;
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.15) 0%, rgba(40, 40, 40, 0.95) 100%);
        }

        .notification.warning::before {
            content: '';
            color: #f59e0b;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        /* Subtitles menu panel */
        .subs-panel {
            position: absolute;
            right: 1rem;
            bottom: 6rem;
            width: 340px;
            max-height: 40vh;
            overflow: auto;
            background: rgba(0, 0, 0, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            padding: 0.5rem;
            display: none;
            z-index: 10;
        }

        .subs-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.06);
            color: #fff;
            padding: 0.5rem 0.6rem;
            border-radius: 6px;
            margin: 0.35rem 0;
            cursor: pointer;
        }

        .subs-item:hover {
            background: rgba(168, 85, 247, 0.25);
        }

        .subs-badge {
            font-size: 0.75rem;
            color: #ccc;
        }

        .subs-source {
            font-size: 0.75rem;
            opacity: 0.8;
            margin-left: 0.4rem;
        }

        .row-spread {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
        }

        .subs-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            color: #fff;
            margin-bottom: 0.25rem;
        }

        .subs-help {
            color: #bbb;
            font-size: 0.8rem;
            margin-bottom: 0.25rem;
        }

        .menu-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .menu-refresh {
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: #fff;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            cursor: pointer;
        }

        /* Subtitle Upload and Customization Styles */
        .subs-upload {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.06);
            padding: 0.5rem;
            border-radius: 6px;
        }

        .subs-upload-btn {
            background: var(--vlc-orange);
            color: #fff;
            border: none;
            padding: 0.45rem 0.75rem;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-weight: 600;
            justify-content: center;
            font-size: 0.85rem;
        }

        .subs-upload-btn:hover {
            background: #e55a00;
        }

        .subs-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.12);
            margin: 0.6rem 0;
        }

        .subs-settings {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin: 0.5rem 0;
        }

        .subs-setting-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            color: #eee;
        }

        .subs-setting-row label {
            flex: 0 0 85px;
        }

        .subs-setting-row input[type="range"] {
            flex: 1;
        }

        .subs-setting-row input[type="color"] {
            width: 42px;
            height: 28px;
            border: none;
            padding: 0;
            background: none;
            cursor: pointer;
        }

        .subs-setting-row select {
            flex: 1;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            background: rgba(255, 255, 255, 0.08);
            color: #fff;
            font-size: 0.85rem;
            font-weight: 500;
            cursor: pointer;
        }

        .subs-setting-row select option {
            background: #1a1a1a;
            color: #fff;
        }

        .subs-setting-value {
            min-width: 46px;
            text-align: right;
            color: #bbb;
            font-size: 0.75rem;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* ===== TRAKT PAGE STYLES ===== */
        .trakt-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .trakt-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 8px 32px rgba(237, 28, 36, 0.2);
            border-color: rgba(237, 28, 36, 0.3);
        }

        .trakt-card-header {
            padding: 1.5rem 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background: linear-gradient(90deg, rgba(237, 28, 36, 0.1) 0%, transparent 100%);
        }

        .trakt-card-header h3 {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .trakt-card-header i {
            color: #ed1c24;
            font-size: 1.1rem;
        }

        .trakt-card-body {
            padding: 2rem;
        }

        .trakt-status-card {
            border: 2px solid rgba(237, 28, 36, 0.3);
        }

        .trakt-status-section {
            text-align: center;
        }

        .trakt-status-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .trakt-status-indicator.connected {
            color: #22c55e;
        }

        .trakt-status-indicator.disconnected {
            color: #ef4444;
        }

        .trakt-status-indicator i {
            font-size: 1.3rem;
        }

        .trakt-description {
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .trakt-btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .trakt-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .trakt-btn-primary {
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            color: white;
        }

        .trakt-btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #d41920 0%, #b8161c 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(237, 28, 36, 0.4);
        }

        .trakt-btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .trakt-btn-secondary:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .trakt-btn-info {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
        }

        .trakt-btn-info:hover:not(:disabled) {
            background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
        }

        .trakt-user-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Device Code Panel */
        .trakt-device-code {
            margin-top: 2rem;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            border: 1px solid rgba(237, 28, 36, 0.2);
        }

        .trakt-code-header h4 {
            margin: 0 0 1.5rem 0;
            color: var(--text-primary);
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .trakt-code-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .trakt-code-display {
            text-align: center;
        }

        .trakt-code-display label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .trakt-code-value {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .trakt-code-value span {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 1.5rem;
            font-weight: 800;
            background: rgba(255, 255, 255, 0.1);
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            border: 2px solid rgba(237, 28, 36, 0.3);
            color: #ed1c24;
            letter-spacing: 0.2em;
        }

        .trakt-copy-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text-primary);
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-copy-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .trakt-verify-section {
            text-align: center;
        }

        .trakt-verify-section p {
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .trakt-verify-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .trakt-status-message {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #ed1c24;
        }

        .trakt-status-message span {
            color: var(--text-secondary);
            font-style: italic;
        }

        /* Actions Grid */
        .trakt-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .trakt-action-card {
            cursor: pointer;
            padding: 2rem;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }

        .trakt-action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ed1c24 0%, #d41920 100%);
            transform: scaleX(0);
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-action-card:hover::before {
            transform: scaleX(1);
        }

        .trakt-action-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(237, 28, 36, 0.15);
        }

        .trakt-action-icon {
            margin-bottom: 1rem;
        }

        .trakt-action-icon i {
            font-size: 2.5rem;
            color: #ed1c24;
        }

        .trakt-action-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .trakt-action-content p {
            margin: 0 0 1rem 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .trakt-action-count {
            display: inline-block;
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .trakt-action-badge {
            display: inline-block;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Settings Grid */
        .trakt-settings-grid {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .trakt-setting-item {
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .trakt-setting-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(237, 28, 36, 0.3);
        }

        .trakt-setting-main {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .trakt-setting-content h4 {
            margin: 0 0 0.25rem 0;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .trakt-setting-content p {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Custom Toggle Switch */
        .trakt-toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            flex-shrink: 0;
        }

        .trakt-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .trakt-toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .trakt-toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-radius: 50%;
        }

        .trakt-toggle input:checked+.trakt-toggle-slider {
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            border-color: #ed1c24;
        }

        .trakt-toggle input:checked+.trakt-toggle-slider:before {
            transform: translateX(26px);
        }

        /* Activity List */
        .trakt-activity-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .trakt-activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 4px solid #ed1c24;
        }

        .trakt-activity-icon {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #ed1c24 0%, #d41920 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .trakt-activity-content {
            flex: 1;
        }

        .trakt-activity-title {
            margin: 0 0 0.25rem 0;
            color: var(--text-primary);
            font-weight: 600;
            font-size: 0.95rem;
        }

        .trakt-activity-meta {
            margin: 0;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .trakt-container {
                padding: 1rem;
                gap: 1.5rem;
            }

            .trakt-card-body {
                padding: 1.5rem;
            }

            .trakt-actions-grid {
                grid-template-columns: 1fr;
            }

            .trakt-verify-actions {
                flex-direction: column;
                align-items: center;
            }

            .trakt-user-actions {
                flex-direction: column;
                align-items: center;
            }

            .trakt-setting-main {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
        }

        /* ===== END TRAKT PAGE STYLES ===== */

        .error-message {
            background-color: var(--danger);
            color: white;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Genres pages styles */
        .genre-card {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 120px;
            text-align: center;
        }

        .genre-title {
            color: var(--light);
            font-size: 1.2rem;
        }

        .genre-chip {
            display: inline-block;
            margin-top: 0.5rem;
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            background: rgba(255, 255, 255, 0.1);
            color: var(--tertiary);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .genre-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .genre-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .toggle-btn {
            padding: 0.5rem 1rem;
            border-radius: 30px;
            border: 2px solid var(--vlc-orange);
            background: transparent;
            color: var(--vlc-orange);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .toggle-btn.active {
            background: var(--vlc-orange);
            color: #fff;
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }

            .search-container {
                margin: 1rem 0;
                width: 100%;
            }

            .user-actions {
                gap: 0.5rem;
                flex-wrap: nowrap;
                /* Keep on same line */
            }

            .user-actions .btn {
                padding: 0.5rem 0.75rem;
                font-size: 0.8rem;
                min-height: 34px;
            }

            .user-actions .btn i {
                font-size: 0.85rem;
            }

            /* Hide text on very small screens, show icons only */
            @media (max-width: 600px) {
                .user-actions {
                    gap: 0.4rem;
                }

                .user-actions .btn span {
                    display: none;
                }

                .user-actions .btn {
                    padding: 0.5rem;
                    justify-content: center;
                    min-height: 32px;
                    font-size: 0.9rem;
                }
            }

            .modal-header-content {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .modal-poster {
                width: 150px;
                height: 225px;
            }

            .modal-title {
                font-size: 1.8rem;
            }

            .file-list {
                grid-template-columns: 1fr;
            }

            .video-controls {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .vlc-btn {
                /* mobile sizing override only */
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }

            .player-header {
                z-index: 3;
                padding: 0.5rem 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .player-actions {
                flex-wrap: wrap;
                gap: 0.5rem;
            }

            .control-buttons {
                gap: 0.5rem;
            }

            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }

            .control-btn.play-pause {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
            }

            .api-setup-content {
                padding: 2rem;
            }

            .api-setup-buttons {
                flex-direction: column;
            }

            .settings-content {
                padding: 1.5rem;
            }

            .settings-buttons {
                flex-direction: column;
            }
        }

        /* ========================================
           NEW UI STYLES - Modern App Interface
           ======================================== */

        /* OLD UI: Show app-container but without flex layout, hide sidebar */
        body.ui-old {
            display: block;
            height: auto;
            overflow: visible;
        }

        body.ui-old .app-container {
            display: block;
            height: auto;
        }

        body.ui-old .app-sidebar {
            display: none !important;
        }

        body.ui-old .app-main {
            display: block;
            overflow: visible;
            height: auto;
        }

        body.ui-old header {
            position: sticky;
            top: 0;
        }

        body.ui-old main {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 1rem;
            overflow: visible;
        }

        /* NEW UI: Sidebar Navigation */
        body.ui-new {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        body.ui-new .app-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        body.ui-new .app-sidebar {
            display: flex;
            width: 240px;
            background: var(--modal-bg);
            border-right: 1px solid rgba(168, 85, 247, 0.2);
            flex-direction: column;
            overflow-y: auto;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
            transition: transform 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), opacity 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), width 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), min-width 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.65s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            min-width: 240px;
        }

        /* Sidebar hidden state */
        body.ui-new .app-sidebar.sidebar-hidden {
            transform: translateX(-100%);
            opacity: 0;
            pointer-events: none;
            width: 0;
            min-width: 0;
            border-right: none;
        }

        /* Sidebar toggle button */
        .sidebar-toggle-btn {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
            opacity: 0;
            pointer-events: none;
        }

        .sidebar-toggle-btn:hover {
            transform: translateY(-50%) scale(1.15);
            box-shadow: 0 8px 24px rgba(168, 85, 247, 0.7);
        }

        .sidebar-toggle-btn i {
            color: white;
            font-size: 1.1rem;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        /* Show toggle button only when sidebar is hidden */
        body.ui-new .app-sidebar.sidebar-hidden~.app-main .sidebar-toggle-btn {
            opacity: 1;
            pointer-events: all;
        }

        /* Adjust main content when sidebar is hidden */
        body.ui-new .app-sidebar.sidebar-hidden~.app-main {
            margin-left: 0;
        }

        body.ui-new .sidebar-logo {
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--light);
            border-bottom: 1px solid rgba(168, 85, 247, 0.15);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .sidebar-logo:hover {
            background: rgba(168, 85, 247, 0.1);
        }

        body.ui-new .sidebar-logo i {
            color: var(--vlc-orange);
            font-size: 1.8rem;
        }

        /* Sidebar close button hover effect */
        .sidebar-close-btn:hover {
            background: rgba(168, 85, 247, 0.2) !important;
            color: rgba(255, 255, 255, 1) !important;
        }

        /* Sidebar Stats Panel */
        body.ui-new .sidebar-stats {
            padding: 1rem 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        body.ui-new .stat-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(168, 85, 247, 0.08);
            border-radius: 8px;
            border: 1px solid rgba(168, 85, 247, 0.15);
        }

        body.ui-new .stat-item i {
            font-size: 1.5rem;
            color: var(--vlc-orange);
            width: 32px;
            text-align: center;
        }

        body.ui-new .stat-info {
            display: flex;
            flex-direction: column;
            flex: 1;
        }

        body.ui-new .stat-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        body.ui-new .stat-value {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--light);
        }

        body.ui-new .sidebar-divider {
            height: 1px;
            background: rgba(168, 85, 247, 0.15);
            margin: 0.5rem 1rem;
        }

        body.ui-new .nav-section-title {
            padding: 1rem 1.5rem 0.5rem;
            font-size: 0.7rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
        }

        body.ui-new .nav-badge {
            margin-left: auto;
            padding: 0.15rem 0.5rem;
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-radius: 10px;
            font-size: 0.65rem;
            font-weight: 600;
        }

        /* Sidebar Quick Actions */
        body.ui-new .sidebar-quick-actions {
            padding: 0.75rem 1.5rem;
            margin-top: auto;
        }

        body.ui-new .quick-action-title {
            font-size: 0.7rem;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }

        body.ui-new .quick-action-btn {
            width: 100%;
            padding: 0.65rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        body.ui-new .quick-action-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--vlc-orange);
            transform: translateY(-1px);
        }

        body.ui-new .sidebar-user-info {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        body.ui-new .sidebar-user-info i {
            font-size: 1.5rem;
            color: var(--vlc-orange);
        }

        body.ui-new .sidebar-nav {
            flex: 1;
            padding: 0.5rem 0;
        }

        body.ui-new .nav-item {
            padding: 0.85rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: rgba(255, 255, 255, 0.7);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-left: 3px solid transparent;
            font-weight: 500;
        }

        body.ui-new .nav-item:hover {
            background: rgba(168, 85, 247, 0.1);
            color: var(--light);
            border-left-color: var(--vlc-orange);
        }

        body.ui-new .nav-item.active {
            background: rgba(168, 85, 247, 0.15);
            color: var(--light);
            border-left-color: var(--vlc-orange);
        }

        body.ui-new .nav-item i {
            width: 20px;
            text-align: center;
        }

        body.ui-new .sidebar-footer {
            padding: 1rem 1.5rem;
            border-top: 1px solid rgba(168, 85, 247, 0.15);
        }

        /* Main Content Area */
        body.ui-new .app-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            background: var(--dark);
        }

        /* Modern Header */
        body.ui-new header {
            position: static;
            background: linear-gradient(90deg, var(--primary) 0%, #1f1035 100%);
            padding: 1.25rem 2rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.2);
            box-shadow: 0 2px 15px rgba(0, 0, 0, 0.2);
        }

        body.ui-new .header-container {
            justify-content: space-between;
            max-width: none;
        }

        body.ui-new .logo {
            display: none;
            /* Logo in sidebar instead */
        }

        body.ui-new .search-container {
            flex: 0 1 500px;
            margin: 0;
        }

        body.ui-new .search-container input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(10px);
        }

        body.ui-new .search-container input:focus {
            background: rgba(0, 0, 0, 0.4);
            border-color: var(--vlc-orange);
        }

        body.ui-new .user-actions {
            gap: 0.75rem;
        }

        body.ui-new .btn {
            border-radius: 8px;
            padding: 0.65rem 1.1rem;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }

        body.ui-new .btn-outline {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.4);
        }

        body.ui-new .btn-outline.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            color: white;
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.4);
        }

        body.ui-new .btn-primary {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }

        /* Connection Status */
        body.ui-new .connection-status {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            padding: 0.4rem 0.8rem;
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid rgba(40, 167, 69, 0.3);
            border-radius: 20px;
            font-size: 0.8rem;
            color: #28a745;
            white-space: nowrap;
        }

        body.ui-new .connection-status i {
            font-size: 0.5rem;
            animation: pulse 3s cubic-bezier(0.45, 0, 0.55, 1) infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.5;
                transform: scale(0.97);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
                opacity: 0.8;
            }

            50% {
                opacity: 1;
            }

            100% {
                background-position: 200% 0;
                opacity: 0.8;
            }
        }

        /* Hide connection status in OLD UI */
        body.ui-old .connection-status {
            display: none;
        }

        /* Enhanced Page Header */
        body.ui-new .page-header-enhanced {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: rgba(168, 85, 247, 0.05);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            backdrop-filter: blur(10px);
        }

        body.ui-new .page-title-section {
            flex: 1;
        }

        body.ui-new .page-subtitle {
            margin-top: 0.5rem;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        body.ui-new .page-actions {
            display: flex;
            gap: 0.75rem;
        }

        body.ui-new .action-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.65rem 1.25rem;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            border-radius: 8px;
            color: var(--light);
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 0.9rem;
        }

        body.ui-new .action-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
        }

        /* Hide enhanced elements in OLD UI */
        body.ui-old .page-header-enhanced {
            display: none;
        }

        body.ui-old .page-subtitle {
            display: none;
        }

        /* Content Area */
        body.ui-new main {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            margin: 0;
            padding: 2rem 2.5rem;
            max-width: none;
            background: linear-gradient(135deg, var(--dark) 0%, #0a0612 100%);
        }

        /* Modern Section Titles */
        body.ui-new .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.3);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        body.ui-new .section-title i {
            color: var(--vlc-orange);
        }

        /* Category Pills */
        body.ui-new .categories {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        body.ui-new .category {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.5rem;
            border-radius: 25px;
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 500;
        }

        body.ui-new .category i {
            font-size: 0.9rem;
        }

        body.ui-new .category:hover {
            background: var(--hover-bg);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.2);
        }

        body.ui-new .category.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }

        /* Modern Movie Cards with Glass Morphism */
        body.ui-new .movie-card {
            background: var(--card-bg);
            border: 1px solid rgba(168, 85, 247, 0.2);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .movie-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 12px 30px rgba(168, 85, 247, 0.35);
            border-color: var(--vlc-orange);
        }

        body.ui-new .movie-poster {
            position: relative;
            overflow: hidden;
        }

        body.ui-new .movie-poster::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, transparent 0%, rgba(0, 0, 0, 0.7) 100%);
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        body.ui-new .movie-card:hover .movie-poster::after {
            opacity: 1;
        }

        body.ui-new .movie-poster img {
            transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .movie-card:hover .movie-poster img {
            transform: scale(1.12);
        }

        /* New UI Add to List Button */
        body.ui-new .add-to-list-btn {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(168, 85, 247, 0.5);
            color: var(--light);
            padding: 0.6rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.7) translateY(10px);
            backdrop-filter: blur(10px);
            z-index: 2;
        }

        body.ui-new .movie-card:hover .add-to-list-btn {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        body.ui-new .add-to-list-btn:hover {
            background: var(--success);
            border-color: var(--success);
            transform: scale(1.12) translateY(0);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        body.ui-new .add-to-list-btn.in-list {
            background: var(--success);
            border-color: var(--success);
            opacity: 1;
            transform: scale(1) translateY(0);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }

        body.ui-new .add-to-list-btn.in-list i:before {
            content: "\f00c";
            /* checkmark */
        }

        /* New UI Done Watching Button */
        body.ui-new .movie-card .done-watching-btn {
            position: absolute;
            top: 12px;
            left: 60px;
            /* Position next to the add-to-list button */
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(23, 162, 184, 0.5);
            color: var(--light);
            padding: 0.6rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.7) translateY(10px);
            backdrop-filter: blur(10px);
            z-index: 2;
        }

        body.ui-new .movie-card:hover .done-watching-btn {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        body.ui-new .movie-card .done-watching-btn:hover {
            background: #17a2b8;
            border-color: #17a2b8;
            transform: scale(1.12) translateY(0);
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.4);
        }

        body.ui-new .movie-card .done-watching-btn.is-done {
            background: #17a2b8;
            border-color: #17a2b8;
            opacity: 1;
            transform: scale(1) translateY(0);
            box-shadow: 0 4px 15px rgba(23, 162, 184, 0.3);
        }

        body.ui-new .movie-card .done-watching-btn.is-done i:before {
            content: "\f058";
            /* check-circle */
        }

        /* Continue Watching specific styles */
        .continue-watching-card .remove-continue-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(220, 38, 38, 0.9);
            border: 1px solid rgba(220, 38, 38, 0.5);
            color: white;
            padding: 0.6rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0;
            transform: scale(0.7);
            backdrop-filter: blur(10px);
            z-index: 2;
        }

        .continue-watching-card:hover .remove-continue-btn {
            opacity: 1;
            transform: scale(1);
        }

        .continue-watching-card .remove-continue-btn:hover {
            background: rgba(239, 68, 68, 1);
            transform: scale(1.12);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.5);
        }

        /* Fix width for continue watching cards in slider to match trending cards */
        #continueWatchingSlider .continue-watching-card {
            flex: 0 0 260px;
            width: 260px;
        }

        /* Progress bar for continue watching cards */
        .continue-watching-card .movie-poster {
            position: relative;
        }

        .continue-watching-placeholder {
            width: 100%;
            padding-top: 150%;
            /* 2:3 aspect ratio to match posters */
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.2) 0%, rgba(255, 111, 0, 0.2) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .continue-watching-placeholder i {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3rem;
            color: rgba(255, 255, 255, 0.3);
        }

        .continue-watching-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--vlc-orange) 0%, #ff8c42 100%);
            transition: width 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 0 10px rgba(255, 111, 0, 0.5);
            z-index: 2;
        }

        body.ui-new .movie-info {
            padding: 1.25rem;
            background: linear-gradient(180deg, rgba(42, 24, 71, 0.6) 0%, rgba(18, 10, 31, 0.8) 100%);
        }

        body.ui-new .movie-title {
            font-size: 1.05rem;
            margin-bottom: 0.5rem;
            color: var(--light);
        }

        body.ui-new .movie-meta {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            font-size: 0.85rem;
        }

        body.ui-new .movie-rating {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.2) 0%, rgba(255, 152, 0, 0.2) 100%);
            border: 1px solid rgba(255, 193, 7, 0.4);
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            backdrop-filter: blur(10px);
        }

        body.ui-new .movie-year {
            background: rgba(168, 85, 247, 0.15);
            border: 1px solid rgba(168, 85, 247, 0.3);
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
        }

        /* Genre Boxes */
        body.ui-new .genre-box {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(139, 92, 246, 0.1) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(15px);
            border-radius: 16px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .genre-box:hover {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.25) 0%, rgba(139, 92, 246, 0.2) 100%);
            border-color: var(--vlc-orange);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(168, 85, 247, 0.3);
        }

        /* Modern Modal */
        body.ui-new .modal-content {
            background: linear-gradient(135deg, rgba(42, 24, 71, 0.95) 0%, rgba(18, 10, 31, 0.95) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
        }

        body.ui-new .modal-close {
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .modal-close:hover {
            background: rgba(220, 53, 69, 0.3);
            border-color: #dc3545;
            transform: rotate(90deg);
        }

        /* Buttons in Modal */
        body.ui-new .play-btn {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border: none;
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.4);
        }

        body.ui-new .play-btn:hover {
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.6);
            transform: translateY(-4px) scale(1.02);
        }

        /* ==== HERO SECTION ==== */
        body.ui-new .hero-section {
            position: relative;
            height: 80vh;
            min-height: 600px;
            margin: -2rem -1rem 3rem -1rem;
            overflow: hidden;
            border-radius: 0 0 20px 20px;
        }

        body.ui-new .hero-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.4);
        }

        body.ui-new .hero-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: linear-gradient(to top, var(--dark) 0%, transparent 100%);
        }

        body.ui-new .hero-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 4rem 3rem;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
        }

        body.ui-new .hero-title {
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 1.5rem;
            text-shadow: 2px 2px 20px rgba(0, 0, 0, 0.8);
            line-height: 1.1;
            max-width: 800px;
        }

        body.ui-new .hero-meta {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
        }

        body.ui-new .hero-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(168, 85, 247, 0.9);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            font-weight: 700;
            color: white;
        }

        body.ui-new .hero-year,
        body.ui-new .hero-runtime {
            color: var(--tertiary);
            font-weight: 600;
        }

        body.ui-new .hero-overview {
            font-size: 1.2rem;
            line-height: 1.8;
            max-width: 700px;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 10px rgba(0, 0, 0, 0.8);
            color: rgba(255, 255, 255, 0.95);
        }

        body.ui-new .hero-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        body.ui-new .hero-btn {
            padding: 1rem 2.5rem;
            border-radius: 8px;
            border: none;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        body.ui-new .hero-btn-primary {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            color: white;
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.5);
        }

        body.ui-new .hero-btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(168, 85, 247, 0.7);
        }

        body.ui-new .hero-btn-secondary {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        body.ui-new .hero-btn-secondary:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: rgba(255, 255, 255, 0.5);
            transform: translateY(-3px);
        }

        /* ==== HORIZONTAL SLIDERS ==== */
        body.ui-new .slider-section {
            margin-bottom: 3rem;
        }

        body.ui-new .slider-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding: 0 1rem;
        }

        body.ui-new .slider-title {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        body.ui-new .slider-title i {
            color: var(--vlc-orange);
        }

        body.ui-new .slider-nav {
            display: flex;
            gap: 0.5rem;
        }

        body.ui-new .slider-arrow {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(168, 85, 247, 0.2);
            border: 1px solid rgba(168, 85, 247, 0.3);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .slider-arrow:hover {
            background: var(--vlc-orange);
            border-color: var(--vlc-orange);
            transform: scale(1.12);
        }

        body.ui-new .slider-arrow.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        body.ui-new .slider-container {
            position: relative;
            overflow-x: auto;
            overflow-y: hidden;
            padding: 0 1rem;
            scrollbar-width: none;
            /* Firefox */
            -ms-overflow-style: none;
            /* IE/Edge */
        }

        body.ui-new .slider-container::-webkit-scrollbar {
            display: none;
            /* Chrome/Safari */
        }

        body.ui-new .slider-track {
            display: flex;
            gap: 1rem;
            padding-bottom: 1rem;
        }

        body.ui-new .slider-item {
            flex: 0 0 260px;
            width: 260px;
            background: var(--card-bg);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }

        body.ui-new .slider-item:hover {
            transform: scale(1.08);
            z-index: 10;
            box-shadow: 0 12px 40px rgba(168, 85, 247, 0.4);
            border-color: var(--vlc-orange);
        }

        body.ui-new .slider-poster {
            width: 100%;
            height: 375px;
            object-fit: cover;
            display: block;
        }

        body.ui-new .slider-info {
            padding: 1rem;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.9), transparent);
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .slider-item:hover .slider-info {
            opacity: 1;
            transform: translateY(0);
        }

        body.ui-new .slider-item-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.5rem;
            color: white;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        body.ui-new .slider-item-meta {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.9rem;
        }

        body.ui-new .slider-rating {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: var(--vlc-orange);
            font-weight: 700;
        }

        body.ui-new .slider-year {
            color: var(--tertiary);
        }

        /* Settings Modal */
        body.ui-new .settings-content {
            background: linear-gradient(135deg, rgba(42, 24, 71, 0.95) 0%, rgba(18, 10, 31, 0.95) 100%);
            border: 1px solid rgba(168, 85, 247, 0.3);
            backdrop-filter: blur(20px);
        }

        body.ui-new .settings-section {
            background: rgba(168, 85, 247, 0.05);
            border: 1px solid rgba(168, 85, 247, 0.2);
            backdrop-filter: blur(10px);
        }

        /* Loading Indicators */
        body.ui-new .loading {
            color: var(--vlc-orange);
        }

        /* Scrollbar Styling for New UI */
        body.ui-new ::-webkit-scrollbar {
            width: 10px;
        }

        body.ui-new ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        body.ui-new ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-radius: 5px;
        }

        body.ui-new ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #9333ea 0%, var(--vlc-orange) 100%);
        }

        /* ==== ENHANCED MODAL STYLES (NEW UI) ==== */
        body.ui-new .modal-header {
            height: 500px;
            position: relative;
        }

        body.ui-new .modal-backdrop {
            filter: brightness(0.3);
        }

        body.ui-new .modal-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to top, var(--card-bg) 0%, transparent 100%);
        }

        body.ui-new .modal-header-content {
            z-index: 2;
            padding: 3rem;
        }

        body.ui-new .modal-poster {
            width: 220px;
            height: 330px;
            border-radius: 12px;
            border: 3px solid rgba(168, 85, 247, 0.3);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
        }

        body.ui-new .modal-title {
            font-size: 3rem;
            font-weight: 900;
            text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.8);
            margin-bottom: 1rem;
        }

        body.ui-new .modal-rating {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }

        body.ui-new .modal-tagline {
            font-size: 1.2rem;
            color: var(--tertiary);
            font-style: italic;
        }

        body.ui-new .modal-body {
            background: var(--card-bg);
            padding: 3rem;
        }

        body.ui-new .modal-section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            margin-top: 2rem;
            color: white;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.3);
        }

        body.ui-new .modal-section-title:first-of-type {
            margin-top: 0;
        }

        body.ui-new .modal-section-title i {
            color: var(--vlc-orange);
        }

        body.ui-new .modal-overview {
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
        }

        /* Enhanced Modal Action Buttons */
        body.ui-new .modal-actions-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        body.ui-new .primary-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        body.ui-new .btn-enhanced {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            min-width: 200px;
        }

        body.ui-new .btn-enhanced::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), transparent);
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        body.ui-new .btn-enhanced:hover::before {
            opacity: 1;
        }

        body.ui-new .btn-enhanced-primary {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.4);
            color: white;
        }

        body.ui-new .btn-enhanced-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(168, 85, 247, 0.6);
        }

        body.ui-new .btn-enhanced-secondary {
            background: rgba(168, 85, 247, 0.15);
            border: 2px solid rgba(168, 85, 247, 0.3);
            color: white;
        }

        body.ui-new .btn-enhanced-secondary:hover {
            background: rgba(168, 85, 247, 0.25);
            border-color: var(--vlc-orange);
            transform: translateY(-3px);
        }

        body.ui-new .btn-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        body.ui-new .btn-content {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 0.25rem;
        }

        body.ui-new .btn-title {
            font-size: 1.1rem;
            font-weight: 700;
            line-height: 1;
        }

        body.ui-new .btn-subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
            line-height: 1;
        }

        body.ui-new .secondary-actions {
            display: flex;
            gap: 0.75rem;
        }

        body.ui-new .btn-icon-only {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(168, 85, 247, 0.1);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-size: 1.1rem;
        }

        body.ui-new .btn-icon-only:hover {
            background: var(--vlc-orange);
            border-color: var(--vlc-orange);
            transform: scale(1.12);
        }

        /* Trakt Watchlist Button - Override circular icon styling */
        body.ui-new #traktWatchlistBtn {
            width: auto;
            height: auto;
            min-width: 160px;
            border-radius: 12px;
            padding: 0.75rem 1.25rem;
            font-size: 0.95rem;
            font-weight: 600;
            gap: 0.5rem;
            border: 2px solid rgba(168, 85, 247, 0.4);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(139, 92, 246, 0.1));
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new #traktWatchlistBtn:hover {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(139, 92, 246, 0.2));
            border-color: rgba(168, 85, 247, 0.6);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }

        body.ui-new #traktWatchlistBtn.btn-success {
            border-color: rgba(16, 185, 129, 0.4);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.1));
            color: #10b981;
        }

        body.ui-new #traktWatchlistBtn.btn-success:hover {
            border-color: rgba(16, 185, 129, 0.6);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.3), rgba(5, 150, 105, 0.2));
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        body.ui-new #traktWatchlistBtn.btn-secondary {
            border-color: rgba(168, 85, 247, 0.4);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(139, 92, 246, 0.1));
            color: #a855f7;
        }

        body.ui-new #traktWatchlistBtn.btn-secondary:hover {
            border-color: rgba(168, 85, 247, 0.6);
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.3), rgba(139, 92, 246, 0.2));
            box-shadow: 0 4px 12px rgba(168, 85, 247, 0.3);
        }

        body.ui-new #traktWatchlistBtn i {
            font-size: 1rem;
        }

        body.ui-new #traktWatchlistBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        body.ui-new .action-note {
            padding: 0.75rem 1rem;
            background: rgba(168, 85, 247, 0.1);
            border-left: 3px solid var(--vlc-orange);
            border-radius: 8px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        body.ui-new .action-note i {
            color: var(--vlc-orange);
        }

        body.ui-new .cast-card {
            background: rgba(168, 85, 247, 0.1);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .cast-card:hover {
            border-color: var(--vlc-orange);
            box-shadow: 0 8px 25px rgba(168, 85, 247, 0.3);
            transform: translateY(-5px);
        }

        body.ui-new .cast-img {
            border-radius: 12px 12px 0 0;
        }

        body.ui-new .episode-card {
            background: rgba(168, 85, 247, 0.08);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .episode-card:hover {
            background: rgba(168, 85, 247, 0.15);
            border-color: var(--vlc-orange);
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.3);
            transform: translateY(-3px);
        }

        /* Ensure selected episode is clearly highlighted in the new UI */
        body.ui-new .episode-card.selected {
            border-color: var(--vlc-orange) !important;
            background: rgba(255, 105, 0, 0.14) !important;
            box-shadow: 0 8px 24px rgba(255, 105, 0, 0.35);
            transform: translateY(-3px);
        }

        body.ui-new .season-btn {
            background: rgba(168, 85, 247, 0.15);
            border: 1px solid rgba(168, 85, 247, 0.3);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .season-btn:hover {
            background: rgba(168, 85, 247, 0.25);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
        }

        body.ui-new .season-btn.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.5);
        }

        body.ui-new .torrent-item {
            background: rgba(168, 85, 247, 0.08);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 12px;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new .torrent-item:hover {
            background: rgba(168, 85, 247, 0.15);
            border-color: var(--vlc-orange);
            box-shadow: 0 6px 20px rgba(168, 85, 247, 0.25);
        }

        /* Enhanced Torrents Section */
        body.ui-new .torrents-container {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid rgba(168, 85, 247, 0.2);
        }

        body.ui-new .torrents-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        body.ui-new .provider-buttons {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            overflow-x: auto;
            overflow-y: hidden;
            padding-bottom: 0.5rem;
            scrollbar-width: thin;
            scrollbar-color: rgba(168, 85, 247, 0.5) rgba(168, 85, 247, 0.1);
        }

        body.ui-new .provider-buttons::-webkit-scrollbar {
            height: 6px;
        }

        body.ui-new .provider-buttons::-webkit-scrollbar-track {
            background: rgba(168, 85, 247, 0.1);
            border-radius: 3px;
        }

        body.ui-new .provider-buttons::-webkit-scrollbar-thumb {
            background: rgba(168, 85, 247, 0.5);
            border-radius: 3px;
        }

        body.ui-new .provider-buttons::-webkit-scrollbar-thumb:hover {
            background: rgba(168, 85, 247, 0.7);
        }

        body.ui-new .provider-btn {
            padding: 0.75rem 1.25rem;
            border-radius: 10px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(168, 85, 247, 0.1);
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            white-space: nowrap;
            flex-shrink: 0;
        }

        body.ui-new .provider-btn:hover {
            background: rgba(168, 85, 247, 0.2);
            border-color: var(--vlc-orange);
            transform: translateY(-4px) scale(1.02);
        }

        body.ui-new .provider-btn.active {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.5);
        }

        body.ui-new .torrents-list {
            display: grid;
            gap: 1rem;
        }

        body.ui-new .torrent-item {
            background: rgba(168, 85, 247, 0.08);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 8px;
            padding: 0.75rem 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
        }

        body.ui-new .torrent-item:hover {
            background: rgba(168, 85, 247, 0.15);
            border-color: var(--vlc-orange);
            box-shadow: 0 3px 12px rgba(168, 85, 247, 0.2);
            transform: translateX(3px);
        }

        body.ui-new .torrent-title {
            font-weight: 600;
            font-size: 0.95rem;
            color: white;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        body.ui-new .torrent-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.85rem;
        }

        body.ui-new .torrent-badge {
            padding: 0.25rem 0.6rem;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.8rem;
            display: inline-flex;
            align-items: center;
            gap: 0.35rem;
            white-space: nowrap;
        }

        body.ui-new .torrent-badge.seeders {
            background: rgba(34, 197, 94, 0.2);
            border: 1px solid rgba(34, 197, 94, 0.4);
            color: #22c55e;
        }

        body.ui-new .torrent-badge.leechers {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }

        body.ui-new .torrent-badge.size {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #3b82f6;
        }

        body.ui-new .torrent-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        body.ui-new .torrent-actions button {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.4rem;
            white-space: nowrap;
        }

        body.ui-new .torrent-actions .btn-play {
            background: linear-gradient(135deg, var(--vlc-orange) 0%, #9333ea 100%);
            color: white;
        }

        body.ui-new .torrent-actions .btn-play:hover {
            transform: scale(1.03);
            box-shadow: 0 3px 12px rgba(168, 85, 247, 0.4);
        }

        body.ui-new .torrents-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        /* Enhanced Filter Controls */
        body.ui-new .filter-controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1.5rem;
            align-items: center;
        }

        body.ui-new .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        body.ui-new .filter-group label {
            font-size: 0.85rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        body.ui-new .filter-group select,
        body.ui-new .filter-group input {
            padding: 0.75rem 1rem;
            border-radius: 8px;
            border: 2px solid rgba(168, 85, 247, 0.3);
            background: rgba(168, 85, 247, 0.1);
            color: white;
            font-size: 0.95rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            min-width: 150px;
        }

        body.ui-new .filter-group select:focus,
        body.ui-new .filter-group input:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background: rgba(168, 85, 247, 0.15);
            box-shadow: 0 0 0 3px rgba(168, 85, 247, 0.1);
        }

        body.ui-new .filter-group select option {
            background: #1a1a1a;
            color: white;
        }

        body.ui-new .search-torrents-input {
            flex: 1;
            min-width: 250px;
        }

        /* Audio Issues Notice */
        body.ui-new .audio-issues-notice {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 4px solid var(--vlc-orange);
        }

        body.ui-new .audio-issues-notice h4 {
            color: var(--vlc-orange);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        body.ui-new .audio-issues-notice p {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
        }

        /* Enhanced Music Section */
        body.ui-new #music-page .page-header-enhanced {
            background: linear-gradient(135deg, rgba(236, 72, 153, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        body.ui-new #music-page .page-title-section {
            margin-bottom: 1rem;
        }

        body.ui-new #music-page .section-title i {
            font-size: 1.5rem;
        }

        body.ui-new #music-page .page-actions {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        body.ui-new #music-page .action-btn {
            background: rgba(236, 72, 153, 0.1);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 10px;
            padding: 0.65rem 1.25rem;
            color: white;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            font-size: 0.9rem;
        }

        body.ui-new #music-page .action-btn i {
            font-size: 1rem;
        }

        body.ui-new #music-page .action-btn:hover {
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
            border-color: transparent;
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 6px 16px rgba(236, 72, 153, 0.35);
        }

        body.ui-new #music-page .books-search-section {
            margin-bottom: 2.5rem;
        }

        body.ui-new #music-page .books-search-bar {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: rgba(236, 72, 153, 0.1);
            border: 2px solid rgba(236, 72, 153, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
        }

        body.ui-new #music-page #music-search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.05rem;
            outline: none;
        }

        body.ui-new #music-page .books-search-button {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        body.ui-new #music-page #music-search-btn {
            background: linear-gradient(135deg, #ec4899 0%, #a855f7 100%);
            color: white;
        }

        body.ui-new #music-page #music-album-search-btn {
            background: linear-gradient(135deg, #38bdf8 0%, #0ea5e9 100%);
            color: white;
        }

        body.ui-new #music-page .books-search-button:hover {
            transform: scale(1.08);
            box-shadow: 0 4px 15px rgba(236, 72, 153, 0.5);
        }

        body.ui-new #music-page .books-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        body.ui-new #music-page .music-card,
        body.ui-new #music-page .album-card {
            background: rgba(236, 72, 153, 0.08);
            border: 1px solid rgba(236, 72, 153, 0.2);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }

        body.ui-new #music-page .music-card:hover,
        body.ui-new #music-page .album-card:hover {
            background: rgba(236, 72, 153, 0.15);
            border-color: #ec4899;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(236, 72, 153, 0.3);
        }

        body.ui-new #music-page .album-tracks-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        body.ui-new #music-page .track-item {
            background: rgba(236, 72, 153, 0.08);
            border: 1px solid rgba(236, 72, 153, 0.2);
            border-radius: 10px;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new #music-page .track-item:hover {
            background: rgba(236, 72, 153, 0.15);
            border-color: #ec4899;
            transform: translateX(5px);
        }

        body.ui-new #music-page .books-empty {
            text-align: center;
            padding: 4rem 2rem;
            background: rgba(236, 72, 153, 0.05);
            border: 2px dashed rgba(236, 72, 153, 0.3);
            border-radius: 16px;
        }

        body.ui-new #music-page .books-empty-icon {
            font-size: 4rem;
            color: #ec4899;
            margin-bottom: 1.5rem;
        }

        body.ui-new #music-page .books-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1rem;
        }

        body.ui-new #music-page .books-loading-spinner {
            font-size: 3rem;
            color: #ec4899;
        }

        body.ui-new #music-page .playlist-close-btn {
            background: rgba(239, 68, 68, 0.15);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            padding: 0.75rem 1.25rem;
            color: #ef4444;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        body.ui-new #music-page .playlist-close-btn:hover {
            background: rgba(239, 68, 68, 0.25);
            transform: scale(1.08);
        }

        /* Enhanced Books Section */
        body.ui-new #books-page .page-header-enhanced {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(168, 85, 247, 0.15) 100%);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        body.ui-new #books-page .books-search-bar {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 1rem 1.5rem;
        }

        body.ui-new #books-page #books-search-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 1.05rem;
            outline: none;
        }

        body.ui-new #books-page .books-search-button {
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            border: none;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        body.ui-new #books-page .books-search-button:hover {
            transform: scale(1.08);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.5);
        }

        body.ui-new #books-page .books-results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
        }

        body.ui-new #books-page .book-card {
            background: rgba(59, 130, 246, 0.08);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }

        body.ui-new #books-page .book-card:hover {
            background: rgba(59, 130, 246, 0.15);
            border-color: #3b82f6;
            transform: translateY(-5px);
            box-shadow: 0 12px 30px rgba(59, 130, 246, 0.3);
        }

        body.ui-new #books-page .books-empty {
            text-align: center;
            padding: 4rem 2rem;
            background: rgba(59, 130, 246, 0.05);
            border: 2px dashed rgba(59, 130, 246, 0.3);
            border-radius: 16px;
        }

        body.ui-new #books-page .books-empty-icon {
            font-size: 4rem;
            color: #3b82f6;
            margin-bottom: 1.5rem;
        }

        body.ui-new #books-page .books-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 4rem 2rem;
            gap: 1rem;
        }

        body.ui-new #books-page .books-loading-spinner {
            font-size: 3rem;
            color: #3b82f6;
        }

        /* Settings Page Styles */
        .settings-page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .settings-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid rgba(168, 85, 247, 0.2);
            padding-bottom: 0;
            flex-wrap: wrap;
        }

        .settings-tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            border-bottom: 3px solid transparent;
            position: relative;
            bottom: -2px;
        }

        .settings-tab:hover {
            color: var(--light);
            background: rgba(168, 85, 247, 0.05);
        }

        .settings-tab.active {
            color: var(--vlc-orange);
            border-bottom-color: var(--vlc-orange);
            background: rgba(255, 111, 0, 0.05);
        }

        .settings-sections {
            position: relative;
        }

        .settings-section {
            display: none;
            animation: fadeIn 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .settings-card {
            background: var(--card-bg);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            overflow: hidden;
            border: 1px solid rgba(168, 85, 247, 0.15);
            transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-card:hover {
            border-color: rgba(168, 85, 247, 0.3);
            box-shadow: 0 4px 20px rgba(168, 85, 247, 0.1);
        }

        .settings-card-header {
            background: var(--modal-bg);
            padding: 1.25rem 1.5rem;
            border-bottom: 1px solid rgba(168, 85, 247, 0.15);
        }

        .settings-card-header h3 {
            margin: 0;
            font-size: 1.2rem;
            color: var(--light);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .settings-card-header h3 i {
            color: var(--vlc-orange);
        }

        .settings-card-body {
            padding: 1.5rem;
        }

        .settings-card-body .form-group {
            margin-bottom: 1.5rem;
        }

        .settings-card-body .form-group:last-child {
            margin-bottom: 0;
        }

        .settings-card-body label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.9);
        }

        .settings-card-body input[type="text"],
        .settings-card-body input[type="url"],
        .settings-card-body input[type="password"],
        .settings-card-body select,
        .settings-card-body textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--input-bg);
            border: 1px solid rgba(168, 85, 247, 0.2);
            border-radius: 8px;
            color: var(--light);
            font-size: 0.95rem;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-card-body input:focus,
        .settings-card-body select:focus,
        .settings-card-body textarea:focus {
            outline: none;
            border-color: var(--vlc-orange);
            background: rgba(0, 0, 0, 0.4);
        }

        .settings-card-body button {
            padding: 0.75rem 1.5rem;
            background: var(--vlc-orange);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-card-body button:hover {
            background: #e65100;
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 4px 12px rgba(255, 111, 0, 0.3);
        }

        .settings-card-body .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .settings-card-body .checkbox-group input[type="checkbox"] {
            width: auto;
            cursor: pointer;
        }

        .settings-card-body .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .settings-card-body .radio-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(168, 85, 247, 0.05);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .settings-card-body .radio-option:hover {
            background: rgba(168, 85, 247, 0.1);
        }

        .settings-card-body .radio-option input[type="radio"] {
            width: auto;
            cursor: pointer;
        }

        /* Responsive adjustments for New UI */
        @media (max-width: 1024px) {
            body.ui-new .app-sidebar {
                width: 200px;
            }

            body.ui-new main {
                padding: 1.5rem 1.5rem;
            }
        }

        @media (max-width: 768px) {
            body.ui-new .app-sidebar {
                position: fixed;
                left: -240px;
                top: 0;
                bottom: 0;
                z-index: 1000;
                transition: left 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }

            body.ui-new .app-sidebar.mobile-open {
                left: 0;
            }

            body.ui-new .search-container {
                flex: 1;
                margin: 0;
            }

            body.ui-new .search-container input {
                width: 100%;
                background: rgba(255, 255, 255, 0.08);
                /* slightly lighter on mobile */
            }

            /* Hide the floating sidebar toggle button on mobile - use header hamburger instead */
            .sidebar-toggle-btn {
                display: none !important;
            }
        }

        /* Custom Scrollbar for IPTV Category Select Dropdown */
        #xtream-category-select {
            /* Enhanced dropdown styling */
            cursor: pointer;
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
            max-height: 300px;
            overflow-y: auto;
        }

        #xtream-category-select:hover {
            border-color: rgba(59, 130, 246, 0.5) !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        #xtream-category-select:focus {
            outline: none;
            border-color: rgba(59, 130, 246, 0.7) !important;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        /* Custom scrollbar for the dropdown options */
        #xtream-category-select::-webkit-scrollbar {
            width: 12px;
        }

        #xtream-category-select::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.05);
        }

        #xtream-category-select::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 10px;
            border: 2px solid rgba(0, 0, 0, 0.3);
            transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        #xtream-category-select::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
            border-color: rgba(0, 0, 0, 0.5);
        }

        #xtream-category-select::-webkit-scrollbar-thumb:active {
            background: #4b5563;
        }

        /* Dropdown options styling */
        #xtream-category-select option {
            background: #1b1b1b;
            color: #fff;
            padding: 0.5rem;
            transition: background 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        #xtream-category-select option:hover {
            background: rgba(59, 130, 246, 0.2);
        }

        #xtream-category-select option:checked {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: #fff;
            font-weight: 600;
        }

        /* Responsive Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: transparent;
            border: none;
            color: var(--light);
            font-size: 1.3rem;
            margin-right: 1rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .mobile-menu-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(3px);
        }

        body.ui-new.sidebar-open .sidebar-overlay {
            opacity: 1;
            pointer-events: all;
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* Compact Header on Mobile */
            body.ui-new header {
                padding: calc(0.5rem + env(safe-area-inset-top, 0px)) 0.75rem 0.5rem 0.75rem !important;
                height: calc(60px + env(safe-area-inset-top, 0px)) !important;
                /* Fixed height for consistency */
            }

            .header-container {
                gap: 0.5rem;
                height: 100%;
            }

            .logo {
                font-size: 1.25rem;
                white-space: nowrap;
            }

            .logo span {
                display: inline-block;
                /* Keep play text but maybe smaller */
            }

            /* Better Search Input for Mobile */
            .search-container {
                margin: 0 0.25rem;
                flex: 1;
                max-width: none;
            }

            .search-container input {
                padding: 0.5rem 0.75rem 0.5rem 2rem;
                font-size: 16px;
                /* Prevents iOS zoom */
                height: 40px;
            }

            .search-icon {
                left: 0.75rem;
                font-size: 0.9rem;
            }

            /* Movie Grid: 2 columns on mobile */
            .movies-grid,
            .genre-grid,
            .genre-results-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.75rem !important;
                padding: 0 0.5rem;
                /* Add side padding */
            }

            /* Ensure cards don't overflow */
            .movie-card,
            .genre-card {
                width: 100%;
                min-width: 0;
            }

            .movie-poster {
                height: auto;
                aspect-ratio: 2/3;
                /* Enforce poster ratio */
            }

            /* Touch Targets */
            .btn,
            .nav-item,
            .modal-close {
                min-height: 44px;
                /* Apple Human Interface Guidelines */
            }

            /* Hide Desktop Actions on Mobile */
            .user-actions .btn {
                display: none !important;
            }

            /* Show connection status? Maybe as a dot only */
            .connection-status {
                display: none;
                /* Hide for now to save space */
            }

            /* Touch Controls: Always show titles on sliders on mobile */
            body.ui-new .slider-info {
                opacity: 1 !important;
                transform: translateY(0) !important;
                background: linear-gradient(to top, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.6) 40%, transparent) !important;
                padding: 0.5rem !important;
            }

            body.ui-new .slider-item-title {
                font-size: 0.85rem;
                margin-bottom: 0.25rem;
            }

            body.ui-new .slider-item-meta {
                font-size: 0.75rem;
            }

            /* Remove hover effects that stick on mobile */
            .movie-card:hover,
            .genre-card:hover {
                transform: none !important;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
            }

            /* Touch feedback class */
            .movie-card:active {
                transform: scale(0.96) !important;
                transition: transform 0.1s;
            }
        }

        /* Mobile Menu Styles */
        .mobile-menu-btn {
            display: none;
            background: transparent;
            border: none;
            color: var(--light);
            font-size: 1.4rem;
            cursor: pointer;
            padding: 0.5rem;
            margin-right: 0.5rem;
            z-index: 1001;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(2px);
        }

        .sidebar-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block !important;
            }

            .mobile-hidden {
                display: none !important;
            }

            body.ui-new header {
                padding: 0.75rem 1rem !important;
            }

            .header-container {
                gap: 0.5rem;
            }

            .logo {
                font-size: 1.4rem !important;
            }

            .logo span {
                /* keep text for now, can hide if needed */
            }

            .connection-status span {
                /* Show text on mobile for clarity */
                display: inline;
                font-size: 0.75rem;
            }

            .connection-status {
                padding: 0.3rem 0.6rem;
                font-size: 0.8rem;
            }

            .categories {
                padding-left: 0.5rem;
                padding-right: 0.5rem;
            }

            .category {
                flex-shrink: 0;
            }
        }

        /* Mobile Bottom Navigation */
        .bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(30, 18, 51, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(168, 85, 247, 0.2);
            padding: 0.5rem 0;
            padding-bottom: calc(0.5rem + env(safe-area-inset-bottom, 0px));
            z-index: 9000;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.3);
        }

        /* Force show on Android regardless of screen size */
        body.platform-android .bottom-nav {
            display: flex !important;
        }

        /* Force hide sidebar on Android */
        body.platform-android .app-sidebar {
            display: none !important;
        }

        /* Adjust padding for Android */
        body.platform-android .app-main {
            padding-bottom: calc(70px + env(safe-area-inset-bottom, 0px)) !important;
        }

        .bottom-nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            color: var(--gray);
            font-size: 0.75rem;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            min-width: 60px;
            cursor: pointer;
        }

        .bottom-nav-item i {
            font-size: 1.25rem;
            margin-bottom: 2px;
        }

        .bottom-nav-item.active {
            color: var(--vlc-orange);
            background: rgba(168, 85, 247, 0.1);
        }

        .bottom-nav-item.active i {
            transform: translateY(-2px);
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {

            /* Show Bottom Nav */
            .bottom-nav {
                display: flex;
            }

            /* Adjust Main Content Padding for Bottom Nav */
            .app-main {
                padding-bottom: calc(70px + env(safe-area-inset-bottom, 0px)) !important;
            }

            /* Hide Sidebar & Header Elements (but NOT mobile-menu-btn which opens sidebar) */
            .app-sidebar,
            .user-actions .mobile-hidden {
                display: none !important;
            }

            /* Show sidebar when mobile-open class is added via hamburger menu */
            .app-sidebar.mobile-open {
                display: flex !important;
                position: fixed !important;
                left: 0 !important;
                top: 0 !important;
                bottom: 0 !important;
                z-index: 1000 !important;
            }

            /* Show hamburger menu button on mobile */
            .mobile-menu-btn {
                display: flex !important;
                position: absolute !important;
                left: 0.75rem !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
                z-index: 10;
            }

            /* Mobile Header Layout: hamburger left, logo center, status right */
            body.ui-new header {
                padding: calc(0.5rem + env(safe-area-inset-top, 0px)) 1rem 0.5rem 1rem !important;
                height: auto !important;
                min-height: 50px;
            }

            .header-container {
                width: 100%;
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                position: relative;
            }

            /* Logo centered */
            .logo {
                margin: 0 !important;
                font-size: 1.3rem !important;
            }

            /* Connection status on the right */
            .user-actions {
                position: absolute !important;
                right: 0 !important;
                top: 50% !important;
                transform: translateY(-50%) !important;
            }

            /* Mobile Search (Hidden by default, shown via tab) */
            .search-container {
                display: none !important;
                /* Hide header search */
            }

            /* Mobile Grids - 2 Columns */
            .movies-grid,
            .genre-grid,
            .genre-results-grid,
            .downloader-results {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.75rem !important;
            }

            .movie-card,
            .genre-card {
                border-radius: 8px;
                /* Slightly smaller radius */
            }

            .movie-poster {
                height: auto;
                aspect-ratio: 2/3;
            }

            /* Mobile Modal - Full Screen Bottom Sheet style */
            .modal-content {
                width: 100% !important;
                height: 100% !important;
                max-width: none !important;
                max-height: none !important;
                border-radius: 0 !important;
                overflow-y: auto;
                display: flex;
                flex-direction: column;
            }

            .modal-header {
                height: 300px;
                /* Taller header for mobile drama */
                flex-shrink: 0;
            }

            .modal-close {
                top: calc(15px + env(safe-area-inset-top, 0px));
                right: 15px;
                background: rgba(0, 0, 0, 0.6);
                width: 44px;
                height: 44px;
                /* Larger touch target */
                z-index: 100;
            }

            .modal-header-content {
                padding: 1rem;
                flex-direction: column;
                /* Stack poster and info */
                align-items: flex-start;
                background: linear-gradient(to top, var(--card-bg) 0%, transparent 100%);
            }

            .modal-poster {
                display: none;
                /* Hide poster in header on mobile to save space, backdrop is enough */
            }

            .modal-info {
                flex-wrap: wrap;
            }

            /* Always visible actions on mobile cards */
            .add-to-list-btn,
            .done-watching-btn {
                opacity: 1 !important;
                transform: scale(1) !important;
                background-color: rgba(0, 0, 0, 0.6) !important;
            }

            /* Hide floating nav in new UI mobile */
            .floating-nav-container {
                display: none !important;
            }

            /* ===== MOBILE HERO SECTION OPTIMIZATION ===== */
            body.ui-new .hero-section {
                height: 50vh !important;
                min-height: 280px !important;
                max-height: 400px !important;
                margin: 0 !important;
                border-radius: 0 !important;
            }

            body.ui-new .hero-content {
                padding: 1rem 1rem 1.5rem 1rem !important;
                bottom: 0 !important;
            }

            body.ui-new .hero-title {
                font-size: 1.4rem !important;
                margin-bottom: 0.5rem !important;
                line-height: 1.2 !important;
            }

            body.ui-new .hero-meta {
                font-size: 0.85rem !important;
                gap: 0.5rem !important;
                margin-bottom: 0.5rem !important;
                flex-wrap: wrap;
            }

            body.ui-new .hero-rating {
                padding: 0.3rem 0.6rem !important;
                font-size: 0.8rem !important;
            }

            body.ui-new .hero-overview {
                font-size: 0.85rem !important;
                -webkit-line-clamp: 2 !important;
                line-clamp: 2 !important;
                margin-bottom: 0.75rem !important;
                line-height: 1.4 !important;
            }

            body.ui-new .hero-buttons {
                gap: 0.5rem !important;
            }

            body.ui-new .hero-btn {
                padding: 0.5rem 1rem !important;
                font-size: 0.85rem !important;
            }

            /* ===== MOBILE SLIDER OPTIMIZATION ===== */
            .sliders-container {
                padding: 0.5rem 0.75rem !important;
            }

            .slider-section {
                margin-bottom: 1rem !important;
            }

            .slider-section h2 {
                font-size: 1rem !important;
                margin-bottom: 0.5rem !important;
            }

            .slider-cards {
                gap: 0.5rem !important;
            }

            .slider-card {
                min-width: 110px !important;
                max-width: 130px !important;
            }

            .slider-card img {
                border-radius: 6px !important;
            }

            .slider-title {
                font-size: 0.75rem !important;
                -webkit-line-clamp: 1 !important;
            }

            /* Hide slider navigation arrows on mobile - users swipe instead */
            .slider-nav,
            .slider-arrow,
            body.ui-new .slider-nav,
            body.ui-new .slider-arrow {
                display: none !important;
            }
        }
    </style>
    <!-- Google Cast SDK -->
    <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>
</head>

<body class="ui-new">
    <!-- Custom Title Bar REMOVED -->
    <!-- API Setup Modal - REMOVED -->

    <!-- Donate modal removed -->

    <!-- Discord Modal -->
    <div class="discord-modal" id="discordModal">
        <div class="discord-content">
            <button class="discord-close" id="discordClose">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="discord-title">
                <svg class="discord-logo" viewBox="0 0 71 55" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0)">
                        <path
                            d="M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z"
                            fill="white" />
                    </g>
                    <defs>
                        <clipPath id="clip0">
                            <rect width="71" height="55" fill="white" />
                        </clipPath>
                    </defs>
                </svg>
                Join the Discord
            </h2>
            <div class="discord-message">
                <p>Suggest features, report bugs, be a part of the community, and help me make a better app.</p>
            </div>
            <div style="display:flex; gap:0.75rem; flex-wrap: wrap;">
                <button class="discord-join-btn" id="discordJoinBtn" style="flex:1;">
                    <i class="fab fa-discord"></i>
                    Join Discord
                </button>
                <button class="discord-join-btn" id="discordDontShowBtn"
                    style="background: rgba(255,255,255,0.12); flex:1; color:#fff; text-shadow:0 0 4px rgba(0,0,0,0.6); font-weight:600;">
                    <i class="fas fa-eye-slash"></i>
                    Don't show again
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content">
            <div class="settings-header">
                <h2 class="settings-title">
                    <i class="fas fa-cog"></i>
                    Settings
                </h2>
                <button class="settings-close" id="settingsClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="settings-section">
                <h3>Jackett API Configuration</h3>
                <div class="current-api-key" id="currentApiKey">
                    No API key configured
                </div>
                <div class="api-input-group">
                    <label for="newApiKey">New API Key:</label>
                    <input type="text" id="newApiKey" class="api-input" placeholder="Enter new Jackett API key..." />
                </div>
                <div class="api-input-group" style="margin-top:1rem;">
                    <label for="jackettUrl">Jackett Base URL:</label>
                    <input type="text" id="jackettUrl" class="api-input"
                        placeholder="http://127.0.0.1:9117/api/v2.0/indexers/all/results/torznab" />
                    <small style="color:var(--secondary); font-size:0.85rem; margin-top:0.25rem;">Default:
                        http://127.0.0.1:9117/api/v2.0/indexers/all/results/torznab</small>
                </div>
                <!-- Removed: Watch without Jackett & Torrent Source options -->
            </div>

            <div class="settings-section" style="margin-top:1.25rem;">
                <h3>Streaming Mode</h3>
                <div
                    style="margin-top:0.5rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                    <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer;">
                        <input type="checkbox" id="useStreamingServersToggle" />
                        <span>Use Streaming Servers instead of Torrents</span>
                    </label>
                    <div style="margin-top:0.5rem; color:#10b981; font-size:0.9rem;">
                        Stream directly from web servers (faster startup, no downloads)
                    </div>
                    <div style="margin-top:0.25rem; color:#9ca3af; font-size:0.85rem;">
                        When enabled, movies/shows will stream from online servers instead of torrent files
                    </div>
                </div>
            </div>

            <div class="settings-section desktop-only-setting" style="margin-top:1.25rem;">
                <h3>Cache & Storage</h3>
                <div
                    style="margin-top:0.5rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                    <div class="api-input-group">
                        <label for="cacheLocation">Cache Location:</label>
                        <div style="display:flex; gap:0.5rem; align-items:center;">
                            <input type="text" id="cacheLocationOld" class="api-input" readonly
                                placeholder="System default temp folder" style="flex:1;" />
                            <button class="api-btn" id="selectCacheBtnOld"
                                style="background:#0d6efd; color:#fff; white-space:nowrap;">
                                <i class="fas fa-folder-open"></i> Browse
                            </button>
                        </div>
                        <small style="color:var(--secondary); font-size:0.85rem; margin-top:0.25rem;">
                            <i class="fas fa-info-circle"></i> Location where WebTorrent streams and subtitles are
                            cached
                        </small>
                    </div>
                </div>
            </div>

            <div class="settings-section" id="debridSection" style="margin-top:1.25rem;">
                <h3>Debrid (Cloud Cache) </h3>
                <div
                    style="margin-top:0.5rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05); display:flex; flex-direction: column; gap:0.75rem;">
                    <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer;">
                        <input type="checkbox" id="useDebridToggle" />
                        <span>Use Debrid</span>
                    </label>
                    <div style="display:flex; gap:0.75rem; align-items:center; flex-wrap: wrap;">
                        <label for="debridProvider">Provider:</label>
                        <select id="debridProvider" class="api-input" style="min-width:220px; max-width:260px;">
                            <option value="realdebrid">RealDebrid</option>
                            <option value="alldebrid">AllDebrid</option>
                            <option value="torbox">TorBox</option>
                            <option value="premiumize">Premiumize</option>
                        </select>
                        <span id="debridStatus" style="font-size:0.9rem; opacity:0.85;">Not logged in</span>
                    </div>
                    <div class="api-input-group" id="rdClientIdGroup">
                        <label for="rdClientId">RealDebrid Client ID (device flow):</label>
                        <input type="text" id="rdClientId" class="api-input"
                            placeholder="Enter your RD Client ID (e.g., XXXXXXXXXXXXX)" />
                    </div>
                    <div id="rdButtons" style="display:flex; gap:0.5rem; flex-wrap: wrap; align-items:center;">
                        <button class="api-btn" id="rdDeviceLogin" style="background:#198754; color:#fff;">
                            <i class="fas fa-sign-in-alt"></i> Login with RealDebrid
                        </button>
                        <small style="opacity:0.85;">No password needed. Authenticate on realdebrid.com using a short
                            code.</small>
                    </div>
                    <div id="rdCodePanel"
                        style="display:none; margin-top:0.5rem; padding:0.75rem; background:rgba(0,0,0,0.35); border:1px solid rgba(255,255,255,0.1); border-radius:8px;">
                        <div style="display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                            <div>Code:</div>
                            <div id="rdUserCode"
                                style="font-family:monospace; font-weight:800; background:rgba(255,255,255,0.1); padding:0.25rem 0.5rem; border-radius:6px;">
                                ----</div>
                            <button class="api-btn" id="rdCopyCode"
                                style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                    class="fas fa-copy"></i> Copy</button>
                        </div>
                        <div style="margin-top:0.5rem; display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                            <div>Verify at:</div>
                            <a id="rdVerifyUrl" href="#" target="_blank"
                                style="color:#0d6efd; text-decoration:underline;">https://real-debrid.com/device</a>
                            <button class="api-btn" id="rdOpenVerify"
                                style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                    class="fas fa-external-link-alt"></i> Open</button>
                            <span id="rdLoginStatus" style="margin-left:auto; font-size:0.9rem; opacity:0.9;">Waiting
                                for approval</span>
                            <button class="api-btn api-btn-secondary" id="rdCancelLogin"><i class="fas fa-times"></i>
                                Cancel</button>
                        </div>
                    </div>
                    <div class="api-input-group" id="rdTokenGroup">
                        <label for="debridToken">RealDebrid Token (temporary MVP):</label>
                        <input type="password" id="debridToken" class="api-input" placeholder="Paste RD token..." />
                    </div>
                    <div id="rdTokenButtons" style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                        <button class="api-btn" id="saveDebridToken" style="background:#0d6efd; color:#fff;">
                            <i class="fas fa-key"></i> Save Token
                        </button>
                        <button class="api-btn api-btn-secondary" id="clearDebridToken">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                    <div style="margin-top:0.25rem; color:#ffc107; font-size:0.9rem;">Your token is stored locally and
                        never exposed to websites.</div>

                    <!-- AllDebrid PIN Login UI -->
                    <div id="adSection"
                        style="display:none; margin-top:1rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                        <div style="display:flex; gap:0.5rem; align-items:center; flex-wrap:wrap;">
                            <button class="api-btn" id="adStartPin" style="background:#198754; color:#fff;"><i
                                    class="fas fa-sign-in-alt"></i> Login with AllDebrid (PIN)</button>
                            <small style="opacity:0.85;">Authenticate on alldebrid.com/pin with the code shown.</small>
                        </div>
                        <div id="adPinPanel"
                            style="display:none; margin-top:0.5rem; padding:0.75rem; background:rgba(0,0,0,0.35); border:1px solid rgba(255,255,255,0.1); border-radius:8px;">
                            <div style="display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                                <div>PIN:</div>
                                <div id="adPinCode"
                                    style="font-family:monospace; font-weight:800; background:rgba(255,255,255,0.1); padding:0.25rem 0.5rem; border-radius:6px;">
                                    ----</div>
                                <button class="api-btn" id="adCopyPin"
                                    style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                        class="fas fa-copy"></i> Copy</button>
                            </div>
                            <div
                                style="margin-top:0.5rem; display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                                <div>Open:</div>
                                <a id="adUserUrl" href="https://alldebrid.com/pin/" target="_blank"
                                    style="color:#0d6efd; text-decoration:underline;">https://alldebrid.com/pin/</a>
                                <button class="api-btn" id="adOpenUserUrl"
                                    style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                        class="fas fa-external-link-alt"></i> Open</button>
                                <span id="adLoginStatus"
                                    style="margin-left:auto; font-size:0.9rem; opacity:0.9;">Waiting</span>
                                <button class="api-btn api-btn-secondary" id="adCancelPin"><i class="fas fa-times"></i>
                                    Cancel</button>
                            </div>
                        </div>
                        <div class="api-input-group" style="margin-top:0.75rem;">
                            <label for="adApiKey">AllDebrid API Key (optional/manual):</label>
                            <input type="password" id="adApiKey" class="api-input" placeholder="Paste AD API key..." />
                        </div>
                        <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                            <button class="api-btn" id="adSaveApiKey" style="background:#0d6efd; color:#fff;"><i
                                    class="fas fa-key"></i> Save API Key</button>
                            <button class="api-btn api-btn-secondary" id="adClearApiKey"><i
                                    class="fas fa-sign-out-alt"></i> Logout</button>
                        </div>
                    </div>

                    <!-- TorBox Auth (token) -->
                    <div id="tbSection"
                        style="display:none; margin-top:1rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                        <div class="api-input-group">
                            <label for="tbToken">TorBox Token (temporary):</label>
                            <input type="password" id="tbToken" class="api-input" placeholder="Paste TorBox token..." />
                        </div>
                        <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                            <button class="api-btn" id="tbSaveToken" style="background:#0d6efd; color:#fff;"><i
                                    class="fas fa-key"></i> Save Token</button>
                            <button class="api-btn api-btn-secondary" id="tbClearToken"><i
                                    class="fas fa-sign-out-alt"></i> Logout</button>
                        </div>
                        <div style="margin-top:0.25rem; color:#ffc107; font-size:0.9rem;">Token stored locally.</div>
                    </div>

                    <!-- Premiumize Auth (API Key) -->
                    <div id="pmSection"
                        style="display:none; margin-top:1rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                        <div class="api-input-group">
                            <label for="pmApiKey">Premiumize API Key:</label>
                            <input type="password" id="pmApiKey" class="api-input"
                                placeholder="Enter your Premiumize API key..." />
                        </div>
                        <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                            <button class="api-btn" id="pmSaveApiKey" style="background:#0d6efd; color:#fff;"><i
                                    class="fas fa-key"></i> Save API Key</button>
                            <button class="api-btn api-btn-secondary" id="pmClearApiKey"><i
                                    class="fas fa-sign-out-alt"></i> Logout</button>
                        </div>
                        <div style="margin-top:0.25rem; color:#ffc107; font-size:0.9rem;">
                            Get your API key from <a href="https://www.premiumize.me/account" target="_blank"
                                style="color:#0d6efd; text-decoration:underline;">premiumize.me/account</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="settings-section" style="margin-top:1.25rem;">
                <h3>User Interface</h3>
                <div
                    style="margin-top:0.5rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                    <!-- Fullscreen toggle (desktop-only) -->
                    <div class="desktop-only-setting"
                        style="margin-bottom:1rem; padding-bottom:0.75rem; border-bottom:1px solid rgba(255,255,255,0.1);">
                        <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer;">
                            <input type="checkbox" id="fullscreenToggleOld" />
                            <span><i class="fas fa-expand-arrows-alt"
                                    style="margin-right:0.25rem; color:var(--vlc-orange);"></i><strong>Fullscreen
                                    Mode</strong></span>
                        </label>
                        <div
                            style="margin-top:0.25rem; color:var(--secondary); font-size:0.85rem; margin-left:1.85rem;">
                            <i class="fas fa-info-circle"></i> Toggle between fullscreen and windowed mode
                        </div>
                    </div>

                    <div style="display:flex; flex-direction:column; gap:0.75rem;">
                        <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer;">
                            <input type="radio" name="uiMode" value="new" id="uiModeNew" checked />
                            <span><strong>NEW UI</strong> - Modern app-like interface</span>
                        </label>
                        <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer;">
                            <input type="radio" name="uiMode" value="old" id="uiModeOld" />
                            <span><strong>OLD UI</strong> - Classic website layout</span>
                        </label>
                    </div>
                    <div style="margin-top:0.5rem; color:var(--secondary); font-size:0.9rem;">
                        <i class="fas fa-info-circle"></i> Changes will apply immediately after saving
                    </div>

                    <!-- Theme Selector -->
                    <div style="margin-top:1.5rem; padding-top:1rem; border-top:1px solid rgba(255,255,255,0.1);">
                        <label
                            style="display:block; margin-bottom:0.75rem; color:var(--light); font-weight:600; font-size:1rem;">
                            <i class="fas fa-palette" style="margin-right:0.5rem; color:var(--vlc-orange);"></i>
                            Color Theme
                        </label>
                        <select id="themeSelector" class="api-input"
                            style="width:100%; max-width:350px; padding:0.75rem 1rem; background: rgba(255,255,255,0.08); border: 2px solid rgba(255,255,255,0.2); border-radius:10px; color:var(--light); font-size:0.95rem; font-weight:500; cursor:pointer; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); appearance: none; background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27rgba(255,255,255,0.6)%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1.25rem; padding-right: 2.5rem;">
                            <option value="default">Default (Purple Dream)</option>
                            <option value="green-forest">Green Forest</option>
                            <option value="cyberpunk-neon">Cyberpunk Neon</option>
                            <option value="ocean-breeze">Ocean Breeze</option>
                            <option value="cherry-blossom">Cherry Blossom</option>
                            <option value="midnight-dark">Midnight Dark</option>
                            <option value="sunset-orange">Sunset Orange</option>
                        </select>
                        <div style="margin-top:0.5rem; color:var(--secondary); font-size:0.85rem;">
                            <i class="fas fa-info-circle"></i> Choose your preferred color scheme
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nuvio Febbox Token Section -->
            <div class="settings-section" style="margin-top:1.25rem;">
                <h3>
                    <i class="fas fa-stream" style="color: #667eea; margin-right: 0.5rem;"></i>
                    Nuvio Configuration
                </h3>
                <div
                    style="padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                    <div style="margin-bottom: 1rem; color: var(--secondary); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i>
                        Configure your Febbox token for Nuvio streaming (ShowBox). A default token is provided, but you
                        can use your own.
                    </div>

                    <label for="febboxTokenInput" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">
                        Febbox JWT Token (Optional)
                    </label>
                    <input type="text" id="febboxTokenInput"
                        placeholder="Leave empty to use default token or paste your Febbox JWT token here"
                        style="width: 100%; padding: 0.75rem; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: var(--light); font-size: 0.95rem; font-family: monospace; margin-bottom: 1rem;" />

                    <button id="saveFebboxToken" class="btn" style="width: 100%;">
                        <i class="fas fa-save"></i> Save Token
                    </button>

                    <div
                        style="margin-top: 1rem; padding: 0.75rem; background: rgba(103, 126, 234, 0.1); border-left: 3px solid var(--secondary); border-radius: 4px; font-size: 0.85rem;">
                        <i class="fas fa-check-circle" style="color: var(--secondary);"></i> Default token is active.
                        You can continue using Nuvio without adding your own token.
                    </div>
                </div>
            </div>

            <!-- Trakt Integration Section -->
            <div class="settings-section" style="margin-top:1.25rem;">
                <h3>
                    <i class="fas fa-tv" style="color: #ed1c24; margin-right: 0.5rem;"></i>
                    Trakt Integration
                </h3>
                <div
                    style="padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                    <div style="margin-bottom: 1rem; color: var(--secondary); font-size: 0.9rem;">
                        <i class="fas fa-info-circle"></i>
                        Sync your watch history, progress, and manage your watchlist with Trakt.tv
                    </div>

                    <div id="traktNotConnected" style="display: block;">
                        <div style="margin-bottom: 1rem;">
                            <span id="traktStatus" style="color: #dc3545; font-weight: 500;">
                                <i class="fas fa-times-circle"></i> Not connected
                            </span>
                        </div>
                        <div style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap;">
                            <button class="api-btn" id="traktLogin" style="background: #ed1c24; color: #fff;">
                                <i class="fas fa-sign-in-alt"></i> Connect to Trakt
                            </button>
                            <small style="opacity: 0.85;">Authenticate with your Trakt.tv account using a secure device
                                code</small>
                        </div>
                    </div>

                    <div id="traktConnected" style="display: none;">
                        <div style="margin-bottom: 1rem;">
                            <span id="traktConnectedStatus" style="color: #198754; font-weight: 500;">
                                <i class="fas fa-check-circle"></i> Connected as <span id="traktUsername">User</span>
                            </span>
                        </div>
                        <div
                            style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap; margin-bottom: 1rem;">
                            <button class="api-btn" id="traktViewWatchlist" style="background: #0d6efd; color: #fff;">
                                <i class="fas fa-list"></i> View Watchlist
                            </button>
                            <button class="api-btn" id="traktViewHistory" style="background: #6f42c1; color: #fff;">
                                <i class="fas fa-history"></i> View History
                            </button>
                            <button class="api-btn" id="traktViewStats" style="background: #17a2b8; color: #fff;">
                                <i class="fas fa-chart-bar"></i> View Stats
                            </button>
                        </div>
                        <div style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap;">
                            <button class="api-btn api-btn-secondary" id="traktDisconnect">
                                <i class="fas fa-sign-out-alt"></i> Disconnect
                            </button>
                        </div>
                    </div>

                    <!-- Trakt Device Code Panel -->
                    <div id="traktCodePanel"
                        style="display: none; margin-top: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px;">
                        <div
                            style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem;">
                            <div>Device Code:</div>
                            <div id="traktUserCode"
                                style="font-family: monospace; font-weight: 800; background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 6px;">
                                ----</div>
                            <button class="api-btn" id="traktCopyCode"
                                style="padding: 0.4rem 0.6rem; background: #0d6efd; color: #fff;">
                                <i class="fas fa-copy"></i> Copy
                            </button>
                        </div>
                        <div style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;">
                            <div>Authorize at:</div>
                            <a id="traktVerifyUrl" href="#" target="_blank"
                                style="color: #0d6efd; text-decoration: underline;">https://trakt.tv/activate</a>
                            <button class="api-btn" id="traktOpenVerify"
                                style="padding: 0.4rem 0.6rem; background: #0d6efd; color: #fff;">
                                <i class="fas fa-external-link-alt"></i> Open
                            </button>
                            <span id="traktLoginStatus"
                                style="margin-left: auto; font-size: 0.9rem; opacity: 0.9;">Waiting for
                                authorization</span>
                            <button class="api-btn api-btn-secondary" id="traktCancelLogin">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Trakt Settings -->
                    <div id="traktSettings"
                        style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                        <h4 style="margin-bottom: 0.75rem; color: var(--text-primary);">Scrobbling Settings</h4>
                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="display: flex; align-items: center; gap: 0.6rem; cursor: pointer;">
                                <input type="checkbox" id="traktAutoScrobble" checked />
                                <span>Automatically track what I watch</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.6rem; cursor: pointer;">
                                <input type="checkbox" id="traktScrobbleProgress" checked />
                                <span>Sync watch progress</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 0.6rem; cursor: pointer;">
                                <input type="checkbox" id="traktSyncWatchlist" checked />
                                <span>Show Trakt watchlist items in search</span>
                            </label>
                        </div>
                        <div style="margin-top: 0.5rem; color: var(--secondary); font-size: 0.85rem;">
                            <i class="fas fa-info-circle"></i> Your viewing activity will be automatically synchronized
                            with Trakt.tv
                        </div>
                    </div>
                </div>
            </div>

            <div class="settings-buttons">
                <button class="api-btn api-btn-secondary" id="cancelSettings">
                    <i class="fas fa-times"></i>
                    Cancel
                </button>
                <button class="api-btn api-btn-primary" id="saveSettings">
                    <i class="fas fa-save"></i>
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Navigation Arrow (Old UI Only, Home Page Only) -->
    <div class="floating-nav-container" id="floatingNavContainer">
        <button class="floating-nav-btn" id="floatingNavBtn">
            <i class="fas fa-chevron-up" id="floatingNavIcon"></i>
        </button>
        <div class="floating-nav-menu" id="floatingNavMenu">
            <div class="floating-nav-item" data-action="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </div>
            <div class="floating-nav-item" data-action="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="floating-nav-item" data-action="genres">
                <i class="fas fa-layer-group"></i>
                <span>Genres</span>
            </div>
            <div class="floating-nav-item" data-action="my-list">
                <i class="fas fa-list"></i>
                <span>My List</span>
            </div>
            <div class="floating-nav-item" data-action="done-watching">
                <i class="fas fa-check-double"></i>
                <span>Done Watching</span>
            </div>
            <div class="floating-nav-item" data-action="trakt">
                <i class="fas fa-tv"></i>
                <span>Trakt</span>
            </div>
            <div class="floating-nav-item" data-action="livetv">
                <i class="fas fa-broadcast-tower"></i>
                <span>Live TV</span>
            </div>
            <div class="floating-nav-item" data-action="iptv">
                <i class="fas fa-tv"></i>
                <span>IPTV</span>
            </div>
            <div class="floating-nav-item" data-action="books">
                <i class="fas fa-book"></i>
                <span>Books</span>
            </div>
            <div class="floating-nav-item" data-action="audiobooks">
                <i class="fas fa-headphones"></i>
                <span>AudioBooks</span>
            </div>
            <div class="floating-nav-item" data-action="booktorrio">
                <i class="fas fa-book-open"></i>
                <span>BookTorrio</span>
            </div>
            <div class="floating-nav-item" data-action="anime">
                <i class="fas fa-dragon"></i>
                <span>Anime</span>
            </div>
            <div class="floating-nav-item" data-action="comics">
                <i class="fas fa-mask"></i>
                <span>Comics</span>
            </div>
            <div class="floating-nav-item" data-action="manga">
                <i class="fas fa-book-dead"></i>
                <span>Manga</span>
            </div>
            <div class="floating-nav-item" data-action="music">
                <i class="fas fa-music"></i>
                <span>Music</span>
            </div>
            <div class="floating-nav-item" data-action="games-downloader">
                <i class="fas fa-download"></i>
                <span>Games Downloader</span>
            </div>
            <div class="floating-nav-item" data-action="minigames">
                <i class="fas fa-gamepad"></i>
                <span>MiniGames</span>
            </div>
            <div class="floating-nav-item" data-action="downloader">
                <i class="fas fa-download"></i>
                <span>Media Downloader</span>
            </div>
            <div class="floating-nav-item" data-action="trakt">
                <i class="fab fa-trakt"></i>
                <span>Trakt</span>
            </div>
        </div>
    </div>

    <!-- MPV Install Helper Modal removed -->

    <!-- App Container for New UI -->
    <div class="app-container">
        <!-- Sidebar Navigation (New UI Only) -->
        <aside class="app-sidebar" id="appSidebar">
            <div class="sidebar-logo" id="sidebarLogo"
                style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <i class="fas fa-play-circle"></i>
                    <div><span style="color: var(--vlc-orange);">Play</span>Torrio</div>
                </div>
                <button class="sidebar-close-btn" id="sidebarCloseBtn" title="Hide Sidebar"
                    style="background: transparent; border: none; color: rgba(255,255,255,0.6); cursor: pointer; padding: 0.5rem; transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); border-radius: 6px;">
                    <i class="fas fa-times" style="font-size: 1.2rem;"></i>
                </button>
            </div>

            <div class="sidebar-divider"></div>

            <nav class="sidebar-nav">
                <div class="nav-section-title">DISCOVER</div>
                <div class="nav-item active" data-page="home">
                    <i class="fas fa-home"></i>
                    <span>Home</span>
                    <span class="nav-badge">New</span>
                </div>
                <div class="nav-item" data-page="genres">
                    <i class="fas fa-layer-group"></i>
                    <span>Genres</span>
                </div>
                <div class="nav-item" id="customMagnetBtn"
                    onclick="showCustomMagnetModal(); event.stopPropagation(); event.preventDefault(); return false;">
                    <i class="fas fa-magnet"></i>
                    <span>Play Magnet</span>
                </div>
                <div class="nav-item" data-page="my-list">
                    <i class="fas fa-heart"></i>
                    <span>My List</span>
                </div>
                <div class="nav-item" data-page="done-watching">
                    <i class="fas fa-check-circle"></i>
                    <span>Done Watching</span>
                </div>

                <div class="nav-section-title">LIBRARY</div>
                <div class="nav-item" data-page="trakt">
                    <i class="fas fa-tv" style="color: #ed1c24;"></i>
                    <span>Trakt</span>
                    <span class="nav-badge" style="background: #ed1c24;">Sync</span>
                </div>
                <div class="nav-item" data-page="livetv">
                    <i class="fas fa-broadcast-tower" style="color: #10b981;"></i>
                    <span>Live TV</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #10b981, #059669);">Live</span>
                </div>
                <div class="nav-item" data-page="iptv">
                    <i class="fas fa-tv" style="color: #3b82f6;"></i>
                    <span>IPTV</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">M3U8</span>
                </div>
                <div class="nav-item" data-page="books">
                    <i class="fas fa-book" style="color: #f59e0b;"></i>
                    <span>Books</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #f59e0b, #d97706);">Z-Lib</span>
                </div>
                <div class="nav-item" data-page="audiobooks">
                    <i class="fas fa-headphones" style="color: #8b5cf6;"></i>
                    <span>AudioBooks</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">Audio</span>
                </div>
                <div class="nav-item" data-page="booktorrio">
                    <i class="fas fa-book-open" style="color: #06b6d4;"></i>
                    <span>BookTorrio</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #06b6d4, #0891b2);">EPUB</span>
                </div>
                <div class="nav-item" data-page="anime">
                    <i class="fas fa-dragon" style="color: #3b82f6;"></i>
                    <span>Anime</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">Nyaa</span>
                </div>

                <div class="nav-item" data-page="comics">
                    <i class="fas fa-mask" style="color: #f97316;"></i>
                    <span>Comics</span>
                    <span class="nav-badge"
                        style="background: linear-gradient(135deg, #f97316, #ea580c);">ReadComics</span>
                </div>
                <div class="nav-item" data-page="manga">
                    <i class="fas fa-book-reader" style="color: #ec4899;"></i>
                    <span>Manga</span>
                    <span class="nav-badge"
                        style="background: linear-gradient(135deg, #ec4899, #db2777);">WeebCentral</span>
                </div>
                <div class="nav-item" data-page="music">
                    <i class="fas fa-music" style="color: #ec4899;"></i>
                    <span>Music</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #ec4899, #db2777);">HiFi</span>
                </div>
                <div class="nav-item" data-page="games-downloader">
                    <i class="fas fa-download" style="color: #8b5cf6;"></i>
                    <span>Games Downloader</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">PC</span>
                </div>
                <div class="nav-item" data-page="minigames">
                    <i class="fas fa-gamepad" style="color: #10b981;"></i>
                    <span>MiniGames</span>
                    <span class="nav-badge" style="background: linear-gradient(135deg, #10b981, #059669);">Play</span>
                </div>
                <div class="nav-item" data-page="downloader">
                    <i class="fas fa-download" style="color: #a855f7;"></i>
                    <span>Media Downloader</span>
                </div>
                <div class="nav-item" onclick="window.showDiscordModal && window.showDiscordModal()">
                    <i class="fab fa-discord"></i>
                    <span>Discord</span>
                </div>
                <div class="nav-item" id="sidebarClearCache">
                    <i class="fas fa-trash"></i>
                    <span>Clear Cache</span>
                </div>
            </nav>

            <!-- Quick Actions -->
            <div class="sidebar-quick-actions">
                <div class="quick-action-title">QUICK ACTIONS</div>
                <button class="quick-action-btn" id="quickRefresh">
                    <i class="fas fa-sync-alt"></i>
                    <span>Refresh</span>
                </button>
            </div>

            <div class="sidebar-footer">
                <div class="sidebar-user-info">
                    <i class="fas fa-user-circle"></i>
                    <span id="windowsUsername">Local User</span>
                </div>
                <button class="btn btn-primary" id="sidebarSettings" style="width: 100%; margin-top: 0.5rem;">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </aside>

        <!-- Main App Content -->
        <div class="app-main">
            <div class="sidebar-overlay" id="sidebarOverlay"></div>
            <!-- Header -->
            <header>
                <div class="header-container">
                    <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <a class="logo" href="#">
                        <i class="fas fa-play-circle"></i>
                        <span>Play</span> Torrio
                    </a>
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input id="searchInput" placeholder="Search for movies, shows, anime..." type="text" />
                    </div>
                    <div class="user-actions">
                        <!-- Connection Status (NEW UI only) -->
                        <div class="connection-status">
                            <i class="fas fa-circle"></i>
                            <span>Connected</span>
                        </div>
                        <button class="btn btn-outline mobile-hidden" id="doneWatchingBtn">
                            <i class="fas fa-check-circle"></i> <span>Done Watching</span>
                        </button>
                        <button class="btn btn-outline mobile-hidden" id="clearCacheBtn">
                            <i class="fas fa-trash"></i> <span>Clear Cache</span>
                        </button>
                        <!-- Donate button removed -->
                        <button class="btn btn-outline mobile-hidden" id="discordBtn" title="Join Discord Community">
                            <i class="fab fa-discord"></i> <span>Discord</span>
                        </button>
                        <button class="btn btn-outline mobile-hidden" id="genresBtn">
                            <i class="fas fa-layer-group"></i> <span>Genres</span>
                        </button>
                        <button class="btn btn-outline mobile-hidden" id="myListBtn">
                            <i class="fas fa-heart"></i> <span>My List</span>
                        </button>
                        <button class="btn btn-primary" id="donateBtn" title="Support development"
                            style="margin-left: 0.5rem;">
                            <i class="fas fa-heart"></i> <span>Donate</span>
                        </button>
                        <!-- Install MPV button removed -->
                    </div>
                </div>
            </header>

            <!-- Sidebar Toggle Button (shows when sidebar is hidden) -->
            <button class="sidebar-toggle-btn" id="sidebarToggleBtn" title="Show Sidebar">
                <i class="fas fa-bars"></i>
            </button>

            <!-- Main Content -->
            <main>
                <!-- Home Page -->
                <div id="homePage">
                    <!-- Hero Section (New UI Only) -->
                    <div class="hero-section" id="heroSection" style="display: none;">
                        <img class="hero-backdrop" id="heroBackdrop" src="" alt="">
                        <div class="hero-gradient"></div>
                        <div class="hero-content">
                            <h1 class="hero-title" id="heroTitle"></h1>
                            <div class="hero-meta">
                                <div class="hero-rating" id="heroRating" style="display: none;">
                                    <i class="fas fa-star"></i>
                                    <span id="heroRatingValue"></span>
                                </div>
                                <span class="hero-year" id="heroYear"></span>
                                <span class="hero-runtime" id="heroRuntime" style="display: none;"></span>
                            </div>
                            <p class="hero-overview" id="heroOverview"></p>
                            <div class="hero-buttons">
                                <button class="hero-btn hero-btn-primary" id="heroPlayBtn">
                                    <i class="fas fa-play"></i>
                                    Watch Now
                                </button>
                                <button class="hero-btn hero-btn-secondary" id="heroInfoBtn">
                                    <i class="fas fa-info-circle"></i>
                                    More Info
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Back to Home Button (for search results) -->
                    <div id="backToHomeBtn" style="display: none; margin-bottom: 2rem;">
                        <button
                            style="display: flex; align-items: center; gap: 0.75rem; padding: 1rem 2rem; background: linear-gradient(135deg, var(--vlc-orange) 0%, #ff8c42 100%); border: none; border-radius: 12px; color: white; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); box-shadow: 0 4px 15px rgba(255, 111, 0, 0.3);"
                            onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(255, 111, 0, 0.5)'"
                            onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(255, 111, 0, 0.3)'">
                            <i class="fas fa-arrow-left" style="font-size: 1.2rem;"></i>
                            <span>Back to Home</span>
                        </button>
                    </div>

                    <div class="categories">
                        <div class="category active" data-category="all">
                            <i class="fas fa-th"></i> All
                        </div>
                        <div class="category" data-category="movie">
                            <i class="fas fa-film"></i> Movies
                        </div>
                        <div class="category" data-category="tv">
                            <i class="fas fa-tv"></i> TV Shows
                        </div>
                    </div>

                    <!-- Content Sliders (New UI Only) -->
                    <div id="slidersContainer" style="display: none;">
                        <!-- Continue Watching Slider (dynamic - only shows if items exist) -->
                        <div class="slider-section" id="continueWatchingSection" style="display: none;">
                            <div class="slider-header">
                                <h2 class="slider-title">
                                    <i class="fas fa-clock"></i>
                                    Continue Watching
                                </h2>
                                <div class="slider-nav">
                                    <button class="slider-arrow slider-arrow-left" data-slider="continue">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="slider-arrow slider-arrow-right" data-slider="continue">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="slider-container">
                                <div class="slider-track" id="continueWatchingSlider"></div>
                            </div>
                        </div>

                        <!-- Trending Slider -->
                        <div class="slider-section">
                            <div class="slider-header">
                                <h2 class="slider-title">
                                    <i class="fas fa-fire"></i>
                                    Trending Now
                                </h2>
                                <div class="slider-nav">
                                    <button class="slider-arrow slider-arrow-left" data-slider="trending">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="slider-arrow slider-arrow-right" data-slider="trending">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="slider-container">
                                <div class="slider-track" id="trendingSlider"></div>
                            </div>
                        </div>

                        <!-- Popular Movies Slider -->
                        <div class="slider-section">
                            <div class="slider-header">
                                <h2 class="slider-title">
                                    <i class="fas fa-film"></i>
                                    Popular Movies
                                </h2>
                                <div class="slider-nav">
                                    <button class="slider-arrow slider-arrow-left" data-slider="popular">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="slider-arrow slider-arrow-right" data-slider="popular">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="slider-container">
                                <div class="slider-track" id="popularSlider"></div>
                            </div>
                        </div>

                        <!-- Top Rated Slider -->
                        <div class="slider-section">
                            <div class="slider-header">
                                <h2 class="slider-title">
                                    <i class="fas fa-star"></i>
                                    Top Rated
                                </h2>
                                <div class="slider-nav">
                                    <button class="slider-arrow slider-arrow-left" data-slider="toprated">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="slider-arrow slider-arrow-right" data-slider="toprated">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="slider-container">
                                <div class="slider-track" id="topratedSlider"></div>
                            </div>
                        </div>

                        <!-- TV Shows Slider -->
                        <div class="slider-section">
                            <div class="slider-header">
                                <h2 class="slider-title">
                                    <i class="fas fa-tv"></i>
                                    Popular TV Shows
                                </h2>
                                <div class="slider-nav">
                                    <button class="slider-arrow slider-arrow-left" data-slider="tvshows">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <button class="slider-arrow slider-arrow-right" data-slider="tvshows">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="slider-container">
                                <div class="slider-track" id="tvshowsSlider"></div>
                            </div>
                        </div>
                    </div>

                    <div class="movies-grid" id="moviesGrid"
                        style="content-visibility:auto; contain-intrinsic-size: 1000px 1000px;">
                        <!-- Movie cards will be loaded here -->
                    </div>
                    <div class="loading" id="loadingIndicator">
                        <i class="fas fa-spinner"></i> Loading more content...
                    </div>
                </div>

                <!-- Music Page -->
                <div id="music-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-music" style="color: #ec4899;"></i> <span>Music</span>
                            </h2>
                            <p class="page-subtitle">Search and stream high-quality music</p>
                        </div>
                        <div class="page-actions">
                            <button class="action-btn" id="music-my-btn" title="Open My Music">
                                <i class="fas fa-heart"></i>
                                <span>My Music</span>
                            </button>
                            <button class="action-btn" id="music-my-albums-btn" title="Open My Albums">
                                <i class="fas fa-compact-disc"></i>
                                <span>My Albums</span>
                            </button>
                            <button class="action-btn" id="music-playlists-btn" title="Open Playlists">
                                <i class="fas fa-list"></i>
                                <span>Playlists</span>
                            </button>
                            <button class="action-btn" id="music-downloaded-btn" title="Open Downloaded Music">
                                <i class="fas fa-download"></i>
                                <span>Downloaded</span>
                            </button>

                        </div>
                    </div>

                    <div class="page-content">
                        <!-- Search Section -->
                        <div class="books-search-section">
                            <div class="books-search-container">
                                <div class="books-search-bar">
                                    <i class="fas fa-search books-search-icon"></i>
                                    <input type="text" id="music-search-input"
                                        placeholder="Search for songs, artists, or albums..." autocomplete="off" />
                                    <button id="music-search-btn" class="books-search-button">
                                        <i class="fas fa-search"></i>
                                        Search
                                    </button>
                                    <button id="music-album-search-btn" class="books-search-button"
                                        style="margin-left:0.5rem; background: linear-gradient(135deg, #38bdf8, #0ea5e9);">
                                        <i class="fas fa-compact-disc"></i>
                                        Albums
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="music-loading" class="books-loading" style="display: none;">
                            <div class="books-loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <p>Searching HiFi...</p>
                        </div>

                        <!-- Empty State -->
                        <div id="music-empty" class="books-empty">
                            <div class="books-empty-icon">
                                <i class="fas fa-music"></i>
                            </div>
                            <h3>Welcome to HiFi Music</h3>
                            <p>Search for any song, artist, or album to get started.</p>
                        </div>

                        <!-- Results Section -->
                        <div id="music-results" class="books-results" style="display: none;">
                            <div class="books-results-header">
                                <h3 id="music-results-title">Search Results</h3>
                                <div id="music-results-count" class="books-results-count"></div>
                            </div>
                            <div id="music-results-grid" class="books-results-grid">
                                <!-- Results will be populated here -->
                            </div>
                        </div>

                        <!-- Albums Results Section -->
                        <div id="music-albums" class="books-results" style="display:none;">
                            <div class="books-results-header">
                                <h3 id="music-albums-title"><i class="fas fa-compact-disc" style="color:#38bdf8"></i>
                                    Album Results</h3>
                                <div id="music-albums-count" class="books-results-count"></div>
                            </div>
                            <div id="music-albums-grid" class="books-results-grid"></div>
                        </div>

                        <!-- Album View (open a specific album) -->
                        <div id="music-album-view" class="books-results" style="display:none;">
                            <div class="books-results-header" style="align-items:center; gap:1rem; flex-wrap:wrap;">
                                <div style="display:flex; align-items:center; gap:0.75rem;">
                                    <img id="album-view-cover" src="" alt="Album Cover"
                                        style="width:68px; height:68px; border-radius:10px; object-fit:cover; border:1px solid rgba(255,255,255,0.1);">
                                    <div>
                                        <h3 id="album-view-title"
                                            style="margin:0; display:flex; align-items:center; gap:0.5rem;"></h3>
                                        <div id="album-view-meta" style="color:#9ca3af; font-size:0.9rem;"></div>
                                    </div>
                                </div>
                                <button id="album-play-all-btn" class="action-btn"
                                    style="background: linear-gradient(135deg, #ec4899, #a855f7);">
                                    <i class="fas fa-play"></i>
                                    <span>Play All</span>
                                </button>
                                <button id="album-save-all-btn" class="action-btn"
                                    title="Save all tracks to a playlist">
                                    <i class="fas fa-plus"></i>
                                    <span>Save All</span>
                                </button>
                                <button id="album-shuffle-btn" class="action-btn" title="Shuffle and play this album">
                                    <i class="fas fa-random"></i>
                                    <span>Shuffle</span>
                                </button>
                                <button id="album-close-btn" class="playlist-close-btn" style="margin-left:auto;">
                                    <i class="fas fa-times"></i>
                                    <span>Close Album</span>
                                </button>
                            </div>
                            <div id="album-tracks" class="album-tracks-list"
                                style="display:flex; flex-direction:column; gap:0.5rem;"></div>
                        </div>

                        <!-- My Albums Section -->
                        <div id="my-albums" class="books-results" style="display:none;">
                            <div class="books-results-header">
                                <h3><i class="fas fa-compact-disc" style="color:#38bdf8"></i> My Albums</h3>
                                <div id="my-albums-count" class="books-results-count"></div>
                            </div>
                            <div id="my-albums-grid" class="books-results-grid"></div>
                            <div id="my-albums-empty" class="books-empty" style="display:none;">
                                <div class="books-empty-icon"><i class="fas fa-compact-disc"></i></div>
                                <h3>No saved albums yet</h3>
                                <p>Click the heart on any album to add it here.</p>
                            </div>
                        </div>

                        <!-- My Music Section -->
                        <div id="my-music" class="books-results" style="display: none;">
                            <div class="books-results-header" style="align-items:center; gap:1rem;">
                                <h3><i class="fas fa-heart" style="color:#ec4899"></i> My Music</h3>
                                <div id="my-music-count" class="books-results-count"></div>
                                <button id="my-music-play-all-btn" class="action-btn"
                                    style="margin-left:auto; background: linear-gradient(135deg, #ec4899, #a855f7);">
                                    <i class="fas fa-play"></i>
                                    <span>Play All</span>
                                </button>
                                <button id="my-music-shuffle-btn" class="action-btn" title="Shuffle and play My Music">
                                    <i class="fas fa-random"></i>
                                    <span>Shuffle</span>
                                </button>
                            </div>
                            <div id="my-music-grid" class="books-results-grid"></div>
                            <div id="my-music-empty" class="books-empty" style="display:none;">
                                <div class="books-empty-icon"><i class="fas fa-heart"></i></div>
                                <h3>No saved tracks yet</h3>
                                <p>Click the heart on any track to add it here for quick access.</p>
                            </div>
                        </div>

                        <!-- Playlists Section -->
                        <div id="music-playlists" class="books-results" style="display: none;">
                            <div class="books-results-header" style="gap: 1rem; align-items: center;">
                                <h3><i class="fas fa-list" style="color:#38bdf8"></i> Playlists</h3>
                                <div style="flex:1"></div>
                                <input id="playlist-name-input" placeholder="New playlist name"
                                    style="padding:0.5rem 0.75rem; border-radius:8px; background:var(--surface); border:1px solid var(--border); color:var(--light); width:220px;" />
                                <button class="action-btn" id="playlist-import-btn"
                                    title="Import playlist from JSON file"><i
                                        class="fas fa-file-import"></i><span>Import</span></button>
                                <button class="action-btn" id="playlist-create-btn"><i
                                        class="fas fa-plus"></i><span>Create</span></button>
                            </div>
                            <div id="playlists-list" class="books-results-grid"></div>
                            <div id="playlists-empty" class="books-empty" style="display:none;">
                                <div class="books-empty-icon"><i class="fas fa-list"></i></div>
                                <h3>No playlists yet</h3>
                                <p>Create a playlist to get started.</p>
                            </div>
                        </div>

                        <!-- Downloaded Music Section -->
                        <div id="music-downloaded" class="books-results" style="display: none;">
                            <div class="books-results-header" style="align-items:center; gap:1rem;">
                                <h3><i class="fas fa-download" style="color:#10b981"></i> Downloaded Music</h3>
                                <div id="music-downloaded-count" class="books-results-count"></div>
                                <div style="flex:1"></div>
                                <button class="action-btn" id="downloaded-play-all-btn"
                                    style="background: linear-gradient(135deg, #ec4899, #a855f7); display:none;">
                                    <i class="fas fa-play"></i><span>Play All</span>
                                </button>
                                <button class="action-btn" id="downloaded-shuffle-btn"
                                    title="Shuffle and play all downloaded tracks" style="display:none;">
                                    <i class="fas fa-random"></i><span>Shuffle</span>
                                </button>
                            </div>
                            <div id="music-downloaded-grid" class="books-results-grid"></div>
                            <div id="music-downloaded-empty" class="books-empty" style="display:none;">
                                <div class="books-empty-icon"><i class="fas fa-download"></i></div>
                                <h3>No downloaded tracks yet</h3>
                                <p>Download tracks to listen offline.</p>
                            </div>
                        </div>


                    </div>
                </div>

                <!-- Download Progress Modal -->
                <div id="music-download-modal" class="books-reader-modal"
                    style="display:none; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); align-items: center; justify-content: center; padding: 0.75rem;">
                    <div class="books-reader-content"
                        style="max-width:300px; width:90%; margin: 0 auto; border:2px solid rgba(16,185,129,0.4); border-radius:12px; overflow:hidden; box-shadow: 0 12px 36px rgba(0,0,0,0.55);">
                        <div
                            style="background: linear-gradient(135deg, rgba(16,185,129,0.15), rgba(5,150,105,0.15)); border-bottom: 1px solid rgba(16,185,129,0.2); padding: 0.6rem 0.85rem; display: flex; align-items: center; justify-content: space-between;">
                            <div style="display:flex; align-items:center; gap:0.4rem;">
                                <i class="fas fa-download" style="color:#10b981; font-size:0.85rem;"></i>
                                <span style="font-size:0.85rem; font-weight:600; color:var(--light);">Downloading</span>
                            </div>
                            <div style="display:flex; gap:0.25rem;">
                                <button id="music-download-minimize-btn"
                                    style="background:none; border:none; color:#38bdf8; cursor:pointer; padding:0.2rem 0.4rem; font-size:0.85rem; border-radius:4px; transition: background 0.2s;"
                                    onmouseover="this.style.background='rgba(56,189,248,0.1)'"
                                    onmouseout="this.style.background='none'" title="Minimize">
                                    <i class="fas fa-minus"></i>
                                </button>
                                <button id="music-download-cancel-btn"
                                    style="background:none; border:none; color:#ef4444; cursor:pointer; padding:0.2rem 0.4rem; font-size:0.85rem; border-radius:4px; transition: background 0.2s;"
                                    onmouseover="this.style.background='rgba(239,68,68,0.1)'"
                                    onmouseout="this.style.background='none'" title="Cancel">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div style="padding:0.85rem;">
                            <div id="music-download-info" style="margin-bottom:0.6rem;">
                                <div id="music-download-song-name"
                                    style="font-weight:600; color:var(--light); margin-bottom:0.1rem; font-size:0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                </div>
                                <div id="music-download-artist-name"
                                    style="color:#10b981; font-size:0.75rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                </div>
                            </div>
                            <div
                                style="width:100%; height:5px; background: rgba(16,185,129,0.15); border-radius:2.5px; overflow:hidden; border: 1px solid rgba(16,185,129,0.2);">
                                <div id="music-download-progress-fill"
                                    style="height:100%; width:0%; background: linear-gradient(90deg, #10b981, #059669, #10b981); background-size: 200% 100%; animation: shimmer 2.5s cubic-bezier(0.45, 0, 0.55, 1) infinite; transition: width 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);">
                                </div>
                            </div>
                            <div id="music-download-status"
                                style="margin-top:0.4rem; text-align:center; color:var(--secondary); font-size:0.75rem;">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Minimized Download Progress (in notification area) -->
                <div id="music-download-minimized"
                    style="display:none; position:fixed; bottom:20px; right:20px; background:rgba(26,26,46,0.95); border:2px solid rgba(16,185,129,0.4); border-radius:10px; padding:0.75rem 1rem; min-width:280px; box-shadow: 0 8px 24px rgba(0,0,0,0.4); z-index:9999;">
                    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:0.5rem;">
                        <div style="display:flex; align-items:center; gap:0.5rem;">
                            <i class="fas fa-download" style="color:#10b981; font-size:0.9rem;"></i>
                            <span style="font-size:0.85rem; font-weight:600; color:var(--light);">Downloading...</span>
                        </div>
                        <div style="display:flex; gap:0.25rem;">
                            <button id="music-download-restore-btn"
                                style="background:none; border:none; color:#38bdf8; cursor:pointer; padding:0.2rem 0.4rem; font-size:0.85rem; border-radius:4px; transition: background 0.2s;"
                                onmouseover="this.style.background='rgba(56,189,248,0.1)'"
                                onmouseout="this.style.background='none'" title="Restore">
                                <i class="fas fa-window-maximize"></i>
                            </button>
                            <button id="music-download-cancel-minimized-btn"
                                style="background:none; border:none; color:#ef4444; cursor:pointer; padding:0.2rem 0.4rem; font-size:0.85rem; border-radius:4px; transition: background 0.2s;"
                                onmouseover="this.style.background='rgba(239,68,68,0.1)'"
                                onmouseout="this.style.background='none'" title="Cancel">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div id="music-download-minimized-info" style="margin-bottom:0.5rem;">
                        <div id="music-download-minimized-song"
                            style="font-weight:600; color:var(--light); font-size:0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        </div>
                        <div id="music-download-minimized-artist"
                            style="color:#10b981; font-size:0.75rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                        </div>
                    </div>
                    <div
                        style="width:100%; height:5px; background: rgba(16,185,129,0.15); border-radius:2.5px; overflow:hidden; border: 1px solid rgba(16,185,129,0.2);">
                        <div id="music-download-minimized-progress"
                            style="height:100%; width:0%; background: linear-gradient(90deg, #10b981, #059669, #10b981); background-size: 200% 100%; animation: shimmer 2.5s cubic-bezier(0.45, 0, 0.55, 1) infinite; transition: width 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94);">
                        </div>
                    </div>
                    <div id="music-download-minimized-status"
                        style="margin-top:0.4rem; text-align:center; color:var(--secondary); font-size:0.75rem;"></div>
                    <div id="music-download-queue-info"
                        style="margin-top:0.5rem; padding-top:0.5rem; border-top:1px solid rgba(16,185,129,0.2); display:none;">
                        <div
                            style="font-size:0.75rem; color:var(--secondary); display:flex; align-items:center; justify-content:space-between;">
                            <span><i class="fas fa-list" style="color:#10b981; margin-right:0.3rem;"></i>Queue:</span>
                            <span id="music-download-queue-count" style="color:#10b981; font-weight:600;">0</span>
                        </div>
                    </div>
                </div>

                <!-- Music Player Modal (transparent overlay + custom controls) -->
                <div id="music-player-modal" class="books-reader-modal"
                    style="display: none; background: rgba(0,0,0,0.85); backdrop-filter: blur(10px);">
                    <div class="books-reader-content"
                        style="border:2px solid #ec4899; border-radius: 16px; max-width:560px; width:90%;">
                        <div class="books-reader-header">
                            <button id="music-player-back" class="books-reader-back-btn">
                                <i class="fas fa-arrow-left"></i>
                                Back
                            </button>
                            <h3 id="music-player-title">Now Playing</h3>
                            <button id="music-player-minimize" class="books-reader-back-btn"
                                style="margin-left: auto; margin-right: 0;">
                                <i class="fas fa-minus"></i>
                                Minimize
                            </button>
                        </div>
                        <div class="books-reader-frame-container"
                            style="display:flex; flex-direction:column; align-items:center; justify-content:center; padding: 1.75rem; background: linear-gradient(135deg, rgba(26,26,46,0.95), rgba(22,33,62,0.95));">
                            <img id="music-player-cover" src="" alt="Album Cover"
                                style="width: 240px; height: 240px; object-fit: cover; border-radius: 12px; margin-bottom: 1rem; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);">
                            <h2 id="music-player-song-title"
                                style="color: var(--light); margin-bottom: 0.25rem; text-align: center; font-size:1.3rem;">
                            </h2>
                            <p id="music-player-artist"
                                style="color: #ec4899; font-size: 1rem; margin-bottom: 1rem; text-align: center;"></p>

                            <!-- Custom Controls -->
                            <div style="width:100%; max-width:520px;">
                                <div class="audio-progress-bar" id="music-progress-bar"
                                    style="width:100%; height:6px; background: rgba(255,255,255,0.12); border-radius:3px; cursor:pointer; overflow:hidden;">
                                    <div class="audio-progress-fill" id="music-progress-fill"
                                        style="height:100%; width:0%; background: linear-gradient(90deg, #ec4899, #a855f7);">
                                    </div>
                                </div>
                                <div class="audio-time-display"
                                    style="display:flex; justify-content:space-between; color:#9ca3af; font-size:0.85rem; margin-top:0.5rem;">
                                    <span id="music-current-time">0:00</span>
                                    <span id="music-total-time">0:00</span>
                                </div>
                                <div class="audio-controls-buttons"
                                    style="display:flex; justify-content:center; align-items:center; gap:1rem; margin-top:1rem; flex-wrap:wrap;">
                                    <button class="audio-control-btn" id="music-prev-track-btn" title="Previous track"
                                        style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:42px; height:42px; display:flex; align-items:center; justify-content:center;"><i
                                            class="fas fa-step-backward"></i></button>
                                    <button class="audio-control-btn" id="music-backward-btn" title="Back 10s"
                                        style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:46px; height:46px; display:flex; align-items:center; justify-content:center;"><i
                                            class="fas fa-backward"></i></button>
                                    <button class="audio-control-btn" id="music-play-pause-btn" title="Play/Pause"
                                        style="background: linear-gradient(135deg, #ec4899, #a855f7); color:white; border:none; border-radius:50%; width:56px; height:56px; display:flex; align-items:center; justify-content:center; font-size:1.1rem;"><i
                                            class="fas fa-play"></i></button>
                                    <button class="audio-control-btn" id="music-forward-btn" title="Forward 10s"
                                        style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:46px; height:46px; display:flex; align-items:center; justify-content:center;"><i
                                            class="fas fa-forward"></i></button>
                                    <button class="audio-control-btn" id="music-next-track-btn" title="Next track"
                                        style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:42px; height:42px; display:flex; align-items:center; justify-content:center;"><i
                                            class="fas fa-step-forward"></i></button>
                                </div>
                                <div
                                    style="display:flex; justify-content:center; align-items:center; margin-top:0.5rem;">
                                    <button id="music-autoplay-toggle" title="Autoplay next track"
                                        style="display:inline-flex; align-items:center; gap:0.4rem; padding:0.35rem 0.7rem; border-radius:999px; background: rgba(236,72,153,0.08); border:1px solid rgba(236,72,153,0.35); color:#ec4899; font-weight:600;">
                                        <i class="fas fa-play-circle"></i>
                                        <span>Autoplay Next</span>
                                    </button>
                                </div>
                                <div class="audio-volume-control"
                                    style="display:flex; align-items:center; gap:0.75rem; margin-top:1rem;">
                                    <i class="fas fa-volume-up" id="music-volume-icon" style="color:#ec4899;"></i>
                                    <div class="audio-volume-slider" id="music-volume-slider"
                                        style="flex:1; height:4px; background: rgba(255,255,255,0.12); border-radius:2px; cursor:pointer;">
                                        <div class="audio-volume-fill" id="music-volume-fill"
                                            style="height:100%; width:100%; background:#ec4899;"></div>
                                    </div>
                                </div>
                            </div>

                            <audio id="music-player-audio" style="display:none;" crossorigin="anonymous"
                                preload="metadata"></audio>
                        </div>
                    </div>
                </div>

                <!-- Mini Music Player (Notification Style) -->
                <div id="music-mini-player"
                    style="display: none; position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 10000; background: linear-gradient(135deg, rgba(26,26,46,0.98), rgba(22,33,62,0.98)); border: 2px solid #ec4899; border-radius: 12px; padding: 1rem; box-shadow: 0 10px 40px rgba(0,0,0,0.6); backdrop-filter: blur(10px); width: 340px;">
                    <div
                        style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 0.75rem;">
                        <h4 id="mini-player-song-title"
                            style="color: var(--light); margin: 0; font-size: 0.95rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1;">
                        </h4>
                        <button id="music-player-maximize"
                            style="background: rgba(236,72,153,0.1); border: 1px solid rgba(236,72,153,0.3); color: #ec4899; border-radius: 6px; padding: 0.4rem 0.6rem; cursor: pointer; margin-left: 0.5rem;">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                    <p id="mini-player-artist"
                        style="color: #ec4899; font-size: 0.85rem; margin: 0 0 0.75rem 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    </p>

                    <!-- Mini Progress Bar -->
                    <div class="audio-progress-bar" id="mini-progress-bar"
                        style="width:100%; height:4px; background: rgba(255,255,255,0.12); border-radius:2px; cursor:pointer; overflow:hidden; margin-bottom: 0.5rem;">
                        <div class="audio-progress-fill" id="mini-progress-fill"
                            style="height:100%; width:0%; background: linear-gradient(90deg, #ec4899, #a855f7);"></div>
                    </div>

                    <!-- Mini Time Display -->
                    <div
                        style="display:flex; justify-content:space-between; color:#9ca3af; font-size:0.75rem; margin-bottom:0.75rem;">
                        <span id="mini-current-time">0:00</span>
                        <span id="mini-total-time">0:00</span>
                    </div>

                    <!-- Mini Controls -->
                    <div style="display:flex; justify-content:center; align-items:center; gap:0.75rem;">
                        <button class="audio-control-btn" id="mini-prev-track-btn"
                            style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:36px; height:36px; display:flex; align-items:center; justify-content:center; font-size:0.85rem;"><i
                                class="fas fa-step-backward"></i></button>
                        <button class="audio-control-btn" id="mini-backward-btn"
                            style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:36px; height:36px; display:flex; align-items:center; justify-content:center; font-size:0.85rem;"><i
                                class="fas fa-backward"></i></button>
                        <button class="audio-control-btn" id="mini-play-pause-btn"
                            style="background: linear-gradient(135deg, #ec4899, #a855f7); color:white; border:none; border-radius:50%; width:44px; height:44px; display:flex; align-items:center; justify-content:center; font-size:1rem;"><i
                                class="fas fa-play"></i></button>
                        <button class="audio-control-btn" id="mini-forward-btn"
                            style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:36px; height:36px; display:flex; align-items:center; justify-content:center; font-size:0.85rem;"><i
                                class="fas fa-forward"></i></button>
                        <button class="audio-control-btn" id="mini-next-track-btn"
                            style="background: rgba(236,72,153,0.1); border:1px solid rgba(236,72,153,0.3); color:#ec4899; border-radius:50%; width:36px; height:36px; display:flex; align-items:center; justify-content:center; font-size:0.85rem;"><i
                                class="fas fa-step-forward"></i></button>
                    </div>
                </div>

                <!-- Playlist Chooser Modal -->
                <div id="music-playlist-chooser" class="books-reader-modal"
                    style="display:none; background: rgba(0,0,0,0.7); backdrop-filter: blur(6px);">
                    <div class="books-reader-content"
                        style="max-width:520px; width:90%; border:1px solid rgba(56,189,248,0.35); border-radius:14px; overflow:hidden;">
                        <div class="books-reader-header">
                            <button id="playlist-chooser-back" class="books-reader-back-btn">
                                <i class="fas fa-arrow-left"></i>
                                Back
                            </button>
                            <h3>Add to Playlist</h3>
                        </div>
                        <div style="padding:1rem; display:flex; flex-direction:column; gap:0.75rem;">
                            <div style="display:flex; gap:0.5rem;">
                                <input id="playlist-chooser-new-name" placeholder="New playlist name"
                                    style="flex:1; padding:0.6rem 0.8rem; border-radius:8px; background:var(--surface); border:1px solid var(--border); color:var(--light);" />
                                <button id="playlist-chooser-create" class="action-btn"><i
                                        class="fas fa-plus"></i><span>Create</span></button>
                            </div>
                            <div id="playlist-chooser-empty" class="books-empty" style="display:none; margin:0;">
                                <div class="books-empty-icon"><i class="fas fa-list"></i></div>
                                <h3>No playlists yet</h3>
                                <p>Create one above, then add your track.</p>
                            </div>
                            <div id="playlist-chooser-list" class="books-results-grid"
                                style="grid-template-columns: 1fr; gap:0.5rem;"></div>
                        </div>
                    </div>
                </div>

                <!-- Genres Page -->
                <div id="genresPage" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-layer-group"></i> Genres
                    </h2>
                    <div class="genre-grid" id="genresGrid">
                        <!-- Genre boxes will be loaded here -->
                    </div>
                    <div class="loading" id="genresLoading" style="display:none;">
                        <i class="fas fa-spinner"></i> Loading genres...
                    </div>
                </div>

                <!-- Genre Details Page -->
                <div id="genreDetailsPage" style="display: none;">
                    <div class="genre-header">
                        <h2 class="section-title" id="genreHeaderTitle">
                            <i class="fas fa-tags"></i> <span id="genreTitle">Genre</span>
                        </h2>
                        <div class="genre-controls">
                            <button class="toggle-btn" id="toggleMovies">Movies</button>
                            <button class="toggle-btn" id="toggleTV">TV Shows</button>
                        </div>
                    </div>
                    <div class="genre-results-grid" id="genreResultsGrid">
                        <!-- Genre media items will be loaded here -->
                    </div>
                    <div class="loading" id="genreLoadingIndicator" style="display:none;">
                        <i class="fas fa-spinner"></i> Loading more...
                    </div>
                    <div class="loading" id="genreEmptyMessage" style="display:none;">
                        <i class="fas fa-info-circle"></i> No results found for this selection.
                    </div>
                </div>

                <!-- My List Page -->
                <div id="myListPage" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-heart"></i> <span>My List</span>
                            </h2>
                            <p class="page-subtitle">Your personal collection of movies and shows</p>
                        </div>
                        <div class="page-actions">
                            <button class="action-btn" id="clearMyListBtn">
                                <i class="fas fa-trash"></i>
                                <span>Clear All</span>
                            </button>
                        </div>
                    </div>

                    <div class="movies-grid" id="myListGrid">
                        <!-- My list items will be loaded here -->
                    </div>
                    <div class="loading" id="myListLoading" style="display:none;">
                        <i class="fas fa-spinner"></i> Loading your list...
                    </div>
                    <div class="loading" id="myListEmpty" style="display:none;">
                        <i class="fas fa-heart-broken"></i> Your list is empty. Start adding movies and shows!
                    </div>
                </div>

                <!-- Done Watching Page -->
                <div id="doneWatchingPage" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-check-circle"></i> <span>Done Watching</span>
                            </h2>
                            <p class="page-subtitle">Movies and shows you've finished watching</p>
                        </div>
                        <div class="page-actions">
                            <button class="action-btn" id="clearDoneWatchingBtn">
                                <i class="fas fa-trash"></i>
                                <span>Clear All</span>
                            </button>
                        </div>
                    </div>

                    <div class="movies-grid" id="doneWatchingGrid">
                        <!-- Done watching items will be loaded here -->
                    </div>
                    <div class="loading" id="doneWatchingLoading" style="display:none;">
                        <i class="fas fa-spinner"></i> Loading your completed items...
                    </div>
                    <div class="loading" id="doneWatchingEmpty" style="display:none;">
                        <i class="fas fa-check-circle"></i> No completed items yet. Mark movies and shows as done when
                        you finish watching!
                    </div>
                </div>

                <!-- Trakt Page -->
                <div id="trakt-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-tv" style="color: #ed1c24;"></i> <span>Trakt Integration</span>
                            </h2>
                            <p class="page-subtitle">Sync your watching activity with Trakt.tv</p>
                        </div>
                    </div>

                    <div class="trakt-container">
                        <!-- Connection Status Card -->
                        <div class="trakt-card trakt-status-card">
                            <div class="trakt-card-header">
                                <h3><i class="fas fa-wifi"></i> Connection Status</h3>
                            </div>
                            <div class="trakt-card-body">
                                <div id="traktPageNotConnected" class="trakt-status-section">
                                    <div id="traktStatusIndicator" class="trakt-status-indicator disconnected">
                                        <i class="fas fa-times-circle"></i>
                                        <span>Not Connected</span>
                                    </div>
                                    <p id="traktStatusDescription" class="trakt-description">
                                        Connect your Trakt.tv account to automatically track your watching activity,
                                        sync progress, and manage your watchlist.
                                    </p>
                                    <div id="traktStatusActions">
                                        <button id="traktAuthenticateBtn" class="trakt-btn trakt-btn-primary">
                                            <i class="fas fa-link"></i>Connect to Trakt
                                        </button>
                                    </div>
                                </div>

                                <div id="traktPageConnected" class="trakt-status-section" style="display: none;">
                                    <div class="trakt-status-indicator connected">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Connected as <strong id="traktPageUsername">User</strong></span>
                                    </div>
                                    <p class="trakt-description">
                                        Your account is connected and actively syncing. All your watching activity
                                        is being tracked automatically.
                                    </p>
                                    <div class="trakt-user-actions">
                                        <button class="trakt-btn trakt-btn-secondary" id="traktPageDisconnect">
                                            <i class="fas fa-sign-out-alt"></i> Disconnect
                                        </button>
                                        <button class="trakt-btn trakt-btn-info" id="traktPageRefresh">
                                            <i class="fas fa-sync-alt"></i> Refresh Status
                                        </button>
                                        <button class="trakt-btn trakt-btn-primary" id="traktPageResyncLibrary">
                                            <i class="fas fa-cloud-download-alt"></i> Re-sync Library
                                        </button>
                                        <button class="trakt-btn trakt-btn-info" id="traktPageStats">
                                            <i class="fas fa-chart-bar"></i> View Statistics
                                        </button>
                                    </div>
                                </div>

                                <!-- Device Code Panel -->
                                <div id="traktDeviceCodePanel" class="trakt-device-code" style="display: none;">
                                    <div class="trakt-code-header">
                                        <h4><i class="fas fa-mobile-alt"></i> Device Authorization</h4>
                                    </div>
                                    <div class="trakt-code-content">
                                        <div class="trakt-code-display">
                                            <label>Device Code:</label>
                                            <div class="trakt-code-value">
                                                <span id="traktPageUserCode">----</span>
                                                <button id="traktCopyCodeBtn" class="trakt-copy-btn">
                                                    <i class="fas fa-copy"></i>
                                                </button>
                                            </div>
                                            <label>Visit URL:</label>
                                            <div class="trakt-code-value">
                                                <span id="traktPageVerificationUrl">https://trakt.tv/activate</span>
                                            </div>
                                        </div>
                                        <div class="trakt-verify-section">
                                            <p>Visit the URL above and enter the device code</p>
                                            <div class="trakt-verify-actions">
                                                <button id="traktOpenUrlBtn" class="trakt-btn trakt-btn-primary">
                                                    <i class="fas fa-external-link-alt"></i> Open Trakt URL
                                                </button>
                                                <button id="traktVerifyDeviceBtn" class="trakt-btn trakt-btn-secondary">
                                                    <i class="fas fa-check"></i> Verify Code
                                                </button>
                                            </div>
                                            <div id="traktDeviceCodeStatus" class="trakt-status-message">
                                                <span>Waiting for authorization...</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions Grid -->
                        <div class="trakt-actions-grid">
                            <div class="trakt-card trakt-action-card" data-action="watchlist">
                                <div class="trakt-action-icon">
                                    <i class="fas fa-list"></i>
                                </div>
                                <div class="trakt-action-content">
                                    <h4>Your Watchlist</h4>
                                    <p>View and manage your Trakt watchlist</p>
                                    <span class="trakt-action-count">0</span>
                                </div>
                            </div>

                            <div class="trakt-card trakt-action-card" data-action="history">
                                <div class="trakt-action-icon">
                                    <i class="fas fa-history"></i>
                                </div>
                                <div class="trakt-action-content">
                                    <h4>Watch History</h4>
                                    <p>See your recently watched content</p>
                                    <span class="trakt-action-count">0</span>
                                </div>
                            </div>

                            <div class="trakt-card trakt-action-card" data-action="collection">
                                <div class="trakt-action-icon">
                                    <i class="fas fa-collection"></i>
                                </div>
                                <div class="trakt-action-content">
                                    <h4>Collection</h4>
                                    <p>Your collected movies and shows</p>
                                    <span class="trakt-action-count">0</span>
                                </div>
                            </div>

                            <div class="trakt-card trakt-action-card" data-action="ratings">
                                <div class="trakt-action-icon">
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="trakt-action-content">
                                    <h4>Ratings</h4>
                                    <p>Your rated content</p>
                                    <span class="trakt-action-count">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Scrobbling Settings Card -->
                        <div class="trakt-card">
                            <div class="trakt-card-header">
                                <h3><i class="fas fa-play-circle"></i> Scrobbling Settings</h3>
                            </div>
                            <div class="trakt-card-body">
                                <div class="trakt-settings-grid">
                                    <div class="trakt-setting-item">
                                        <div class="trakt-setting-main">
                                            <label class="trakt-toggle">
                                                <input type="checkbox" id="traktPageAutoScrobble" checked>
                                                <span class="trakt-toggle-slider"></span>
                                            </label>
                                            <div class="trakt-setting-content">
                                                <h4>Auto-Track Watching</h4>
                                                <p>Automatically track movies and shows you watch</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="trakt-setting-item">
                                        <div class="trakt-setting-main">
                                            <label class="trakt-toggle">
                                                <input type="checkbox" id="traktPageScrobbleProgress" checked>
                                                <span class="trakt-toggle-slider"></span>
                                            </label>
                                            <div class="trakt-setting-content">
                                                <h4>Sync Progress</h4>
                                                <p>Keep your watch progress synchronized in real-time</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="trakt-setting-item">
                                        <div class="trakt-setting-main">
                                            <label class="trakt-toggle">
                                                <input type="checkbox" id="traktPageWatchlistSync" checked>
                                                <span class="trakt-toggle-slider"></span>
                                            </label>
                                            <div class="trakt-setting-content">
                                                <h4>Watchlist Integration</h4>
                                                <p>Show Trakt watchlist items in search results</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity -->
                        <div class="trakt-card" id="traktRecentActivity" style="display: none;">
                            <div class="trakt-card-header">
                                <h3><i class="fas fa-clock"></i> Recent Activity</h3>
                            </div>
                            <div class="trakt-card-body">
                                <div class="trakt-activity-list" id="traktActivityList">
                                    <!-- Activity items will be loaded here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settings-page" style="display: none;">
                    <div class="settings-page-container">
                        <div class="page-header-enhanced">
                            <h2 class="section-title">Settings</h2>
                        </div>

                        <div class="settings-tabs">
                            <button class="settings-tab active" data-section="streaming">Streaming</button>
                            <button class="settings-tab" data-section="debrid">Debrid</button>
                            <button class="settings-tab" data-section="ui">User Interface</button>
                            <button class="settings-tab" data-section="trakt">Trakt Integration</button>
                        </div>

                        <div class="settings-sections">
                            <!-- Streaming Section -->
                            <div id="streamingContent" class="settings-section active">
                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-server"></i> Jackett Configuration</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="current-api-key" id="currentApiKey">
                                            No API key configured
                                        </div>
                                        <div class="form-group">
                                            <label for="newApiKey">New API Key:</label>
                                            <input type="text" id="newApiKey"
                                                placeholder="Enter new Jackett API key..." />
                                        </div>
                                        <div class="form-group">
                                            <label for="jackettUrl">Jackett Base URL:</label>
                                            <input type="text" id="jackettUrl"
                                                placeholder="http://127.0.0.1:9117/api/v2.0/indexers/all/results/torznab" />
                                            <small
                                                style="color:var(--secondary); font-size:0.85rem; margin-top:0.25rem; display:block;">Default:
                                                http://127.0.0.1:9117/api/v2.0/indexers/all/results/torznab</small>
                                        </div>
                                        <button id="jackettTutorialBtn" class="api-btn"
                                            style="background: white; color: #1a1a1a; padding: 0.5rem 1rem; font-size: 0.9rem; margin-top: 1rem; font-weight: 600;">
                                            Video Tutorial
                                        </button>
                                    </div>
                                </div>



                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-play-circle"></i> Streaming Mode</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="useStreamingServersToggle" />
                                            <label for="useStreamingServersToggle">Use Streaming Servers instead of
                                                Torrents</label>
                                        </div>
                                        <div style="margin-top:0.5rem; color:#10b981; font-size:0.9rem;">
                                            Stream directly from web servers (faster startup, no downloads)
                                        </div>
                                        <div style="margin-top:0.25rem; color:#9ca3af; font-size:0.85rem;">
                                            When enabled, movies/shows will stream from online servers instead of
                                            torrent files
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-card desktop-only-setting">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-hdd"></i> Cache & Storage</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="form-group">
                                            <label for="cacheLocation">Cache Location:</label>
                                            <div style="display:flex; gap:0.5rem; align-items:center;">
                                                <input type="text" id="cacheLocation" readonly
                                                    placeholder="System default temp folder" style="flex:1;" />
                                                <button class="api-btn" id="selectCacheBtn"
                                                    style="background:#0d6efd; color:#fff; white-space:nowrap;">
                                                    <i class="fas fa-folder-open"></i> Browse
                                                </button>
                                            </div>
                                            <small
                                                style="color:var(--secondary); font-size:0.85rem; margin-top:0.25rem; display:block;">
                                                <i class="fas fa-info-circle"></i> Location where WebTorrent streams and
                                                subtitles are cached
                                            </small>
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-stream" style="color: #667eea;"></i> Nuvio Configuration
                                        </h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div style="margin-bottom: 1rem; color: var(--secondary); font-size: 0.9rem;">
                                            <i class="fas fa-info-circle"></i>
                                            Configure your Febbox token for Nuvio streaming (ShowBox). A default token
                                            is provided, but you can use your own.
                                        </div>

                                        <div class="form-group">
                                            <label for="febboxTokenInput">
                                                Febbox JWT Token (Optional)
                                            </label>
                                            <input type="text" id="febboxTokenInput"
                                                placeholder="Leave empty to use default token or paste your Febbox JWT token here"
                                                style="font-family: monospace;" />
                                        </div>

                                        <button id="saveFebboxToken" class="btn" style="width: 100%;">
                                            <i class="fas fa-save"></i> Save Token
                                        </button>

                                        <div
                                            style="margin-top: 1rem; padding: 0.75rem; background: rgba(103, 126, 234, 0.1); border-left: 3px solid var(--secondary); border-radius: 4px; font-size: 0.85rem;">
                                            <i class="fas fa-check-circle" style="color: var(--secondary);"></i> Default
                                            token is active. You can continue using Nuvio without adding your own token.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Debrid Section -->
                            <div id="debridContent" class="settings-section">
                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-cloud"></i> Debrid Services (Cloud Cache)</h3>
                                    </div>
                                    <div class="settings-card-body" id="debridSection">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="useDebridToggle" />
                                            <label for="useDebridToggle">Use Debrid</label>
                                        </div>

                                        <div class="form-group">
                                            <div
                                                style="display:flex; gap:0.75rem; align-items:center; flex-wrap: wrap;">
                                                <label for="debridProvider">Provider:</label>
                                                <select id="debridProvider" style="min-width:220px; max-width:260px;">
                                                    <option value="realdebrid">RealDebrid</option>
                                                    <option value="alldebrid">AllDebrid</option>
                                                    <option value="torbox">TorBox</option>
                                                    <option value="premiumize">Premiumize</option>
                                                </select>
                                                <span id="debridStatus" style="font-size:0.9rem; opacity:0.85;">Not
                                                    logged in</span>
                                            </div>
                                        </div>

                                        <!-- Real-Debrid Section -->
                                        <div class="form-group" id="rdClientIdGroup">
                                            <label for="rdClientId">RealDebrid Client ID (device flow):</label>
                                            <input type="text" id="rdClientId"
                                                placeholder="Enter your RD Client ID (e.g., XXXXXXXXXXXXX)" />
                                        </div>

                                        <div id="rdButtons"
                                            style="display:flex; gap:0.5rem; flex-wrap: wrap; align-items:center;">
                                            <button class="api-btn" id="rdDeviceLogin"
                                                style="background:#198754; color:#fff;">
                                                <i class="fas fa-sign-in-alt"></i> Login with RealDebrid
                                            </button>
                                            <small style="opacity:0.85;">No password needed. Authenticate on
                                                realdebrid.com using a short code.</small>
                                        </div>

                                        <div id="rdCodePanel"
                                            style="display:none; margin-top:0.5rem; padding:0.75rem; background:rgba(0,0,0,0.35); border:1px solid rgba(255,255,255,0.1); border-radius:8px;">
                                            <div style="display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                                                <div>Code:</div>
                                                <div id="rdUserCode"
                                                    style="font-family:monospace; font-weight:800; background:rgba(255,255,255,0.1); padding:0.25rem 0.5rem; border-radius:6px;">
                                                    ----</div>
                                                <button class="api-btn" id="rdCopyCode"
                                                    style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                                        class="fas fa-copy"></i> Copy</button>
                                            </div>
                                            <div
                                                style="margin-top:0.5rem; display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                                                <div>Verify at:</div>
                                                <a id="rdVerifyUrl" href="#" target="_blank"
                                                    style="color:#0d6efd; text-decoration:underline;">https://real-debrid.com/device</a>
                                                <button class="api-btn" id="rdOpenVerify"
                                                    style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                                        class="fas fa-external-link-alt"></i> Open</button>
                                                <span id="rdLoginStatus"
                                                    style="margin-left:auto; font-size:0.9rem; opacity:0.9;">Waiting for
                                                    approval</span>
                                                <button class="api-btn api-btn-secondary" id="rdCancelLogin"><i
                                                        class="fas fa-times"></i> Cancel</button>
                                            </div>
                                        </div>

                                        <div class="form-group" id="rdTokenGroup">
                                            <label for="debridToken">RealDebrid Token (temporary MVP):</label>
                                            <input type="password" id="debridToken" placeholder="Paste RD token..." />
                                        </div>

                                        <div id="rdTokenButtons" style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                                            <button class="api-btn" id="saveDebridToken"
                                                style="background:#0d6efd; color:#fff;">
                                                <i class="fas fa-key"></i> Save Token
                                            </button>
                                            <button class="api-btn api-btn-secondary" id="clearDebridToken">
                                                <i class="fas fa-sign-out-alt"></i> Logout
                                            </button>
                                        </div>

                                        <div style="margin-top:0.25rem; color:#ffc107; font-size:0.9rem;">Your token is
                                            stored locally and never exposed to websites.</div>

                                        <!-- AllDebrid PIN Login UI -->
                                        <div id="adSection"
                                            style="display:none; margin-top:1rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                                            <div style="display:flex; gap:0.5rem; align-items:center; flex-wrap:wrap;">
                                                <button class="api-btn" id="adStartPin"
                                                    style="background:#198754; color:#fff;"><i
                                                        class="fas fa-sign-in-alt"></i> Login with AllDebrid
                                                    (PIN)</button>
                                                <small style="opacity:0.85;">Authenticate on alldebrid.com/pin with the
                                                    code shown.</small>
                                            </div>
                                            <div id="adPinPanel"
                                                style="display:none; margin-top:0.5rem; padding:0.75rem; background:rgba(0,0,0,0.35); border:1px solid rgba(255,255,255,0.1); border-radius:8px;">
                                                <div
                                                    style="display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                                                    <div>PIN:</div>
                                                    <div id="adPinCode"
                                                        style="font-family:monospace; font-weight:800; background:rgba(255,255,255,0.1); padding:0.25rem 0.5rem; border-radius:6px;">
                                                        ----</div>
                                                    <button class="api-btn" id="adCopyPin"
                                                        style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                                            class="fas fa-copy"></i> Copy</button>
                                                </div>
                                                <div
                                                    style="margin-top:0.5rem; display:flex; align-items:center; gap:0.5rem; flex-wrap:wrap;">
                                                    <div>Open:</div>
                                                    <a id="adUserUrl" href="https://alldebrid.com/pin/" target="_blank"
                                                        style="color:#0d6efd; text-decoration:underline;">https://alldebrid.com/pin/</a>
                                                    <button class="api-btn" id="adOpenUserUrl"
                                                        style="padding:0.4rem 0.6rem; background:#0d6efd; color:#fff;"><i
                                                            class="fas fa-external-link-alt"></i> Open</button>
                                                    <span id="adLoginStatus"
                                                        style="margin-left:auto; font-size:0.9rem; opacity:0.9;">Waiting</span>
                                                    <button class="api-btn api-btn-secondary" id="adCancelPin"><i
                                                            class="fas fa-times"></i> Cancel</button>
                                                </div>
                                            </div>
                                            <div class="form-group" style="margin-top:0.75rem;">
                                                <label for="adApiKey">AllDebrid API Key (optional/manual):</label>
                                                <input type="password" id="adApiKey"
                                                    placeholder="Paste AD API key..." />
                                            </div>
                                            <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                                                <button class="api-btn" id="adSaveApiKey"
                                                    style="background:#0d6efd; color:#fff;"><i class="fas fa-key"></i>
                                                    Save API Key</button>
                                                <button class="api-btn api-btn-secondary" id="adClearApiKey"><i
                                                        class="fas fa-sign-out-alt"></i> Logout</button>
                                            </div>
                                        </div>

                                        <!-- TorBox Auth (token) -->
                                        <div id="tbSection"
                                            style="display:none; margin-top:1rem; padding:1rem; border:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                                            <div class="form-group">
                                                <label for="tbToken">TorBox Token (temporary):</label>
                                                <input type="password" id="tbToken"
                                                    placeholder="Paste TorBox token..." />
                                            </div>
                                            <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                                                <button class="api-btn" id="tbSaveToken"
                                                    style="background:#0d6efd; color:#fff;"><i class="fas fa-key"></i>
                                                    Save Token</button>
                                                <button class="api-btn api-btn-secondary" id="tbClearToken"><i
                                                        class="fas fa-sign-out-alt"></i> Logout</button>
                                            </div>
                                            <div style="margin-top:0.25rem; color:#ffc107; font-size:0.9rem;">Token
                                                stored locally.</div>
                                        </div>

                                        <!-- Premiumize Auth (API Key) -->
                                        <div id="pmSection"
                                            style="display:none; margin-top:1rem; padding:1px solid rgba(255,255,255,0.15); border-radius:8px; background: rgba(255,255,255,0.05);">
                                            <div class="form-group">
                                                <label for="pmApiKey">Premiumize API Key:</label>
                                                <input type="password" id="pmApiKey"
                                                    placeholder="Enter your Premiumize API key..." />
                                            </div>
                                            <div style="display:flex; gap:0.5rem; flex-wrap: wrap;">
                                                <button class="api-btn" id="pmSaveApiKey"
                                                    style="background:#0d6efd; color:#fff;"><i class="fas fa-key"></i>
                                                    Save API Key</button>
                                                <button class="api-btn api-btn-secondary" id="pmClearApiKey"><i
                                                        class="fas fa-sign-out-alt"></i> Logout</button>
                                            </div>
                                            <div style="margin-top:0.25rem; color:#ffc107; font-size:0.9rem;">
                                                Get your API key from <a href="https://www.premiumize.me/account"
                                                    target="_blank"
                                                    style="color:#0d6efd; text-decoration:underline;">premiumize.me/account</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- User Interface Section -->
                            <div id="uiContent" class="settings-section">
                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-desktop"></i> Display Settings</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="checkbox-group desktop-only-setting">
                                            <input type="checkbox" id="fullscreenToggle" />
                                            <label for="fullscreenToggle">
                                                <i class="fas fa-expand-arrows-alt"
                                                    style="margin-right:0.25rem; color:var(--vlc-orange);"></i>
                                                <strong>Fullscreen Mode</strong>
                                            </label>
                                        </div>
                                        <div
                                            style="margin-top:0.25rem; color:var(--secondary); font-size:0.85rem; margin-left:1.85rem;">
                                            <i class="fas fa-info-circle"></i> Toggle between fullscreen and windowed
                                            mode
                                        </div>

                                        <div class="radio-group"
                                            style="margin-top:1.5rem; padding-top:1rem; border-top:1px solid rgba(255,255,255,0.1);">
                                            <label
                                                style="display:block; margin-bottom:0.75rem; color:var(--light); font-weight:600;">
                                                UI Mode
                                            </label>
                                            <div class="radio-option">
                                                <input type="radio" name="uiMode" value="new" id="uiModeNew" checked />
                                                <label for="uiModeNew"><strong>NEW UI</strong> - Modern app-like
                                                    interface</label>
                                            </div>
                                            <div class="radio-option">
                                                <input type="radio" name="uiMode" value="old" id="uiModeOld" />
                                                <label for="uiModeOld"><strong>OLD UI</strong> - Classic website
                                                    layout</label>
                                            </div>
                                            <div style="margin-top:0.5rem; color:var(--secondary); font-size:0.9rem;">
                                                <i class="fas fa-info-circle"></i> Changes will apply immediately after
                                                saving
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-palette"></i> Theme</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="form-group">
                                            <label for="themeSelector"
                                                style="display:block; margin-bottom:0.75rem; color:var(--light); font-weight:600; font-size:1rem;">
                                                <i class="fas fa-palette"
                                                    style="margin-right:0.5rem; color:var(--vlc-orange);"></i>
                                                Color Theme
                                            </label>
                                            <select id="themeSelector"
                                                style="width:100%; max-width:350px; padding:0.75rem 1rem; background: rgba(255,255,255,0.08); border: 2px solid rgba(255,255,255,0.2); border-radius:10px; color:var(--light); font-size:0.95rem; font-weight:500; cursor:pointer; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); appearance: none; background-image: url('data:image/svg+xml;charset=UTF-8,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27rgba(255,255,255,0.6)%27 stroke-width=%272%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpolyline points=%276 9 12 15 18 9%27%3e%3c/polyline%3e%3c/svg%3e'); background-repeat: no-repeat; background-position: right 0.75rem center; background-size: 1.25rem; padding-right: 2.5rem;">
                                                <option value="default">Default (Purple Dream)</option>
                                                <option value="green-forest">Green Forest</option>
                                                <option value="cyberpunk-neon">Cyberpunk Neon</option>
                                                <option value="ocean-breeze">Ocean Breeze</option>
                                                <option value="cherry-blossom">Cherry Blossom</option>
                                                <option value="midnight-dark">Midnight Dark</option>
                                                <option value="sunset-orange">Sunset Orange</option>
                                            </select>
                                            <small
                                                style="margin-top:0.5rem; color:var(--secondary); font-size:0.85rem; display:block;">
                                                <i class="fas fa-info-circle"></i> Choose your preferred color scheme
                                            </small>
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fab fa-discord"></i> Discord Activity</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="discordActivityToggle" checked />
                                            <label for="discordActivityToggle">
                                                <i class="fab fa-discord"
                                                    style="margin-right:0.25rem; color:#5865F2;"></i>
                                                <strong>Show Discord Rich Presence</strong>
                                            </label>
                                        </div>
                                        <div style="margin-top:0.5rem; color:#9ca3af; font-size:0.9rem;">
                                            <i class="fas fa-info-circle"></i> Display what you're watching on your
                                            Discord profile
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-sync-alt"></i> AutoUpdater</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div class="checkbox-group">
                                            <input type="checkbox" id="autoUpdateToggle" checked />
                                            <label for="autoUpdateToggle">Automatically download and install
                                                updates</label>
                                        </div>
                                        <div style="margin-top:0.5rem; color:#9ca3af; font-size:0.9rem;">
                                            When enabled, the app will check for updates on launch and install them when
                                            available.
                                        </div>
                                    </div>
                                </div>

                                <!-- Attribution Card -->
                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-brush" style="color: var(--vlc-orange);"></i> Icon
                                            Attribution</h3>
                                    </div>
                                    <div class="settings-card-body"
                                        style="font-size:0.9rem; line-height:1.5; color:var(--secondary);">
                                        <p style="margin:0 0 0.75rem; color:var(--light);"><strong>PlayTorrio App
                                                Icon</strong></p>
                                        <p style="margin:0 0 0.75rem;">Designed by <strong>Adnan Ahmed</strong>.</p>
                                        <p style="margin:0 0 0.5rem;">
                                            <i class="fas fa-globe" style="color:var(--vlc-orange);"></i>
                                            <a href="https://adnan-ahmed.pages.dev/" target="_blank"
                                                style="color:#0d6efd; text-decoration:underline; cursor:pointer;"
                                                onclick="event.preventDefault(); if (window.electronAPI?.openExternal) { window.electronAPI.openExternal('https://adnan-ahmed.pages.dev/'); } else { window.open('https://adnan-ahmed.pages.dev/', '_blank'); }">Website</a>
                                        </p>
                                        <p style="margin:0 0 0.5rem;">
                                            <i class="fab fa-github" style="color:var(--vlc-orange);"></i>
                                            <a href="https://github.com/ddosintruders" target="_blank"
                                                style="color:#0d6efd; text-decoration:underline; cursor:pointer;"
                                                onclick="event.preventDefault(); if (window.electronAPI?.openExternal) { window.electronAPI.openExternal('https://github.com/ddosintruders'); } else { window.open('https://github.com/ddosintruders', '_blank'); }">GitHub
                                                Profile</a>
                                        </p>
                                        <p style="margin:0; font-size:0.75rem; opacity:0.8;">Credit preserved per
                                            creator request. Thank you Adnan for the visual identity.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Trakt Integration Section -->
                            <div id="traktContent" class="settings-section">
                                <div class="settings-card">
                                    <div class="settings-card-header">
                                        <h3><i class="fas fa-tv" style="color: #ed1c24;"></i> Trakt Connection</h3>
                                    </div>
                                    <div class="settings-card-body">
                                        <div style="margin-bottom: 1rem; color: var(--secondary); font-size: 0.9rem;">
                                            <i class="fas fa-info-circle"></i>
                                            Sync your watch history, progress, and manage your watchlist with Trakt.tv
                                        </div>

                                        <div id="traktNotConnected" style="display: block;">
                                            <div style="margin-bottom: 1rem;">
                                                <span id="traktStatus" style="color: #dc3545; font-weight: 500;">
                                                    <i class="fas fa-times-circle"></i> Not connected
                                                </span>
                                            </div>
                                            <div
                                                style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap;">
                                                <button class="api-btn" id="traktLogin"
                                                    style="background: #ed1c24; color: #fff;">
                                                    <i class="fas fa-sign-in-alt"></i> Connect to Trakt
                                                </button>
                                                <small style="opacity: 0.85;">Authenticate with your Trakt.tv account
                                                    using a secure device code</small>
                                            </div>
                                        </div>

                                        <div id="traktConnected" style="display: none;">
                                            <div style="margin-bottom: 1rem;">
                                                <span id="traktConnectedStatus"
                                                    style="color: #198754; font-weight: 500;">
                                                    <i class="fas fa-check-circle"></i> Connected as <span
                                                        id="traktUsername">User</span>
                                                </span>
                                            </div>
                                            <div
                                                style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap; margin-bottom: 1rem;">
                                                <button class="api-btn" id="traktViewWatchlist"
                                                    style="background: #0d6efd; color: #fff;">
                                                    <i class="fas fa-list"></i> View Watchlist
                                                </button>
                                                <button class="api-btn" id="traktViewHistory"
                                                    style="background: #6f42c1; color: #fff;">
                                                    <i class="fas fa-history"></i> View History
                                                </button>
                                                <button class="api-btn" id="traktViewStats"
                                                    style="background: #17a2b8; color: #fff;">
                                                    <i class="fas fa-chart-bar"></i> View Stats
                                                </button>
                                            </div>
                                            <div
                                                style="display: flex; gap: 0.75rem; align-items: center; flex-wrap: wrap;">
                                                <button class="api-btn api-btn-secondary" id="traktDisconnect">
                                                    <i class="fas fa-sign-out-alt"></i> Disconnect
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Trakt Device Code Panel -->
                                        <div id="traktCodePanel"
                                            style="display: none; margin-top: 1rem; padding: 0.75rem; background: rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px;">
                                            <div
                                                style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 0.5rem;">
                                                <div>Device Code:</div>
                                                <div id="traktUserCode"
                                                    style="font-family: monospace; font-weight: 800; background: rgba(255,255,255,0.1); padding: 0.25rem 0.5rem; border-radius: 6px;">
                                                    ----</div>
                                                <button class="api-btn" id="traktCopyCode"
                                                    style="padding: 0.4rem 0.6rem; background: #0d6efd; color: #fff;">
                                                    <i class="fas fa-copy"></i> Copy
                                                </button>
                                            </div>
                                            <div
                                                style="display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap;">
                                                <div>Authorize at:</div>
                                                <a id="traktVerifyUrl" href="#" target="_blank"
                                                    style="color: #0d6efd; text-decoration: underline;">https://trakt.tv/activate</a>
                                                <button class="api-btn" id="traktOpenVerify"
                                                    style="padding: 0.4rem 0.6rem; background: #0d6efd; color: #fff;">
                                                    <i class="fas fa-external-link-alt"></i> Open
                                                </button>
                                                <span id="traktLoginStatus"
                                                    style="margin-left: auto; font-size: 0.9rem; opacity: 0.9;">Waiting
                                                    for authorization</span>
                                                <button class="api-btn api-btn-secondary" id="traktCancelLogin">
                                                    <i class="fas fa-times"></i> Cancel
                                                </button>
                                            </div>
                                        </div>

                                        <!-- Trakt Settings -->
                                        <div id="traktSettings"
                                            style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.1);">
                                            <h4 style="margin-bottom: 0.75rem; color: var(--text-primary);">Scrobbling
                                                Settings</h4>
                                            <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                                                <label
                                                    style="display: flex; align-items: center; gap: 0.6rem; cursor: pointer;">
                                                    <input type="checkbox" id="traktAutoScrobble" checked />
                                                    <span>Automatically track what I watch</span>
                                                </label>
                                                <label
                                                    style="display: flex; align-items: center; gap: 0.6rem; cursor: pointer;">
                                                    <input type="checkbox" id="traktScrobbleProgress" checked />
                                                    <span>Sync watch progress</span>
                                                </label>
                                                <label
                                                    style="display: flex; align-items: center; gap: 0.6rem; cursor: pointer;">
                                                    <input type="checkbox" id="traktSyncWatchlist" checked />
                                                    <span>Show Trakt watchlist items in search</span>
                                                </label>
                                            </div>
                                            <div
                                                style="margin-top: 0.5rem; color: var(--secondary); font-size: 0.85rem;">
                                                <i class="fas fa-info-circle"></i> Your viewing activity will be
                                                automatically synchronized with Trakt.tv
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Save Button -->
                        <div
                            style="margin-top: 2rem; padding-top: 2rem; border-top: 2px solid rgba(168, 85, 247, 0.2); display: flex; gap: 1rem; justify-content: flex-end;">
                            <button class="api-btn api-btn-secondary" id="cancelSettingsPage">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                            <button class="api-btn api-btn-primary" id="saveSettingsPage">
                                <i class="fas fa-save"></i> Save Changes
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Live TV Page -->
                <div id="livetv-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-broadcast-tower" style="color: #10b981;"></i> <span>Live TV</span>
                            </h2>
                            <p class="page-subtitle">Watch live sports from around the world</p>
                        </div>
                    </div>

                    <div class="trakt-container">
                        <!-- Category Selector and Search -->
                        <div class="trakt-card">
                            <div class="trakt-card-body">
                                <div class="livetv-category-section"
                                    style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                                    <div>
                                        <label for="livetv-category-select" class="livetv-category-label">
                                            <i class="fas fa-filter"></i> Category
                                        </label>
                                        <select id="livetv-category-select" class="livetv-category-dropdown">
                                            <option value="football"> Football</option>
                                        </select>
                                    </div>
                                    <div id="livetv-match-count"
                                        style="display: none; align-items: center; gap: 0.75rem; padding: 0.5rem 1rem; background: rgba(17, 24, 39, 0.6); backdrop-filter: blur(10px); border-radius: 20px; border: 1px solid rgba(255, 255, 255, 0.1); font-size: 0.85rem;">
                                    </div>
                                </div>
                                <div style="margin-top: 1rem;">
                                    <div style="position: relative;">
                                        <i class="fas fa-search"
                                            style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: rgba(16,185,129,0.6); font-size: 0.9rem;"></i>
                                        <input type="text" id="livetv-search-input"
                                            placeholder="Search matches (e.g., Barcelona, Real Madrid, Champions League)..."
                                            style="width: 100%; padding: 0.75rem 1rem 0.75rem 2.75rem; border: 2px solid rgba(16,185,129,0.3); border-radius: 8px; background: rgba(16,185,129,0.05); color: var(--light); font-size: 0.95rem; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);"
                                            onfocus="this.style.borderColor='rgba(16,185,129,0.6)'; this.style.background='rgba(16,185,129,0.1)';"
                                            onblur="this.style.borderColor='rgba(16,185,129,0.3)'; this.style.background='rgba(16,185,129,0.05)';">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Matches Grid -->
                        <div class="trakt-card">
                            <div class="trakt-card-body">
                                <div id="livetv-grid" class="livetv-matches-grid"></div>
                                <div id="livetv-empty" class="livetv-empty" style="display: none;">
                                    <i class="fas fa-tv" style="font-size: 3em; opacity: 0.3;"></i>
                                    <p>No matches available for this category</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Streams List Modal -->
                    <div id="livetv-streams-modal" class="livetv-streams-modal" style="display: none;">
                        <div class="livetv-streams-content">
                            <div class="livetv-streams-header">
                                <h3 id="livetv-streams-title"></h3>
                                <button id="livetv-streams-close" class="livetv-close-btn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div id="livetv-streams-list" class="livetv-streams-list"></div>
                        </div>
                    </div>
                </div>

                <!-- IPTV Page -->
                <div id="iptv-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-tv" style="color: #3b82f6;"></i> <span>IPTV</span>
                            </h2>
                            <p class="page-subtitle">Watch live TV channels from around the world</p>
                        </div>
                        <div class="page-actions" style="display:flex; gap:.5rem; align-items:center;">
                            <button id="iptv-custom-btn" class="btn"
                                style="background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;padding:.6rem 1rem;border-radius:8px;font-weight:600;cursor:pointer;">
                                <i class="fas fa-user-lock"></i> Custom IPTV (Xtream Codes)
                            </button>
                        </div>
                    </div>

                    <div class="page-content" style="padding: 0; height: calc(100vh - 140px);">
                        <iframe id="iptv-iframe" src="https://iptvplaytorrio.pages.dev/"
                            style="width: 100%; height: 100%; border: none; border-radius: 8px;" allowfullscreen>
                        </iframe>
                        <!-- Custom IPTV Inline Browser (replaces iframe when active) -->
                        <div id="xtream-inline" style="display:none; width:100%; height:100%;">
                            <div
                                style="display:flex; justify-content:space-between; align-items:center; padding:.75rem 1rem; border-bottom:1px solid rgba(255,255,255,.08); background:rgba(0,0,0,.3);">
                                <div style="display:flex; gap:.5rem; align-items:center;">
                                    <button class="xtream-tab-btn" data-tab="live"
                                        style="background:#1b1b1b;color:#fff;border:1px solid rgba(255,255,255,.15);padding:.45rem .8rem;border-radius:8px;cursor:pointer;">Live</button>
                                    <button class="xtream-tab-btn" data-tab="vod"
                                        style="background:transparent;color:#ddd;border:1px solid rgba(255,255,255,.15);padding:.45rem .8rem;border-radius:8px;cursor:pointer;">Movies</button>
                                    <button class="xtream-tab-btn" data-tab="series"
                                        style="background:transparent;color:#ddd;border:1px solid rgba(255,255,255,.15);padding:.45rem .8rem;border-radius:8px;cursor:pointer;">Series</button>
                                </div>
                                <div style="display:flex; gap:.6rem; align-items:center;">
                                    <select id="xtream-category-select" size="1"
                                        style="background:#1b1b1b;color:#fff;border:1px solid rgba(255,255,255,.15);padding:.45rem .8rem;border-radius:8px;">
                                        <option value="">All Categories</option>
                                    </select>
                                    <input id="xtream-search" placeholder="Search..."
                                        style="background:#1b1b1b;color:#fff;border:1px solid rgba(255,255,255,.15);padding:.5rem .8rem;border-radius:8px;min-width:220px;">
                                </div>
                            </div>
                            <div id="xtream-inline-content"
                                style="width:100%; height:calc(100% - 58px); overflow:auto; padding:1rem;">
                                <div id="xtream-empty"
                                    style="display:flex; align-items:center; justify-content:center; height:100%; color:#9ca3af;">
                                    No data</div>
                                <div id="xtream-grid"
                                    style="display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:1rem;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Xtream Codes Login Modal -->
                <div id="xtream-login-modal"
                    style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.65); z-index:12000; align-items:center; justify-content:center;">
                    <div
                        style="width: min(560px, 92vw); background: #121212; color: #fff; border-radius: 16px; border:1px solid rgba(255,255,255,.12); box-shadow:0 20px 50px rgba(0,0,0,.5); overflow:hidden;">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; padding:1rem 1.25rem; border-bottom:1px solid rgba(255,255,255,.08);">
                            <h3 style="margin:0; font-size:1.1rem; display:flex; gap:.5rem; align-items:center;"><i
                                    class="fas fa-key"></i> Xtream Codes Login</h3>
                            <button id="xtream-login-close"
                                style="background:transparent;color:#fff;border:none;font-size:1.25rem;cursor:pointer;"></button>
                        </div>
                        <div style="padding:1rem 1.25rem; display:flex; flex-direction:column; gap:.75rem;">
                            <label style="font-size:.9rem; color:#ddd;">Server Base URL (e.g.
                                http://example.com:8080)</label>
                            <input id="xtream-base-url" placeholder="http://host:port"
                                style="padding:.7rem 1rem; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#1b1b1b; color:#fff; outline:none;">
                            <div style="display:grid; grid-template-columns:1fr 1fr; gap:.75rem;">
                                <div>
                                    <label style="font-size:.9rem; color:#ddd;">Username</label>
                                    <input id="xtream-username" placeholder="username"
                                        style="width:100%; padding:.7rem 1rem; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#1b1b1b; color:#fff; outline:none;">
                                </div>
                                <div>
                                    <label style="font-size:.9rem; color:#ddd;">Password</label>
                                    <input id="xtream-password" placeholder="password" type="password"
                                        style="width:100%; padding:.7rem 1rem; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#1b1b1b; color:#fff; outline:none;">
                                </div>
                            </div>
                            <div style="display:flex; align-items:center; gap:.5rem; margin-top:.25rem;">
                                <input id="xtream-remember" type="checkbox">
                                <label for="xtream-remember" style="color:#bbb;">Remember on this device</label>
                            </div>
                            <div style="display:flex; justify-content:flex-end; gap:.5rem; margin-top:.75rem;">
                                <button id="xtream-login-cancel"
                                    style="background:rgba(255,255,255,.1); color:#fff; border:1px solid rgba(255,255,255,.2); padding:.6rem 1rem; border-radius:8px; cursor:pointer;">Cancel</button>
                                <button id="xtream-login-submit"
                                    style="background:linear-gradient(135deg,#10b981,#059669); color:#fff; border:none; padding:.6rem 1rem; border-radius:8px; font-weight:600; cursor:pointer;">
                                    <i class="fas fa-sign-in-alt"></i> Login
                                </button>
                            </div>
                            <div
                                style="display:flex; align-items:center; gap:.5rem; opacity:.8; padding-top:.4rem; border-top:1px dashed rgba(255,255,255,.15); margin-top:.4rem;">
                                <span style="font-size:.85rem; color:#9ca3af;">OR</span>
                            </div>
                            <label style="font-size:.9rem; color:#ddd;">M3U/M3U8 Playlist URL</label>
                            <input id="xtream-m3u-url" placeholder="http://example.com/playlist.m3u or .m3u8"
                                style="padding:.7rem 1rem; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#1b1b1b; color:#fff; outline:none;">
                            <div style="display:flex; justify-content:flex-end; gap:.5rem;">
                                <button id="xtream-m3u-submit"
                                    style="background:linear-gradient(135deg,#f59e0b,#b45309); color:#fff; border:none; padding:.6rem 1rem; border-radius:8px; font-weight:600; cursor:pointer;">
                                    <i class="fas fa-list"></i> Load Playlist
                                </button>
                            </div>
                            <!-- Recommended M3U Playlists -->
                            <div id="xtream-m3u-recommended" style="margin-top:.5rem;">
                                <div style="font-size:.85rem; color:#9ca3af; margin-bottom:.35rem;">Recommended
                                    playlists</div>
                                <div style="display:flex; flex-direction:column; gap:.35rem;">
                                    <button class="m3u-preset"
                                        data-url="https://iptv-org.github.io/iptv/languages/eng.m3u"
                                        style="text-align:left; background:rgba(255,255,255,.06); color:#e5e7eb; border:1px solid rgba(255,255,255,.12); padding:.45rem .6rem; border-radius:6px; cursor:pointer;">
                                        <i class="fas fa-bolt" style="color:#f59e0b;"></i> Load English (iptv-org)
                                    </button>
                                    <button class="m3u-preset" data-url="https://iptv-org.github.io/iptv/index.m3u"
                                        style="text-align:left; background:rgba(255,255,255,.06); color:#e5e7eb; border:1px solid rgba(255,255,255,.12); padding:.45rem .6rem; border-radius:6px; cursor:pointer;">
                                        <i class="fas fa-bolt" style="color:#f59e0b;"></i> Load Global index (iptv-org)
                                    </button>
                                </div>
                            </div>
                            <div id="xtream-login-status" style="font-size:.9rem; color:#9ca3af; min-height:1.2rem;">
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Xtream Player Modal (basic) -->
                <div id="xtream-player-modal"
                    style="display:none; position:fixed; inset:0; background:rgba(0,0,0,.8); z-index:16000; align-items:center; justify-content:center;">
                    <div
                        style="width:min(1000px,94vw); background:#000; border-radius:10px; overflow:hidden; border:1px solid rgba(255,255,255,.15);">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; padding:.5rem .75rem; background:#0f0f0f;">
                            <div id="xtream-player-title" style="color:#fff; font-weight:600;">Playing</div>
                            <div style="display:flex; gap:.5rem;">
                                <button id="xtream-open-mpv"
                                    style="display:none; background:linear-gradient(135deg,#10b981,#059669); color:#fff; border:none; padding:.4rem .7rem; border-radius:6px; cursor:pointer;">
                                    <i class="fas fa-play"></i> Open in Player
                                </button>
                                <button id="xtream-open-iina"
                                    style="display:none; background:linear-gradient(135deg,#22c55e,#16a34a); color:#fff; border:none; padding:.4rem .7rem; border-radius:6px; cursor:pointer;">
                                    <i class="fas fa-play-circle"></i> Open in IINA
                                </button>
                                <button id="xtream-open-vlc"
                                    style="background:linear-gradient(135deg,#f97316,#ea580c); color:#fff; border:none; padding:.4rem .7rem; border-radius:6px; cursor:pointer;">
                                    <i class="fas fa-film"></i> Open in VLC
                                </button>
                                <button id="xtream-open-external"
                                    style="background:linear-gradient(135deg,#3b82f6,#2563eb); color:#fff; border:none; padding:.4rem .7rem; border-radius:6px; cursor:pointer;">
                                    <i class="fas fa-external-link-alt"></i> Open in Browser
                                </button>
                                <button id="xtream-player-close"
                                    style="background:transparent;color:#fff;border:none;font-size:1.25rem;cursor:pointer;"></button>
                            </div>
                        </div>
                        <div style="background:#000;">
                            <video id="xtream-video" style="width:100%; height:65vh; background:#000;" controls
                                playsinline></video>
                        </div>
                    </div>
                </div>

                <!-- Games Downloader Page -->
                <div id="games-downloader-page" class="page-wrapper" style="display: none;">
                    <div class="page-header" style="text-align: center;">
                        <h2><i class="fas fa-download" style="color:#8b5cf6"></i> Games Downloader</h2>
                        <p style="color: var(--secondary); margin-top: 0.5rem; font-size: 0.95rem;">Search for PC games
                            or browse downloadable games from SteamRip and FitGirl databases</p>
                    </div>

                    <div class="page-content">
                        <!-- Search Section -->
                        <div class="search-section" style="max-width: 800px; margin: 2rem auto; text-align: center;">
                            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem;">
                                <input type="text" id="games-search-input"
                                    placeholder="Search for PC games (e.g., Call of Duty, GTA, Cyberpunk)..."
                                    style="flex: 1; padding: 0.75rem 1rem; border: 2px solid rgba(139,92,246,0.3); border-radius: 8px; background: rgba(139,92,246,0.05); color: var(--light); font-size: 1rem;">
                                <button id="games-search-btn"
                                    style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);"
                                    onmouseover="this.style.transform='scale(1.05)'"
                                    onmouseout="this.style.transform='scale(1)'">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                            <button id="games-browse-all-btn"
                                style="padding: 0.6rem 1.2rem; background: linear-gradient(135deg, #f97316, #ea580c); border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); margin-bottom: 1rem;"
                                onmouseover="this.style.transform='scale(1.05)'"
                                onmouseout="this.style.transform='scale(1)'">
                                <i class="fas fa-th"></i> Browse All Games
                            </button>
                            <div id="games-search-status"
                                style="color: var(--secondary); font-size: 0.9rem; min-height: 1.5rem;"></div>
                        </div>

                        <!-- Categories Section -->
                        <div id="games-categories-section"
                            style="max-width: 1200px; margin: 0 auto 2rem auto; padding: 0 1rem;">
                            <h3 style="color: var(--light); margin-bottom: 1rem; text-align: center;"><i
                                    class="fas fa-tags" style="color:#8b5cf6"></i> Browse by Category</h3>
                            <div style="display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 2rem;">
                                <select id="games-category-select"
                                    style="padding: 0.75rem 1rem; border: 2px solid rgba(139,92,246,0.3); border-radius: 8px; background: rgba(139,92,246,0.05); color: var(--light); font-size: 1rem; cursor: pointer; min-width: 250px;">
                                    <option value="">Select a category...</option>
                                </select>
                                <button id="games-category-btn"
                                    style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border: none; border-radius: 8px; color: white; font-weight: 600; cursor: pointer; transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);"
                                    onmouseover="this.style.transform='scale(1.05)'"
                                    onmouseout="this.style.transform='scale(1)'">
                                    <i class="fas fa-filter"></i> Filter
                                </button>
                            </div>
                        </div>

                        <!-- Results Section -->
                        <div id="games-results-section" style="display: none;">
                            <div class="books-results-header"
                                style="align-items:center; gap:1rem; margin-bottom: 1rem;">
                                <h3><i class="fas fa-list" style="color:#8b5cf6"></i> Search Results</h3>
                                <div id="games-results-count" class="books-results-count"></div>
                            </div>
                            <div id="games-results-grid" class="books-results-grid"></div>
                        </div>

                        <!-- Empty State -->
                        <div id="games-empty-state" class="books-empty" style="display: none;">
                        </div>
                    </div>
                </div>

                <!-- PlayTorrio MiniGames Page -->
                <div id="minigames-page" style="display: none;">
                    <div class="page-content" style="padding: 0; height: 100vh; overflow: hidden;">
                        <iframe id="minigames-iframe" src="https://playtorriogames.pages.dev/"
                            style="width: 100%; height: 100%; border: none;" allowfullscreen>
                        </iframe>
                    </div>
                </div>

                <!-- Books Page -->
                <div id="books-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-book" style="color: #f59e0b;"></i> <span>Books</span>
                            </h2>
                            <p class="page-subtitle">Search and read books from Z-Library</p>
                        </div>
                    </div>

                    <div class="page-content">
                        <!-- Search Section -->
                        <div class="books-search-section">
                            <div class="books-search-container">
                                <div class="books-search-bar">
                                    <i class="fas fa-search books-search-icon"></i>
                                    <input type="text" id="books-search-input"
                                        placeholder="Search for books, authors, or titles..." autocomplete="off" />
                                    <button id="books-search-btn" class="books-search-button">
                                        <i class="fas fa-search"></i>
                                        Search
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Loading State -->
                        <div id="books-loading" class="books-loading" style="display: none;">
                            <div class="books-loading-spinner">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <p>Searching Z-Library...</p>
                        </div>

                        <!-- Empty State -->
                        <div id="books-empty" class="books-empty">
                            <div class="books-empty-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <h3>Welcome to Z-Library Search</h3>
                            <p>Search for any book, author, or topic to get started.</p>
                        </div>

                        <!-- Results Section -->
                        <div id="books-results" class="books-results" style="display: none;">
                            <div class="books-results-header">
                                <h3 id="books-results-title">Search Results</h3>
                                <div id="books-results-count" class="books-results-count"></div>
                            </div>
                            <div id="books-results-grid" class="books-results-grid">
                                <!-- Results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Books Reader Modal -->
                <div id="books-reader-modal" class="books-reader-modal" style="display: none;">
                    <div class="books-reader-content">
                        <div class="books-reader-header">
                            <button id="books-reader-back" class="books-reader-back-btn">
                                <i class="fas fa-arrow-left"></i>
                                Back
                            </button>
                            <h3 id="books-reader-title">Reading...</h3>
                        </div>
                        <div class="books-reader-frame-container">
                            <iframe id="books-reader-frame" class="books-reader-frame"></iframe>
                        </div>
                    </div>
                </div>

                <!-- Server Selection Modal -->
                <div id="server-selection-modal" class="server-selection-modal" style="display: none;">
                    <div class="server-selection-content">
                        <div class="server-selection-header">
                            <button id="server-selection-back" class="server-selection-back-btn">
                                <i class="fas fa-arrow-left"></i>
                                Back
                            </button>
                            <h3 id="server-selection-title">Select Streaming Server</h3>
                        </div>
                        <div class="server-selection-body">
                            <div class="server-selection-info">
                                <div class="media-info">
                                    <img id="server-media-poster" class="media-poster" src="" alt="Media Poster">
                                    <div class="media-details">
                                        <h4 id="server-media-title">Movie/Show Title</h4>
                                        <p id="server-media-subtitle">Episode details</p>
                                        <div class="media-meta">
                                            <span id="server-media-year" class="media-year"></span>
                                            <span id="server-media-rating" class="media-rating"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="server-dropdown-section">
                                <label for="server-dropdown" class="server-dropdown-label">
                                    <i class="fas fa-server"></i>
                                    Choose Streaming Server:
                                </label>
                                <div class="server-dropdown-container">
                                    <select id="server-dropdown" class="server-dropdown">
                                        <!-- Options will be populated by JavaScript -->
                                    </select>
                                    <i class="fas fa-chevron-down server-dropdown-arrow"></i>
                                </div>
                            </div>
                            <div class="server-actions">
                                <button id="server-watch-btn" class="server-watch-btn">
                                    <i class="fas fa-play"></i>
                                    Start Watching
                                </button>
                                <button id="server-torrent-btn" class="server-torrent-btn">
                                    <i class="fas fa-download"></i>
                                    Use Torrent Instead
                                </button>
                            </div>

                            <!-- Embedded Video Player Section -->
                            <div id="server-video-section" class="server-video-section" style="display: none;">
                                <div class="server-video-header">
                                    <h4 id="server-video-title">Now Playing</h4>
                                    <button id="server-video-close" class="server-video-close">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="server-video-container">
                                    <iframe id="server-video-frame" class="server-video-iframe" src="" allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chromecast Device Selection Modal -->
                <div id="chromecast-device-modal" class="modal" style="display: none; z-index: 6000;">
                    <div class="modal-content" style="max-width: 500px;">
                        <div class="chromecast-modal-header">
                            <h3><i class="fas fa-tv"></i> Select Chromecast Device</h3>
                            <button class="close-modal" id="close-chromecast-modal">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div id="chromecast-device-list" class="chromecast-device-list">
                                <div class="loading-spinner">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p>Discovering devices...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Custom Magnet Link Modal -->
                <div id="custom-magnet-modal" class="modal" style="display: none; z-index: 6000;">
                    <div class="modal-content"
                        style="width: 420px; max-width: 92vw; background: #0f172a; border-radius: 10px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); border: 1px solid rgba(139,92,246,0.25); padding: 12px 12px 10px; position: relative;">
                        <button id="close-custom-magnet-modal"
                            style="position: absolute; top: 8px; right: 8px; background: rgba(255,255,255,0.12); color: #fff; border: none; width: 28px; height: 28px; border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                            <i class="fas fa-times"></i>
                        </button>
                        <h3
                            style="margin: 0 36px 8px 0; display: flex; align-items: center; gap: 6px; color: #e2e8f0; font-size: 0.95rem; font-weight: 700;">
                            <i class="fas fa-magnet" style="color: #a78bfa;"></i> Play Custom Magnet
                        </h3>
                        <div style="margin: 6px 0 8px;">
                            <label for="custom-magnet-input"
                                style="display: block; margin-bottom: 6px; color: #cbd5e1; font-weight: 600; font-size: 0.8rem;">
                                <i class="fas fa-link" style="color: #8b5cf6;"></i> Magnet Link
                            </label>
                            <input id="custom-magnet-input" type="text" placeholder="magnet:?xt=urn:btih:..."
                                style="width: 100%; height: 38px; padding: 8px 10px; border: 1.5px solid rgba(139,92,246,0.5); border-radius: 8px; background: #0b1220; color: #e2e8f0; font-size: 0.85rem; font-family: 'Consolas', 'Courier New', monospace; outline: none;"
                                onfocus="this.style.borderColor='#8b5cf6'; this.style.boxShadow='0 0 0 3px rgba(139,92,246,0.15)';"
                                onblur="this.style.borderColor='rgba(139,92,246,0.5)'; this.style.boxShadow='none';" />
                        </div>
                        <div style="display: flex; gap: 8px; justify-content: flex-end; margin-top: 8px;">
                            <button id="cancel-custom-magnet-btn"
                                style="padding: 8px 14px; border-radius: 8px; font-weight: 600; background: rgba(71,85,105,0.3); border: 1.5px solid rgba(71,85,105,0.5); color: #cbd5e1; cursor: pointer; font-size: 0.85rem;">
                                Cancel
                            </button>
                            <button id="play-custom-magnet-btn"
                                style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); border: none; padding: 8px 14px; border-radius: 8px; font-weight: 700; display: flex; align-items: center; gap: 6px; color: #fff; cursor: pointer; font-size: 0.85rem;">
                                <i class="fas fa-play-circle"></i> Play
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Video Player Modal -->
                <div id="video-player-modal" class="video-player-modal" style="display: none;">
                    <div class="video-player-content">
                        <div class="video-player-header">
                            <button id="video-player-back" class="video-player-back-btn">
                                <i class="fas fa-arrow-left"></i>
                                Back to Servers
                            </button>
                            <h3 id="video-player-title">Now Playing</h3>
                            <div class="video-player-controls">
                                <button id="video-player-fullscreen" class="video-player-control-btn">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                        </div>
                        <div class="video-player-frame-container">
                            <iframe id="video-player-frame" class="video-player-frame"></iframe>
                        </div>
                    </div>
                </div>

                <!-- AudioBooks Page -->
                <div id="audiobooks-page" style="display: none;">
                    <!-- Books View -->
                    <div id="audiobooks-books-view">
                        <div class="page-header-enhanced">
                            <div class="page-title-section">
                                <h2 class="section-title">
                                    <i class="fas fa-headphones" style="color: #8b5cf6;"></i> <span>AudioBooks</span>
                                </h2>
                                <p class="page-subtitle">Search and stream audiobooks</p>
                            </div>
                        </div>

                        <div class="page-content">
                            <!-- Search Section -->
                            <div class="search-section" style="margin-bottom: 2rem;">
                                <div class="search-container-books">
                                    <input type="text" id="audiobookSearchInput" placeholder="Search for audiobooks..."
                                        class="search-input-books">
                                    <button id="searchAudioBooksBtn" class="search-btn-books">
                                        <i class="fas fa-search"></i> Search
                                    </button>
                                    <button id="clearAudioBookSearchBtn" class="search-btn-books"
                                        style="margin-left: 0.5rem; background: #e74c3c; display: none;">
                                        <i class="fas fa-arrow-left"></i> Back to Home
                                    </button>
                                </div>
                            </div>

                            <div id="audiobookSearchResults" class="books-grid">
                                <div class="search-placeholder">
                                    <i class="fas fa-headphones"
                                        style="font-size: 3rem; color: #8b5cf6; margin-bottom: 1rem;"></i>
                                    <h3>Discover AudioBooks</h3>
                                    <p>Browse audiobooks or search for your favorites</p>
                                </div>
                            </div>

                            <!-- Loading indicator -->
                            <div id="audiobookLoading" style="display: none; text-align: center; padding: 2rem;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #8b5cf6;"></i>
                                <p style="margin-top: 1rem; color: #666;">Loading audiobooks...</p>
                            </div>

                            <!-- Load More Button -->
                            <div id="audiobookLoadMoreContainer"
                                style="display: none; text-align: center; margin: 2rem auto; width: 100%;">
                                <button id="audiobookLoadMoreBtn" class="action-btn"
                                    style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); padding: 1rem 2.5rem; font-size: 1rem;">
                                    <i class="fas fa-plus-circle"></i> Load More
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Chapters View -->
                    <div id="audiobooks-chapters-view" style="display: none;">
                        <div class="page-header-enhanced">
                            <div class="page-title-section">
                                <button id="audiobooksBackToBooks" class="action-btn" style="margin-right: 1rem;">
                                    <i class="fas fa-arrow-left"></i> Back to Books
                                </button>
                                <h2 class="section-title" id="audiobooksChapterBookTitle" style="color: #8b5cf6;">
                                    <i class="fas fa-headphones"></i> <span></span>
                                </h2>
                            </div>
                        </div>

                        <div class="page-content">
                            <div id="audiobooksChapterLoading"
                                style="display: none; text-align: center; padding: 2rem;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #8b5cf6;"></i>
                                <p style="margin-top: 1rem; color: #666;">Loading chapters...</p>
                            </div>

                            <div id="audiobooksChaptersList" style="display: flex; flex-direction: column; gap: 10px;">
                                <!-- Chapters will be inserted here -->
                            </div>
                        </div>
                    </div>

                    <!-- Audio Player (Fixed at bottom within audiobooks page) -->
                    <div id="audiobooksPlayer"
                        style="display: none; position: fixed; bottom: 0; left: 240px; right: 0; background: linear-gradient(135deg, #8b5cf6, #7c3aed); padding: 20px; box-shadow: 0 -5px 20px rgba(0,0,0,0.3); z-index: 1000;">
                        <button id="audiobooksClosePlayer"
                            style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.2); border: none; color: white; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center; transition: all 0.3s;"></button>

                        <div style="max-width: 1200px; margin: 0 auto;">
                            <div style="color: white; margin-bottom: 15px; text-align: center;">
                                <div id="audiobooksPlayerTitle"
                                    style="font-size: 18px; font-weight: 600; margin-bottom: 5px;">No Audio Selected
                                </div>
                                <div id="audiobooksPlayerChapter" style="font-size: 14px; opacity: 0.9;"></div>
                            </div>

                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <button id="audiobooksPrevBtn" class="action-btn"
                                    style="background: rgba(255,255,255,0.2); color: white; min-width: 45px; height: 45px; padding: 0; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.3s;"><i
                                        class="fas fa-step-backward"></i></button>
                                <button id="audiobooksPlayPauseBtn" class="action-btn"
                                    style="background: white; color: #8b5cf6; font-size: 20px; min-width: 55px; height: 55px; padding: 0; display: flex; align-items: center; justify-content: center; transition: all 0.3s;"><i
                                        class="fas fa-play"></i></button>
                                <button id="audiobooksNextBtn" class="action-btn"
                                    style="background: rgba(255,255,255,0.2); color: white; min-width: 45px; height: 45px; padding: 0; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.3s;"><i
                                        class="fas fa-step-forward"></i></button>

                                <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                                    <span id="audiobooksCurrentTime"
                                        style="color: white; font-size: 13px; min-width: 45px;">0:00</span>
                                    <div id="audiobooksProgressBar"
                                        style="flex: 1; height: 6px; background: rgba(255,255,255,0.3); border-radius: 3px; cursor: pointer; position: relative;">
                                        <div id="audiobooksProgressFilled"
                                            style="height: 100%; background: white; border-radius: 3px; width: 0%; position: relative;">
                                            <div
                                                style="position: absolute; right: -6px; top: 50%; transform: translateY(-50%); width: 12px; height: 12px; background: white; border-radius: 50%; box-shadow: 0 2px 5px rgba(0,0,0,0.3);">
                                            </div>
                                        </div>
                                    </div>
                                    <span id="audiobooksDuration"
                                        style="color: white; font-size: 13px; min-width: 45px;">0:00</span>
                                </div>

                                <button id="audiobooksVolumeBtn" class="action-btn"
                                    style="background: rgba(255,255,255,0.2); color: white; min-width: 45px; height: 45px; padding: 0; display: flex; align-items: center; justify-content: center; font-size: 18px; transition: all 0.3s;"><i
                                        class="fas fa-volume-up"></i></button>
                                <input type="range" id="audiobooksVolumeSlider" min="0" max="100" value="100"
                                    style="width: 80px;">
                            </div>
                        </div>
                    </div>

                    <audio id="audiobooksAudioElement" preload="metadata"></audio>
                </div>

                <!-- BookTorrio Page -->
                <div id="booktorrio-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-book-open" style="color: #06b6d4;"></i> <span>BookTorrio</span>
                            </h2>
                            <p class="page-subtitle">Search and download EPUB books</p>
                        </div>
                    </div>

                    <div class="page-content">
                        <!-- Navigation Buttons -->
                        <div class="booktorrio-nav" style="margin-bottom: 2rem;">
                            <button id="searchTabBtn" class="booktorrio-tab-btn active">
                                <i class="fas fa-search"></i> Search
                            </button>
                            <button id="libraryTabBtn" class="booktorrio-tab-btn">
                                <i class="fas fa-bookmark"></i> Library
                            </button>
                        </div>

                        <!-- Search Tab -->
                        <div id="searchTab" class="booktorrio-tab">
                            <div class="search-section" style="margin-bottom: 2rem;">
                                <div class="search-container-books">
                                    <input type="text" id="bookSearchInput" placeholder="Search for books..."
                                        class="search-input-books">
                                    <button id="searchBooksBtn" class="search-btn-books">
                                        <i class="fas fa-search"></i> Search
                                    </button>
                                </div>
                            </div>

                            <div id="bookSearchResults" class="books-grid">
                                <div class="search-placeholder">
                                    <i class="fas fa-book-open"
                                        style="font-size: 3rem; color: #06b6d4; margin-bottom: 1rem;"></i>
                                    <h3>Search for Books</h3>
                                    <p>Enter a book title above to find EPUB books</p>
                                </div>
                            </div>

                            <div id="bookSearchLoading" style="display: none; text-align: center; padding: 2rem;">
                                <div class="spinner"></div>
                                <p>Searching for books...</p>
                            </div>
                        </div>

                        <!-- Library Tab (Empty for now) -->
                        <div id="libraryTab" class="booktorrio-tab" style="display: none;">
                            <div class="search-placeholder">
                                <i class="fas fa-bookmark"
                                    style="font-size: 3rem; color: #06b6d4; margin-bottom: 1rem;"></i>
                                <h3>Library</h3>
                                <p>Your saved books will appear here</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- EPUB Reader Overlay -->
                <div id="epubReaderOverlay" style="display:none;">
                    <div class="reader-header">
                        <div class="reader-esc-hint">Press ESC to exit</div>
                        <div class="reader-title" id="readerTitle"></div>
                        <div style="width: 120px;"></div> <!-- Spacer for symmetry -->
                    </div>
                    <div id="readerContainer"></div>
                    <div class="reader-footer">
                        <button id="readerBackBtn" class="reader-back-btn" title="Exit reader">
                            <i class="fas fa-arrow-left"></i>
                            <span>Back</span>
                        </button>
                        <div class="reader-nav-controls">
                            <button id="readerPrevBtn" class="reader-nav-btn" title="Previous page"><i
                                    class="fas fa-chevron-left"></i></button>
                            <button id="readerNextBtn" class="reader-nav-btn" title="Next page"><i
                                    class="fas fa-chevron-right"></i></button>
                        </div>
                        <div id="readerChapterControls" class="reader-chapter-controls" style="display:none;">
                            <span class="chapter-count-label">Chapters: <strong
                                    id="readerChapterCount">0</strong></span>
                            <input id="readerChapterInput" type="number" min="1" step="1" placeholder="1"
                                title="Enter chapter number" />
                            <button id="readerChapterGo" class="reader-nav-btn" title="Go to chapter"><i
                                    class="fas fa-arrow-right"></i></button>
                        </div>
                        <button id="readerSettingsBtn" class="reader-gear" aria-label="Settings"><i
                                class="fas fa-cog"></i></button>
                    </div>
                    <div id="readerSettingsPanel" class="reader-settings hidden">
                        <div class="settings-section">
                            <label>Theme</label>
                            <div class="settings-row">
                                <button class="theme-btn" data-theme="light">Light</button>
                                <button class="theme-btn" data-theme="dark">Dark</button>
                                <button class="theme-btn" data-theme="night">Night</button>
                            </div>
                        </div>
                        <div class="settings-section">
                            <label>Font</label>
                            <select id="readerFont">
                                <option
                                    value="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif">
                                    System Default</option>
                                <option value="Georgia, Cambria, 'Times New Roman', Times, serif">Serif</option>
                                <option value="Arial, Helvetica, sans-serif">Sans-Serif</option>
                                <option value="'Courier New', Courier, monospace">Monospace</option>
                            </select>
                        </div>
                        <div class="settings-section">
                            <label>Text size</label>
                            <input id="readerFontSize" type="range" min="12" max="28" step="1" value="16" />
                        </div>
                    </div>
                </div>

                <!-- Anime Page -->
                <div id="anime-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-dragon" style="color: #3b82f6;"></i> <span>Anime</span>
                            </h2>
                            <p class="page-subtitle">Discover and watch anime with torrents</p>
                        </div>
                    </div>

                    <!-- Search Section -->
                    <div style="max-width: 900px; margin: 0 auto 2rem;">
                        <div
                            style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.3); position: relative;">
                            <i class="fas fa-search"
                                style="position: absolute; left: 1.5rem; top: 50%; transform: translateY(-50%); color: #3b82f6; font-size: 1.2rem; pointer-events: none;"></i>
                            <input id="animeSearchInput" placeholder="Search for anime..." type="text"
                                style="width: 100%; padding: 1rem 1rem 1rem 3rem; background: rgba(0,0,0,0.4); border: 2px solid rgba(59, 130, 246, 0.3); border-radius: 10px; color: var(--light); font-size: 1.1rem; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); box-sizing: border-box;" />
                        </div>
                    </div>

                    <!-- Anime Grid -->
                    <div id="animeGrid" class="movies-grid" style="margin-top: 2rem;">
                        <!-- Anime cards will be loaded here -->
                    </div>
                    <div class="loading" id="animeLoadingIndicator" style="display: none;">
                        <div class="spinner"></div>
                        <p>Loading anime...</p>
                    </div>
                </div>

                <!-- Comics Page -->
                <div id="comics-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-mask" style="color: #f97316;"></i> <span>Comics Library</span>
                            </h2>
                            <p class="page-subtitle">Read comics from ReadComicOnline</p>
                        </div>
                    </div>

                    <!-- Search Section -->
                    <div style="max-width: 900px; margin: 0 auto 2rem;">
                        <div
                            style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.3); position: relative;">
                            <i class="fas fa-search"
                                style="position: absolute; left: 1.5rem; top: 50%; transform: translateY(-50%); color: #f97316; font-size: 1.2rem; pointer-events: none; z-index: 1;"></i>
                            <input id="comics-search-input"
                                placeholder="Search for comics... (e.g., Superman, Spider Man)" type="text"
                                style="width: 100%; padding: 1rem 1rem 1rem 3rem; background: rgba(0,0,0,0.4); border: 2px solid rgba(249, 115, 22, 0.3); border-radius: 10px; color: var(--light); font-size: 1.1rem; transition: all 0.3s ease; box-sizing: border-box; outline: none;" />
                        </div>
                    </div>

                    <div id="comics-search-container"
                        style="max-width: 1400px; margin: 0 auto 30px; display: flex; gap: 10px; align-items: center; justify-content: center;">
                        <button id="comics-search-btn" style="display: none;">Search</button>
                        <button id="comics-browse-btn"
                            style="padding: 12px 30px; font-size: 16px; font-weight: bold; border: none; border-radius: 10px; cursor: pointer; background: linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.2)); color: #f97316; border: 2px solid rgba(249, 115, 22, 0.5); display: none; transition: all 0.3s ease;">Browse
                            All</button>
                        <button id="comics-back-btn"
                            style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.2), rgba(234, 88, 12, 0.2)); color: #f97316; border: 2px solid rgba(249, 115, 22, 0.5); display: none; padding: 12px 30px; font-size: 16px; font-weight: bold; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;">
                            Back</button>
                    </div>

                    <!-- Comics Grid -->
                    <div id="comics-container" class="movies-grid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; max-width: 1400px; margin: 0 auto;">
                        <!-- Comics cards will be loaded here -->
                    </div>

                    <!-- Load More Button -->
                    <div id="comics-load-more-container"
                        style="text-align: center; margin: 2rem auto; max-width: 1400px; display: none;">
                        <button id="comics-load-more-btn"
                            style="padding: 15px 40px; font-size: 18px; font-weight: bold; border: none; border-radius: 12px; cursor: pointer; background: linear-gradient(135deg, #f97316, #ea580c); color: #fff; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4);">
                            <i class="fas fa-arrow-down"></i> Load More Comics
                        </button>
                    </div>

                    <!-- Issues Container -->
                    <div id="comics-issues-container" style="max-width: 1400px; margin: 0 auto; display: none;"></div>

                    <!-- Reader Container -->
                    <div id="comics-reader-container" style="max-width: 1000px; margin: 0 auto; display: none;">
                        <div id="comics-page-loader" style="text-align: center; padding: 20px; color: #888;">Loading
                            pages...</div>
                    </div>

                    <!-- Loading Indicator -->
                    <div id="comics-loading" style="text-align: center; padding: 20px; font-size: 18px; color: #888;">
                        Loading...</div>
                </div>

                <!-- Manga Page -->
                <div id="manga-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-book-reader" style="color: #ec4899;"></i> <span>Manga</span>
                            </h2>
                            <p class="page-subtitle">Read manga from WeebCentral</p>
                        </div>
                    </div>

                    <!-- Search Section -->
                    <div style="max-width: 900px; margin: 0 auto 2rem;">
                        <div
                            style="background: rgba(255,255,255,0.1); border-radius: 12px; padding: 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.3); position: relative;">
                            <i class="fas fa-search"
                                style="position: absolute; left: 1.5rem; top: 50%; transform: translateY(-50%); color: #ec4899; font-size: 1.2rem; pointer-events: none;"></i>
                            <input id="mangaSearchInput" placeholder="Search for manga..." type="text"
                                style="width: 100%; padding: 1rem 1rem 1rem 3rem; background: rgba(0,0,0,0.4); border: 2px solid rgba(236, 72, 153, 0.3); border-radius: 10px; color: var(--light); font-size: 1.1rem; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); box-sizing: border-box;" />
                        </div>
                    </div>

                    <!-- Manga Grid -->
                    <div id="mangaGrid" class="movies-grid" style="margin-top: 2rem;">
                        <!-- Manga cards will be loaded here -->
                    </div>
                    <div class="loading" id="mangaLoadingIndicator" style="display: none;">
                        <i class="fas fa-spinner"></i> Loading manga...
                    </div>
                </div>

                <!-- Manga Reader Page -->
                <div id="manga-reader-page"
                    style="display: none; background: #000; min-height: 100vh; position: relative;">
                    <!-- Floating Back Button -->
                    <button id="mangaReaderBack"
                        style="position: sticky; top: 1rem; left: 1rem; z-index: 1000; background: var(--secondary); border: none; padding: 0.75rem 1.5rem; border-radius: 8px; color: white; font-size: 1rem; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); box-shadow: 0 4px 12px rgba(0,0,0,0.5); width: fit-content; margin-bottom: 1rem;">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>

                    <!-- Keyboard Navigation Hint -->
                    <div
                        style="position: fixed; right: 1.5rem; top: 50%; transform: translateY(-50%); z-index: 900; background: rgba(0,0,0,0.7); padding: 1rem; border-radius: 8px; color: white; font-size: 0.9rem; text-align: center; backdrop-filter: blur(10px); box-shadow: 0 4px 12px rgba(0,0,0,0.5); max-width: 120px;">
                        <i class="fas fa-keyboard"
                            style="font-size: 1.5rem; margin-bottom: 0.5rem; display: block;"></i>
                        <p style="margin: 0; line-height: 1.4;">Use arrow keys to scroll</p>
                        <div style="margin-top: 0.5rem; font-size: 1.2rem;">
                            <div><i class="fas fa-arrow-up"></i></div>
                            <div><i class="fas fa-arrow-down"></i></div>
                        </div>
                    </div>

                    <div id="mangaReaderTitle"
                        style="text-align: center; padding: 1rem; color: white; font-size: 1.5rem; font-weight: 600;">
                        <!-- Chapter title will be here -->
                    </div>
                    <div id="mangaReaderPages" style="max-width: 1200px; margin: 0 auto; padding: 1rem;">
                        <!-- Manga pages will be loaded here -->
                    </div>
                    <div id="mangaReaderLoading" style="text-align: center; padding: 3rem; color: white;">
                        <i class="fas fa-spinner fa-spin" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <p style="font-size: 1.2rem;">Loading chapter...</p>
                    </div>
                </div>

                <!-- Manga Details Modal -->
                <div id="mangaDetailsModal"
                    style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.95); z-index: 10000; overflow-y: auto;">
                    <div style="max-width: 1200px; margin: 2rem auto; padding: 2rem; position: relative;">
                        <button id="mangaDetailsClose"
                            style="position: absolute; top: 1rem; right: 1rem; background: rgba(255,255,255,0.1); border: none; width: 40px; height: 40px; border-radius: 50%; color: white; font-size: 1.5rem; cursor: pointer; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);">
                            <i class="fas fa-times"></i>
                        </button>

                        <div style="display: flex; gap: 2rem; margin-bottom: 2rem;">
                            <img id="mangaDetailsCover" src="" alt="Manga Cover"
                                style="width: 300px; height: 450px; object-fit: cover; border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,0.5);">
                            <div style="flex: 1; color: white;">
                                <h2 id="mangaDetailsTitle"
                                    style="font-size: 2.5rem; margin-bottom: 1rem; color: #ec4899;"></h2>
                                <p id="mangaDetailsAuthor"
                                    style="font-size: 1.1rem; margin-bottom: 0.5rem; color: #9ca3af;"></p>
                                <p id="mangaDetailsStatus"
                                    style="font-size: 1rem; margin-bottom: 1rem; color: #9ca3af;"></p>
                                <div id="mangaDetailsTags"
                                    style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem;">
                                    <!-- Tags will be here -->
                                </div>
                                <p id="mangaDetailsDescription"
                                    style="line-height: 1.6; color: #d1d5db; font-size: 1rem;">
                                    <!-- Description will be here -->
                                </p>
                            </div>
                        </div>

                        <div>
                            <h3 style="color: white; font-size: 1.5rem; margin-bottom: 1rem;">
                                <i class="fas fa-list"></i> Chapters
                            </h3>
                            <div id="mangaChaptersList"
                                style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1rem; max-height: 500px; overflow-y: auto;">
                                <!-- Chapters will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Downloader Page -->
                <div id="downloader-page" style="display: none;">
                    <div class="page-header-enhanced">
                        <div class="page-title-section">
                            <h2 class="section-title">
                                <i class="fas fa-download" style="color: #a855f7;"></i> <span>Downloader</span>
                            </h2>
                            <p class="page-subtitle">Download and manage your media files</p>
                        </div>
                    </div>

                    <div class="trakt-container">
                        <div class="trakt-card">
                            <div class="trakt-card-body">
                                <div class="downloader-search">
                                    <input id="downloaderQuery" type="text"
                                        placeholder="Search movies or shows (e.g., Superman)" />
                                    <button id="downloaderSearchBtn"><i class="fas fa-search"></i></button>
                                    <div class="downloader-type-toggle">
                                        <button id="downloaderFilterMovies" class="filter-btn active">Movies</button>
                                        <button id="downloaderFilterTV" class="filter-btn">TV Shows</button>
                                    </div>
                                </div>
                                <div id="downloaderResults" class="downloader-results"></div>
                                <div id="downloaderEmpty" class="downloader-empty" style="display:none;">Type a search
                                    above to see results.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div> <!-- End app-main -->
        <!-- Mobile Bottom Navigation -->
        <nav class="bottom-nav">
            <div class="bottom-nav-item active" data-page="home">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="bottom-nav-item" data-page="genres">
                <i class="fas fa-layer-group"></i>
                <span>Genres</span>
            </div>
            <div class="bottom-nav-item" data-page="my-list">
                <i class="fas fa-heart"></i>
                <span>My List</span>
            </div>
            <div class="bottom-nav-item" data-page="settings">
                <i class="fas fa-cog"></i>
                <span>Settings</span>
            </div>
        </nav>
    </div> <!-- End app-container -->

    <!-- Anime Details Modal -->
    <div class="modal" id="animeDetailsModal">
        <div class="modal-content">
            <button class="modal-close" id="animeModalClose">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <img alt="Backdrop" class="modal-backdrop" id="animeModalBackdrop" src="" />
                <div class="modal-header-content">
                    <img alt="Poster" class="modal-poster" id="animeModalPoster" src="" />
                    <div>
                        <h1 class="modal-title" id="animeModalTitle">Anime Title</h1>
                        <div class="modal-info">
                            <div class="modal-rating">
                                <i class="fas fa-star"></i> <span id="animeModalRating">0.0</span>
                            </div>
                            <div class="modal-year" id="animeModalYear">2023</div>
                            <div class="modal-runtime" id="animeModalEpisodes">24 Episodes</div>
                        </div>
                        <p class="modal-tagline" id="animeModalGenres">Action, Adventure</p>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <h3 class="modal-section-title">
                    <i class="fas fa-book-open"></i> Synopsis
                </h3>
                <p class="modal-overview" id="animeModalOverview">Synopsis goes here...</p>

                <!-- Season/Episode Selector (only for series, not movies) -->
                <div id="animeSeasonEpisodeContainer" style="display: none; margin: 1.5rem 0;">
                    <h3 class="modal-section-title">
                        <i class="fas fa-film"></i> Select Season & Episode
                    </h3>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 200px;">
                            <label
                                style="display: block; margin-bottom: 0.5rem; color: var(--light); font-weight: 500; font-size: 0.95rem;">
                                <i class="fas fa-layer-group"></i> Season
                            </label>
                            <select id="animeSeasonSelector"
                                style="width: 100%; padding: 0.75rem; background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15)); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; color: var(--light); font-size: 1rem; cursor: pointer; font-weight: 500; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);">
                                <option value="" style="background: #1a1a2e; color: var(--light);">All Seasons</option>
                            </select>
                        </div>
                        <div style="flex: 1; min-width: 200px;">
                            <label
                                style="display: block; margin-bottom: 0.5rem; color: var(--light); font-weight: 500; font-size: 0.95rem;">
                                <i class="fas fa-play-circle"></i> Episode
                            </label>
                            <select id="animeEpisodeSelector"
                                style="width: 100%; padding: 0.75rem; background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15)); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; color: var(--light); font-size: 1rem; cursor: pointer; font-weight: 500; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);">
                                <option value="" style="background: #1a1a2e; color: var(--light);">All Episodes</option>
                            </select>
                        </div>
                    </div>
                    <div
                        style="background: rgba(59, 130, 246, 0.1); border-left: 3px solid #3b82f6; padding: 0.75rem 1rem; margin-top: 1rem; border-radius: 6px; font-size: 0.9rem; color: var(--light);">
                        <i class="fas fa-info-circle" style="color: #3b82f6; margin-right: 0.5rem;"></i>
                        <strong>Tip:</strong> Select "All Seasons" or "All Episodes" to find complete packs, or choose a
                        specific season/episode for targeted results.
                    </div>
                </div>

                <!-- Realm Streaming Sources Button (outside container so it shows for movies too) -->
                <div style="margin: 1.5rem 0; display: flex; gap: 0.75rem; flex-wrap: wrap;">
                    <button id="animeDirectStreamBtn"
                        style="flex: 1; min-width: 150px; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #10b981, #059669); border: none; border-radius: 8px; color: white; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.3s ease;">
                        <i class="fas fa-external-link-alt"></i> Direct Stream
                    </button>
                    <button id="animeRealmSourcesBtn"
                        style="flex: 1; min-width: 150px; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #8b5cf6, #6d28d9); border: none; border-radius: 8px; color: white; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.3s ease;">
                        <i class="fas fa-play-circle"></i> Stream from Realm
                    </button>
                    <button id="animeFindTorrentsBtn"
                        style="flex: 1; min-width: 150px; padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #2563eb); border: none; border-radius: 8px; color: white; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.3s ease;">
                        <i class="fas fa-magnet"></i> Find Torrents
                    </button>
                </div>

                <!-- Realm Sources Container -->
                <div class="torrents-container" id="animeRealmSourcesContainer"
                    style="display: none; margin-top: 1.5rem;">
                    <div class="torrents-header">
                        <h3 class="modal-section-title">
                            <i class="fas fa-server"></i> Realm Streaming Sources
                        </h3>
                        <div class="torrent-actions">
                            <button class="btn btn-outline" id="animeRefreshRealmSources">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>

                    <div class="torrents-list" id="animeRealmSourcesList">
                        <!-- Realm sources will be loaded here -->
                    </div>
                </div>

                <!-- Torrents section -->
                <div class="torrents-container" id="animeTorrentsContainer" style="display: none;">
                    <div class="torrents-header">
                        <h3 class="modal-section-title">
                            <i class="fas fa-magnet"></i> Available Torrents from Nyaa
                        </h3>
                        <div class="torrent-actions">
                            <button class="btn btn-outline" id="animeRefreshTorrents">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Custom Search Section -->
                    <div
                        style="margin-bottom: 1.5rem; padding-bottom: 1.5rem; border-bottom: 1px solid rgba(255,255,255,0.1);">
                        <h4
                            style="color: var(--light); font-size: 0.95rem; margin-bottom: 0.75rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-search" style="color: #3b82f6;"></i>
                            Can't find what you're looking for? Try a custom search
                        </h4>
                        <div style="display: flex; gap: 0.5rem; align-items: stretch;">
                            <input type="text" id="animeCustomSearchInput"
                                placeholder="Enter your own search query (e.g., 'Dragon Ball S02E01 1080p')"
                                style="flex: 1; padding: 0.75rem 1rem; background: rgba(255,255,255,0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; color: var(--light); font-size: 0.95rem;">
                            <button id="animeCustomSearchBtn"
                                style="padding: 0.75rem 1.5rem; background: linear-gradient(135deg, #3b82f6, #2563eb); border: none; border-radius: 8px; color: white; font-weight: 500; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                    </div>

                    <div style="margin-bottom: 1rem;">
                        <input type="text" id="animeTorrentKeywordFilter"
                            placeholder="Filter torrents by keyword (e.g., 1080p, BluRay, SubsPlease)..."
                            style="width: 100%; padding: 0.6rem; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: var(--light); font-size: 0.95rem;">
                    </div>
                    <div class="torrents-list" id="animeTorrentsList">
                        <!-- Torrents will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Movie/Show Details Modal -->
    <div class="modal" id="detailsModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <img alt="Backdrop" class="modal-backdrop" id="modalBackdrop" src="" />
                <div class="modal-header-content">
                    <img alt="Poster" class="modal-poster" id="modalPoster" src="" />
                    <div>
                        <h1 class="modal-title" id="modalTitle">Movie Title</h1>
                        <div class="modal-info">
                            <div class="modal-rating">
                                <i class="fas fa-star"></i> <span id="modalRating">0.0</span>
                            </div>
                            <div class="modal-year" id="modalYear">2023</div>
                            <div class="modal-runtime" id="modalRuntime">120 min</div>
                        </div>
                        <p class="modal-tagline" id="modalTagline">Tagline goes here</p>
                        <div class="modal-actions-container">
                            <div class="primary-actions">
                                <button class="btn-enhanced btn-enhanced-primary" id="watchNowBtn">
                                    <div class="btn-icon">
                                        <i class="fas fa-play-circle"></i>
                                    </div>
                                    <div class="btn-content">
                                        <span class="btn-title">Find Media</span>
                                        <span class="btn-subtitle">Search torrents & streams</span>
                                    </div>
                                </button>
                                <button class="btn-enhanced btn-enhanced-secondary" id="useStreamsBtn">
                                    <div class="btn-icon">
                                        <i class="fas fa-broadcast-tower"></i>
                                    </div>
                                    <div class="btn-content">
                                        <span class="btn-title">Direct Streams</span>
                                        <span class="btn-subtitle">No downloads needed</span>
                                    </div>
                                </button>
                            </div>
                            <div class="secondary-actions">
                                <button class="btn-icon-only" id="traktWatchlistBtn" style="display: none;"
                                    title="Add to Watchlist">
                                    <i class="fas fa-plus"></i>
                                </button>
                                <button class="btn-icon-only done-watching-btn" id="modalDoneWatchingBtn"
                                    title="Done Watching">
                                    <i class="fas fa-check"></i>
                                </button>
                            </div>
                            <div id="watchNowNote" class="action-note" style="display:none;">
                                <i class="fas fa-info-circle"></i>
                                Please select an episode first
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <h3 class="modal-section-title">
                    <i class="fas fa-book-open"></i> Overview
                </h3>
                <p class="modal-overview" id="modalOverview">Overview goes here...</p>

                <!-- Seasons selector for TV shows -->
                <div class="seasons-container" id="seasonsContainer" style="display: none;">
                    <h3 class="modal-section-title">
                        <i class="fas fa-tv"></i> Seasons
                    </h3>
                    <div
                        style="background: rgba(139, 92, 246, 0.1); border-left: 3px solid var(--secondary); padding: 0.75rem 1rem; margin-bottom: 1rem; border-radius: 6px; font-size: 0.9rem; color: var(--light);">
                        <i class="fas fa-info-circle" style="color: var(--secondary); margin-right: 0.5rem;"></i>
                        <strong>Tip:</strong> Click a <strong>Season</strong> button to find torrents for the entire
                        season, or click a specific <strong>Episode</strong> to find torrents for just that episode.
                    </div>
                    <div class="season-selector" id="seasonSelector">
                        <!-- Seasons buttons will be loaded here -->
                    </div>
                    <h3 class="modal-section-title">
                        <i class="fas fa-list"></i> Episodes
                    </h3>
                    <div class="episodes-grid" id="episodesGrid">
                        <!-- Episodes will be loaded here -->
                    </div>
                </div>

                <h3 class="modal-section-title">
                    <i class="fas fa-users"></i> Cast
                </h3>
                <div class="cast-grid" id="castGrid">
                    <!-- Cast members will be loaded here -->
                </div>

                <h3 class="modal-section-title">
                    <i class="fas fa-thumbs-up"></i> Similar Content
                </h3>
                <div class="similar-grid" id="similarGrid">
                    <!-- Similar movies/shows will be loaded here -->
                </div>

                <!-- Torrents section -->
                <div class="torrents-container" id="torrentsContainer">
                    <div class="torrents-header">
                        <h3 class="modal-section-title">
                            <i class="fas fa-magnet"></i> Available Torrents
                        </h3>
                        <div class="torrent-actions">
                            <label for="torrentSortSelect"
                                style="margin-right: 0.5rem; font-size:0.9rem; opacity:0.85;">Sort:</label>
                            <select id="torrentSortSelect" class="modal-select" style="margin-right: 0.5rem;">
                                <option value="seeders">Seeds (default)</option>
                                <option value="size-desc">Size: High  Low</option>
                                <option value="size-asc">Size: Low  High</option>
                            </select>
                            <label for="torrentSizeFilterSelect"
                                style="margin: 0 0.5rem 0 0.25rem; font-size:0.9rem; opacity:0.85;">Size:</label>
                            <select id="torrentSizeFilterSelect" class="modal-select" style="margin-right: 0.5rem;">
                                <option value="all">All sizes</option>
                                <option value="gte-1g"> 1 GB</option>
                                <option value="gte-2g"> 2 GB</option>
                                <option value="2-4g">24 GB</option>
                                <option value="4-8g">48 GB</option>
                                <option value="gte-8g"> 8 GB</option>
                            </select>
                            <button class="btn btn-outline" id="refreshTorrents">
                                <i class="fas fa-sync"></i> Refresh
                            </button>
                        </div>
                    </div>
                    <div
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-left: 4px solid #ffd700; padding: 1rem; margin-bottom: 1.5rem; border-radius: 8px; box-shadow: 0 2px 10px rgba(102, 126, 234, 0.3);">
                        <div style="display: flex; align-items: center; gap: 0.75rem;">
                            <i class="fas fa-volume-up" style="color: #ffd700; font-size: 1.5rem;"></i>
                            <div>
                                <strong style="color: #fff; font-size: 1.05rem;">Audio Issues?</strong>
                                <p style="margin: 0.25rem 0 0 0; color: rgba(255, 255, 255, 0.9); font-size: 0.95rem;">
                                    If you experience audio problems or no audio at all, click <strong>"Open in
                                        MPV"</strong> for the best playback experience.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="provider-buttons">
                        <button class="provider-btn active" data-provider="jackett">
                            <i class="fas fa-link"></i> Jackett
                        </button>
                        <button class="provider-btn" data-provider="torrentio">
                            <i class="fas fa-rocket"></i> Torrentio
                        </button>
                        <button class="provider-btn" data-provider="torrentless">
                            <i class="fas fa-tools"></i> PlayTorrio
                        </button>
                        <button class="provider-btn" data-provider="nuvio">
                            <i class="fas fa-stream"></i> Nuvio <span
                                style="font-size: 0.8em; opacity: 0.8;">(ShowBox)</span>
                        </button>
                        <button class="provider-btn" data-provider="comet">
                            <i class="fas fa-meteor"></i> Comet
                        </button>
                        <button class="provider-btn" data-provider="111477">
                            <i class="fas fa-play-circle"></i> 111477
                        </button>
                        <button class="provider-btn" data-provider="moviebox">
                            <i class="fas fa-film"></i> MovieBox
                        </button>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <input type="text" id="torrentKeywordFilter" placeholder="Filter torrents by keyword..."
                            style="width: 100%; padding: 0.6rem; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: var(--light); font-size: 0.95rem;">
                    </div>
                    <div class="torrents-list" id="torrentsList">
                        <!-- Torrents will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MPV Player -->
    <div class="vlc-player-container" id="mpvPlayerContainer">
        <div class="vlc-player-header">
            <div class="vlc-player-title" id="mpvPlayerTitle">Player <span class="source-badge webtorrent"
                    id="streamSourceBadge" title="Streaming source">by ayman</span></div>
        </div>
        <div class="vlc-player-content">
            <div class="file-selector" id="fileSelector">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3 style="margin: 0;"><i class="fas fa-folder-open"></i> Select File to Play</h3>
                    <button class="close-player-btn" id="closePlayerBtn" title="Close Player (Esc)"
                        style="padding: 0.5rem 1rem; background: var(--vlc-orange); border: none; color: white; border-radius: 4px; cursor: pointer; font-weight: 600; font-size: 0.95rem;">
                        <i class="fas fa-times"></i> Close
                    </button>
                </div>
                <div class="file-list" id="fileList">
                    <!-- Files will be loaded here -->
                </div>
            </div>

            <div class="subtitle-controls" id="subtitleControls" style="display: none;">
                <h4><i class="fas fa-closed-captioning"></i> Available Subtitles:</h4>
                <div id="subtitleList">
                    <!-- Subtitle files will be loaded here -->
                </div>
            </div>

            <div class="vlc-player-area" id="mpvPlayerArea">
                <div class="vlc-loading" id="mpvLoading">
                    <i class="fas fa-spinner"></i>
                    <span>Loading</span>
                </div>
            </div>

            <div class="vlc-controls" id="mpvControls" style="display: none;">
                <button class="vlc-btn secondary" id="copyStreamBtn">
                    <i class="fas fa-copy"></i> Copy Link
                </button>
                <button class="vlc-btn" id="playNowBtn">
                    <i class="fas fa-play"></i> Play Now
                </button>
                <button class="vlc-btn" id="openMPVBtn">
                    <i class="fas fa-external-link-alt"></i> Open in MPV
                </button>
                <button class="vlc-btn" id="openVLCBtn">
                    <i class="fas fa-external-link-alt"></i> Open in VLC
                </button>
            </div>
        </div>
    </div>

    <!-- Custom Video Player -->
    <div class="custom-player-container" id="customPlayerContainer">
        <div class="player-header">
            <div class="player-title" id="customPlayerTitle">
                <i class="fas fa-play-circle"></i>
                <span>Custom Player</span> <span class="source-badge webtorrent" id="customSourceBadge"
                    title="Streaming source">WebTorrent</span>
            </div>
            <button class="close-player-btn" id="closeCustomPlayer" title="Close Player (Esc)">
                <i class="fas fa-times"></i> Close
            </button>
        </div>


        <div class="video-container" id="videoContainer">
            <video class="custom-video video-js" id="customVideo" preload="metadata">
                <source id="videoSource" src="" type="video/mp4">
                Your browser does not support the video tag.
            </video>

            <div class="loading-overlay" id="loadingOverlay">
                <i class="fas fa-spinner"></i>
                <span>Loading video...</span>
            </div>

            <div class="subtitle-display" id="subtitleDisplay"></div>

            <div class="video-controls" id="videoControls">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-filled" id="progressFilled"></div>
                    </div>
                    <div class="progress-time">
                        <span id="currentTime">0:00</span>
                        <span id="totalTime">0:00</span>
                    </div>
                </div>

                <div class="control-bar">
                    <div class="control-left">
                        <button class="control-btn" id="rewindBtn" title="Rewind 10s"><i
                                class="fas fa-backward"></i></button>
                        <button class="control-btn play-pause" id="playPauseBtn" title="Play/Pause"><i
                                class="fas fa-play"></i></button>
                        <button class="control-btn" id="forwardBtn" title="Forward 10s"><i
                                class="fas fa-forward"></i></button>
                    </div>
                    <div class="control-right">
                        <div class="volume-group">
                            <button class="control-btn" id="htmlMuteBtn" title="Mute/Unmute"><i
                                    class="fas fa-volume-up"></i></button>
                            <input type="range" id="htmlVolume" class="volume-slider" min="0" max="100" value="80" />
                        </div>
                        <button class="control-btn" id="htmlSubsBtn" title="Subtitles"><i
                                class="fas fa-closed-captioning"></i></button>

                        <button class="control-btn" id="fullscreenBtn" title="Fullscreen"><i
                                class="fas fa-expand"></i></button>
                    </div>
                </div>
            </div>
        </div>
        <div class="subs-panel" id="htmlSubsPanel" style="right: 1rem; bottom: 6rem;">
            <div class="subs-header">
                <div>Subtitles</div>
                <div class="menu-actions">
                    <button class="menu-refresh" id="htmlSubsClose">Close</button>
                </div>
            </div>

            <!-- Upload Section -->
            <div class="subs-upload">
                <input type="file" id="subtitleFile" accept=".srt,.vtt,.ass,.ssa" style="display:none;" />
                <button class="subs-upload-btn" id="htmlSubsUploadBtn">
                    <i class="fas fa-upload"></i> Upload Subtitle File
                </button>
            </div>

            <!-- Customization Section -->
            <div class="subs-divider"></div>
            <div class="subs-settings">
                <div class="subs-setting-row">
                    <label for="subsSize">Size</label>
                    <input type="range" id="subsSize" min="12" max="48" value="22">
                    <span class="subs-setting-value" id="subsSizeValue">22px</span>
                </div>
                <div class="subs-setting-row">
                    <label for="subsColor">Color</label>
                    <input type="color" id="subsColor" value="#ffffff">
                </div>
                <div class="subs-setting-row">
                    <label for="subsBackground">Background</label>
                    <input type="color" id="subsBackground" value="#000000">
                </div>
                <div class="subs-setting-row">
                    <label for="subsBackgroundOpacity">BG Opacity</label>
                    <input type="range" id="subsBackgroundOpacity" min="0" max="100" value="75">
                    <span class="subs-setting-value" id="subsOpacityValue">75%</span>
                </div>
                <div class="subs-setting-row">
                    <label for="subsFont">Font</label>
                    <select id="subsFont">
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Courier New', monospace">Courier New</option>
                        <option value="Georgia, serif">Georgia</option>
                        <option value="'Times New Roman', serif">Times New Roman</option>
                        <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                        <option value="Verdana, sans-serif">Verdana</option>
                        <option value="'Comic Sans MS', cursive">Comic Sans MS</option>
                        <option value="Impact, fantasy">Impact</option>
                    </select>
                </div>
            </div>

            <div class="subs-divider"></div>
            <div class="subs-help">Choose a subtitle. Sources: OpenSubtitles, Wyzie</div>
            <div id="htmlSubsList"></div>
        </div>
    </div>

    <!-- WCJS (WebChimera) Player -->
    <div class="wcjs-player-container" id="wcjsPlayerContainer" style="opacity:0;pointer-events:none;">
        <div class="player-header">
            <div class="player-title" id="wcjsPlayerTitle">
                <i class="fas fa-vial"></i>
                <span>WebChimera Player</span>
            </div>
            <div class="player-actions">
                <div class="subtitle-upload">
                    <input type="file" id="wcjsSubtitleFile" accept=".srt,.vtt,.ass,.ssa" />
                    <label for="wcjsSubtitleFile" class="upload-btn">
                        <i class="fas fa-upload"></i> Upload Subtitles
                    </label>
                </div>
                <button class="close-player-btn" id="closeWcjsPlayer">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>

        <style>
            .wcjs-player-container {
                position: fixed;
                inset: 0;
                background: #000;
                z-index: 3500;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            .wcjs-canvas-container {
                flex: 1;
                position: relative;
                background: #000;
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 0;
                min-width: 0;
                overflow: hidden;
            }

            #wcjsCanvas {
                width: 100%;
                height: 100%;
                display: block;
            }

            .wcjs-loading {
                position: absolute;
                inset: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                color: var(--vlc-orange);
                background: rgba(0, 0, 0, 0.8);
                font-size: 1.2rem;
            }

            .volume-group {
                display: flex;
                align-items: center;
                gap: 0.5rem;
                margin-left: 1rem;
            }

            .volume-slider {
                width: 120px;
            }
        </style>

        <div class="wcjs-canvas-container">
            <canvas id="wcjsCanvas"></canvas>
            <div class="wcjs-loading" id="wcjsLoading" style="display:none;">
                <i class="fas fa-spinner" style="animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;"></i>
                <span style="margin-left:0.75rem;">Loading stream...</span>
            </div>
            <div class="video-controls" id="wcjsControls" style="display:block;">
                <div class="progress-container">
                    <div class="progress-bar" id="wcjsProgressBar">
                        <div class="progress-filled" id="wcjsProgressFilled"></div>
                    </div>
                    <div class="progress-time">
                        <span id="wcjsCurrentTime">0:00</span>
                        <span id="wcjsTotalTime">0:00</span>
                    </div>
                </div>

                <div class="control-buttons">
                    <button class="control-btn" id="wcjsRewindBtn" title="Rewind 10s"><i
                            class="fas fa-backward"></i></button>
                    <button class="control-btn play-pause" id="wcjsPlayPauseBtn" title="Play/Pause"><i
                            class="fas fa-play"></i></button>
                    <button class="control-btn" id="wcjsForwardBtn" title="Forward 10s"><i
                            class="fas fa-forward"></i></button>
                    <div class="volume-group">
                        <button class="control-btn" id="wcjsMuteBtn" title="Mute/Unmute"><i
                                class="fas fa-volume-up"></i></button>
                        <input type="range" id="wcjsVolume" class="volume-slider" min="0" max="100" value="80" />
                    </div>
                    <button class="control-btn" id="wcjsSubsBtn" title="Subtitles"><i
                            class="fas fa-closed-captioning"></i></button>
                    <button class="control-btn" id="wcjsAudioBtn" title="Audio Tracks"><i
                            class="fas fa-headphones"></i></button>
                    <button class="control-btn fullscreen-btn" id="wcjsFullscreenBtn" title="Fullscreen"><i
                            class="fas fa-expand"></i></button>
                </div>
            </div>
        </div>
        <div class="subs-panel" id="wcjsSubsPanel">
            <div class="subs-header">
                <div>Subtitles</div>
                <div class="menu-actions">
                    <button class="menu-refresh" id="wcjsSubsRefresh">Refresh</button>
                    <button class="menu-refresh" id="wcjsSubsClose">Close</button>
                </div>
            </div>
            <div class="subs-help">Choose a subtitle. Sources: OpenSubtitles, Wyzie</div>
            <div id="wcjsSubsList"></div>
        </div>
        <div class="subs-panel" id="wcjsAudioPanel" style="right: 360px;">
            <div class="subs-header">
                <div>Audio Tracks</div>
                <div class="menu-actions">
                    <button class="menu-refresh" id="wcjsAudioClose">Close</button>
                </div>
            </div>
            <div id="wcjsAudioList"></div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">Action completed!</div>

    <!-- EPUB Download Modal -->
    <div id="epubDownloadModal" class="epub-download-modal" style="display: none;">
        <div class="epub-modal-content">
            <div class="epub-modal-header">
                <h3><i class="fas fa-download"></i> Download EPUB Book</h3>
                <button class="epub-modal-close" onclick="closeEpubDownloadModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="epub-modal-body">
                <div class="epub-download-instruction">
                    <p><strong>Please download the EPUB file to this exact location:</strong></p>
                    <div class="epub-path-container">
                        <code id="epubDownloadPath"></code>
                        <button class="copy-path-btn" onclick="copyEpubPath()">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                    <p class="epub-note">After downloading, the book will automatically appear in your Library tab.</p>
                </div>
                <div class="epub-modal-actions">
                    <button class="epub-download-btn" onclick="openDownloadLink()">
                        <i class="fas fa-external-link-alt"></i>
                        Download from Browser
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <!-- Video.js JavaScript -->
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>


    <!-- Updater Overlay (enhanced, user-friendly) -->
    <div id="updateOverlay"
        style="position:fixed; inset:0; background:rgba(0,0,0,0.95); z-index:9999; display:none; align-items:center; justify-content:center; backdrop-filter:blur(10px);">
        <div
            style="background:linear-gradient(135deg, #2a1847 0%, #1f1235 100%); border:2px solid #a855f7; padding:2.5rem; border-radius:16px; width:min(90%, 480px); text-align:center; color:#f8f9fa; box-shadow:0 20px 40px rgba(0,0,0,0.5); position:relative;">
            <!-- Close button (only shown when download is complete) -->
            <button id="updateCloseBtn" onclick="hideOverlay()"
                style="position:absolute; top:15px; right:15px; background:rgba(255,255,255,0.1); border:none; color:#c084fc; width:32px; height:32px; border-radius:50%; cursor:pointer; display:none; align-items:center; justify-content:center; transition: all 0.45s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);"
                onmouseover="this.style.background='rgba(255,255,255,0.2)'"
                onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                <i class="fas fa-times" style="font-size:14px;"></i>
            </button>

            <div id="updateStatusIcon" class="fas fa-download"
                style="font-size:3rem; margin-bottom:1.5rem; color:#a855f7; animation: spin 1.4s cubic-bezier(0.65, 0, 0.35, 1) infinite;">
            </div>
            <h2 style="margin:0 0 0.5rem 0; font-size:1.5rem; font-weight:600;">App Update in Progress</h2>
            <p id="updateStatusText" style="margin:0.25rem 0 1.5rem 0; color:#c084fc; font-size:1rem; line-height:1.4;">
                Update found! Downloading now, please wait...</p>
            <div
                style="height:12px; background:rgba(255,255,255,0.08); border-radius:12px; overflow:hidden; margin-bottom:12px; box-shadow:inset 0 2px 4px rgba(0,0,0,0.3);">
                <div id="updateProgressBar"
                    style="height:100%; width:0%; background:linear-gradient(90deg, #a855f7, #22c55e); transition: width 0.7s cubic-bezier(0.25, 0.46, 0.45, 0.94); border-radius:12px;">
                </div>
            </div>
            <div id="updatePercent" style="font-weight:700; color:#a855f7; font-size:1.1rem; margin-bottom:1rem;">0%
            </div>
            <p id="updateWarningText" style="margin:0.5rem 0 1rem 0; color:#8b5cf6; font-size:0.9rem; opacity:0.8;">
                Please do not close the application during the update</p>
            <button id="updateRestartBtn" class="btn btn-primary"
                style="margin-top:1rem; display:none; padding:0.75rem 2rem; font-size:1rem; border-radius:8px;">
                <i class="fas fa-sync-alt"></i> Restart Now to Complete Update
            </button>
        </div>
    </div>

    <!-- Resume Prompt Modal (top-level) -->
    <div class="modal" id="resumeModal">
        <div class="modal-content" style="max-width:480px">
            <button class="modal-close" id="resumeClose"><i class="fas fa-times"></i></button>
            <div class="modal-header">
                <div class="modal-header-content" style="gap:0.75rem; align-items:center;">
                    <div style="display:flex; align-items:center; gap:0.5rem;">
                        <i class="fas fa-history" style="color: var(--vlc-orange);"></i>
                        <h2 class="modal-title" id="resumeTitle" style="margin:0; font-size:1.3rem;">Resume playback?
                        </h2>
                    </div>
                    <div class="modal-info" style="display:flex; gap:0.5rem; align-items:center;">
                        <span id="resumeTime" class="genre-chip">00:00</span>
                    </div>
                </div>
            </div>
            <div class="modal-body" style="padding-top:0.5rem;">
                <p class="modal-overview" id="resumeText" style="margin-bottom:1rem;">You have previous progress for
                    this title. Would you like to continue from where you left off?</p>
                <div style="display:flex; gap:0.75rem; justify-content:flex-end;">
                    <button class="btn btn-outline" id="resumeStartOver"><i class="fas fa-undo"></i> Start Over</button>
                    <button class="btn" id="resumeContinue"><i class="fas fa-play"></i> Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application Script -->
    <script type="module" src="/js/main.js"></script>
</body>

</html>